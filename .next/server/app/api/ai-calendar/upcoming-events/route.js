/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai-calendar/upcoming-events/route";
exports.ids = ["app/api/ai-calendar/upcoming-events/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute&page=%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute.ts&appDir=%2FUsers%2Frodrigodibernardo33gmail.com%2FDocuments%2FApp%20Development%20Proyects%2FIntellego%20Platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frodrigodibernardo33gmail.com%2FDocuments%2FApp%20Development%20Proyects%2FIntellego%20Platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute&page=%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute.ts&appDir=%2FUsers%2Frodrigodibernardo33gmail.com%2FDocuments%2FApp%20Development%20Proyects%2FIntellego%20Platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frodrigodibernardo33gmail.com%2FDocuments%2FApp%20Development%20Proyects%2FIntellego%20Platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rodrigodibernardo33gmail_com_Documents_App_Development_Proyects_Intellego_Platform_src_app_api_ai_calendar_upcoming_events_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/ai-calendar/upcoming-events/route.ts */ \"(rsc)/./src/app/api/ai-calendar/upcoming-events/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai-calendar/upcoming-events/route\",\n        pathname: \"/api/ai-calendar/upcoming-events\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai-calendar/upcoming-events/route\"\n    },\n    resolvedPagePath: \"/Users/rodrigodibernardo33gmail.com/Documents/App Development Proyects/Intellego Platform/src/app/api/ai-calendar/upcoming-events/route.ts\",\n    nextConfigOutput,\n    userland: _Users_rodrigodibernardo33gmail_com_Documents_App_Development_Proyects_Intellego_Platform_src_app_api_ai_calendar_upcoming_events_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhaS1jYWxlbmRhciUyRnVwY29taW5nLWV2ZW50cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWktY2FsZW5kYXIlMkZ1cGNvbWluZy1ldmVudHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhaS1jYWxlbmRhciUyRnVwY29taW5nLWV2ZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJvZHJpZ29kaWJlcm5hcmRvMzNnbWFpbC5jb20lMkZEb2N1bWVudHMlMkZBcHAlMjBEZXZlbG9wbWVudCUyMFByb3llY3RzJTJGSW50ZWxsZWdvJTIwUGxhdGZvcm0lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGcm9kcmlnb2RpYmVybmFyZG8zM2dtYWlsLmNvbSUyRkRvY3VtZW50cyUyRkFwcCUyMERldmVsb3BtZW50JTIwUHJveWVjdHMlMkZJbnRlbGxlZ28lMjBQbGF0Zm9ybSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDMEY7QUFDdks7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9yb2RyaWdvZGliZXJuYXJkbzMzZ21haWwuY29tL0RvY3VtZW50cy9BcHAgRGV2ZWxvcG1lbnQgUHJveWVjdHMvSW50ZWxsZWdvIFBsYXRmb3JtL3NyYy9hcHAvYXBpL2FpLWNhbGVuZGFyL3VwY29taW5nLWV2ZW50cy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWktY2FsZW5kYXIvdXBjb21pbmctZXZlbnRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWktY2FsZW5kYXIvdXBjb21pbmctZXZlbnRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9haS1jYWxlbmRhci91cGNvbWluZy1ldmVudHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvcm9kcmlnb2RpYmVybmFyZG8zM2dtYWlsLmNvbS9Eb2N1bWVudHMvQXBwIERldmVsb3BtZW50IFByb3llY3RzL0ludGVsbGVnbyBQbGF0Zm9ybS9zcmMvYXBwL2FwaS9haS1jYWxlbmRhci91cGNvbWluZy1ldmVudHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute&page=%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute.ts&appDir=%2FUsers%2Frodrigodibernardo33gmail.com%2FDocuments%2FApp%20Development%20Proyects%2FIntellego%20Platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frodrigodibernardo33gmail.com%2FDocuments%2FApp%20Development%20Proyects%2FIntellego%20Platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/ai-calendar/upcoming-events/route.ts":
/*!**********************************************************!*\
  !*** ./src/app/api/ai-calendar/upcoming-events/route.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_temp_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/temp-storage */ \"(rsc)/./src/lib/temp-storage.ts\");\n\n\n\n\nasync function GET(req) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'No autorizado'\n            }, {\n                status: 401\n            });\n        }\n        // Obtener todos los eventos del usuario\n        const allEvents = (0,_lib_temp_storage__WEBPACK_IMPORTED_MODULE_3__.getEvents)(session.user.id);\n        // Filtrar eventos próximos (próximos 30 días)\n        const now = new Date();\n        const nextMonth = new Date();\n        nextMonth.setDate(nextMonth.getDate() + 30);\n        const upcomingEvents = allEvents.filter((event)=>{\n            const eventDate = new Date(event.date);\n            return eventDate >= now && eventDate <= nextMonth;\n        }).sort((a, b)=>new Date(a.date).getTime() - new Date(b.date).getTime()).slice(0, 10) // Máximo 10 eventos próximos\n        ;\n        // Formatear eventos para el dashboard\n        const formattedEvents = upcomingEvents.map((event)=>({\n                id: event.id,\n                title: event.title,\n                date: event.date,\n                time: event.time,\n                location: event.location,\n                subject: event.subject,\n                description: event.description,\n                type: event.type\n            }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(formattedEvents);\n    } catch (error) {\n        console.error('Error fetching upcoming events:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Error interno del servidor'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9haS1jYWxlbmRhci91cGNvbWluZy1ldmVudHMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXVEO0FBQ1g7QUFDSjtBQUNNO0FBRXZDLGVBQWVJLElBQUlDLEdBQWdCO0lBQ3hDLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU1MLDJEQUFnQkEsQ0FBQ0Msa0RBQVdBO1FBRWxELElBQUksQ0FBQ0ksU0FBU0MsTUFBTUMsSUFBSTtZQUN0QixPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWdCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNyRTtRQUVBLHdDQUF3QztRQUN4QyxNQUFNQyxZQUFZVCw0REFBU0EsQ0FBQ0csUUFBUUMsSUFBSSxDQUFDQyxFQUFFO1FBRTNDLDhDQUE4QztRQUM5QyxNQUFNSyxNQUFNLElBQUlDO1FBQ2hCLE1BQU1DLFlBQVksSUFBSUQ7UUFDdEJDLFVBQVVDLE9BQU8sQ0FBQ0QsVUFBVUUsT0FBTyxLQUFLO1FBRXhDLE1BQU1DLGlCQUFpQk4sVUFDcEJPLE1BQU0sQ0FBQ0MsQ0FBQUE7WUFDTixNQUFNQyxZQUFZLElBQUlQLEtBQUtNLE1BQU1FLElBQUk7WUFDckMsT0FBT0QsYUFBYVIsT0FBT1EsYUFBYU47UUFDMUMsR0FDQ1EsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU0sSUFBSVgsS0FBS1UsRUFBRUYsSUFBSSxFQUFFSSxPQUFPLEtBQUssSUFBSVosS0FBS1csRUFBRUgsSUFBSSxFQUFFSSxPQUFPLElBQ3BFQyxLQUFLLENBQUMsR0FBRyxJQUFJLDZCQUE2Qjs7UUFFN0Msc0NBQXNDO1FBQ3RDLE1BQU1DLGtCQUFrQlYsZUFBZVcsR0FBRyxDQUFDVCxDQUFBQSxRQUFVO2dCQUNuRFosSUFBSVksTUFBTVosRUFBRTtnQkFDWnNCLE9BQU9WLE1BQU1VLEtBQUs7Z0JBQ2xCUixNQUFNRixNQUFNRSxJQUFJO2dCQUNoQlMsTUFBTVgsTUFBTVcsSUFBSTtnQkFDaEJDLFVBQVVaLE1BQU1ZLFFBQVE7Z0JBQ3hCQyxTQUFTYixNQUFNYSxPQUFPO2dCQUN0QkMsYUFBYWQsTUFBTWMsV0FBVztnQkFDOUJDLE1BQU1mLE1BQU1lLElBQUk7WUFDbEI7UUFFQSxPQUFPbkMscURBQVlBLENBQUNTLElBQUksQ0FBQ21CO0lBRTNCLEVBQUUsT0FBT2xCLE9BQU87UUFDZDBCLFFBQVExQixLQUFLLENBQUMsbUNBQW1DQTtRQUNqRCxPQUFPVixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQTZCLEdBQ3RDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvcm9kcmlnb2RpYmVybmFyZG8zM2dtYWlsLmNvbS9Eb2N1bWVudHMvQXBwIERldmVsb3BtZW50IFByb3llY3RzL0ludGVsbGVnbyBQbGF0Zm9ybS9zcmMvYXBwL2FwaS9haS1jYWxlbmRhci91cGNvbWluZy1ldmVudHMvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCdcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9saWIvYXV0aCdcbmltcG9ydCB7IGdldEV2ZW50cyB9IGZyb20gJ0AvbGliL3RlbXAtc3RvcmFnZSdcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXG4gICAgXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyPy5pZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdObyBhdXRvcml6YWRvJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgLy8gT2J0ZW5lciB0b2RvcyBsb3MgZXZlbnRvcyBkZWwgdXN1YXJpb1xuICAgIGNvbnN0IGFsbEV2ZW50cyA9IGdldEV2ZW50cyhzZXNzaW9uLnVzZXIuaWQpXG4gICAgXG4gICAgLy8gRmlsdHJhciBldmVudG9zIHByw7N4aW1vcyAocHLDs3hpbW9zIDMwIGTDrWFzKVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICBjb25zdCBuZXh0TW9udGggPSBuZXcgRGF0ZSgpXG4gICAgbmV4dE1vbnRoLnNldERhdGUobmV4dE1vbnRoLmdldERhdGUoKSArIDMwKVxuICAgIFxuICAgIGNvbnN0IHVwY29taW5nRXZlbnRzID0gYWxsRXZlbnRzXG4gICAgICAuZmlsdGVyKGV2ZW50ID0+IHtcbiAgICAgICAgY29uc3QgZXZlbnREYXRlID0gbmV3IERhdGUoZXZlbnQuZGF0ZSlcbiAgICAgICAgcmV0dXJuIGV2ZW50RGF0ZSA+PSBub3cgJiYgZXZlbnREYXRlIDw9IG5leHRNb250aFxuICAgICAgfSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShhLmRhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGIuZGF0ZSkuZ2V0VGltZSgpKVxuICAgICAgLnNsaWNlKDAsIDEwKSAvLyBNw6F4aW1vIDEwIGV2ZW50b3MgcHLDs3hpbW9zXG5cbiAgICAvLyBGb3JtYXRlYXIgZXZlbnRvcyBwYXJhIGVsIGRhc2hib2FyZFxuICAgIGNvbnN0IGZvcm1hdHRlZEV2ZW50cyA9IHVwY29taW5nRXZlbnRzLm1hcChldmVudCA9PiAoe1xuICAgICAgaWQ6IGV2ZW50LmlkLFxuICAgICAgdGl0bGU6IGV2ZW50LnRpdGxlLFxuICAgICAgZGF0ZTogZXZlbnQuZGF0ZSxcbiAgICAgIHRpbWU6IGV2ZW50LnRpbWUsXG4gICAgICBsb2NhdGlvbjogZXZlbnQubG9jYXRpb24sXG4gICAgICBzdWJqZWN0OiBldmVudC5zdWJqZWN0LFxuICAgICAgZGVzY3JpcHRpb246IGV2ZW50LmRlc2NyaXB0aW9uLFxuICAgICAgdHlwZTogZXZlbnQudHlwZVxuICAgIH0pKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGZvcm1hdHRlZEV2ZW50cylcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1cGNvbWluZyBldmVudHM6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0Vycm9yIGludGVybm8gZGVsIHNlcnZpZG9yJyB9LCBcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJnZXRFdmVudHMiLCJHRVQiLCJyZXEiLCJzZXNzaW9uIiwidXNlciIsImlkIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYWxsRXZlbnRzIiwibm93IiwiRGF0ZSIsIm5leHRNb250aCIsInNldERhdGUiLCJnZXREYXRlIiwidXBjb21pbmdFdmVudHMiLCJmaWx0ZXIiLCJldmVudCIsImV2ZW50RGF0ZSIsImRhdGUiLCJzb3J0IiwiYSIsImIiLCJnZXRUaW1lIiwic2xpY2UiLCJmb3JtYXR0ZWRFdmVudHMiLCJtYXAiLCJ0aXRsZSIsInRpbWUiLCJsb2NhdGlvbiIsInN1YmplY3QiLCJkZXNjcmlwdGlvbiIsInR5cGUiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ai-calendar/upcoming-events/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var _hybrid_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hybrid-storage */ \"(rsc)/./src/lib/hybrid-storage.ts\");\n\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                // Find user in database\n                const user = await (0,_hybrid_storage__WEBPACK_IMPORTED_MODULE_2__.findUserByEmail)(credentials.email);\n                if (!user || !user.password) {\n                    return null;\n                }\n                const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(credentials.password, user.password);\n                if (!isPasswordValid) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    role: user.role,\n                    studentId: user.studentId || undefined\n                };\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.role = user.role;\n                token.studentId = user.studentId;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.sub;\n                session.user.role = token.role;\n                session.user.studentId = token.studentId;\n            }\n            return session;\n        },\n        async redirect ({ url, baseUrl }) {\n            // Handle internal redirects\n            if (url.startsWith(\"/\")) return `${baseUrl}${url}`;\n            else if (new URL(url).origin === baseUrl) return url;\n            // Default to home page for external redirects\n            return baseUrl;\n        },\n        async signIn ({ user, account, profile }) {\n            return true;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNpRTtBQUNwQztBQUNxQjtBQUUzQyxNQUFNRyxjQUErQjtJQUMxQ0MsV0FBVztRQUNUSiwyRUFBbUJBLENBQUM7WUFDbEJLLE1BQU07WUFDTkMsYUFBYTtnQkFDWEMsT0FBTztvQkFBRUMsT0FBTztvQkFBU0MsTUFBTTtnQkFBUTtnQkFDdkNDLFVBQVU7b0JBQUVGLE9BQU87b0JBQVlDLE1BQU07Z0JBQVc7WUFDbEQ7WUFDQSxNQUFNRSxXQUFVTCxXQUFXO2dCQUN6QixJQUFJLENBQUNBLGFBQWFDLFNBQVMsQ0FBQ0QsYUFBYUksVUFBVTtvQkFDakQsT0FBTztnQkFDVDtnQkFFQSx3QkFBd0I7Z0JBQ3hCLE1BQU1FLE9BQU8sTUFBTVYsZ0VBQWVBLENBQUNJLFlBQVlDLEtBQUs7Z0JBRXBELElBQUksQ0FBQ0ssUUFBUSxDQUFDQSxLQUFLRixRQUFRLEVBQUU7b0JBQzNCLE9BQU87Z0JBQ1Q7Z0JBRUEsTUFBTUcsa0JBQWtCLE1BQU1aLHdEQUFjLENBQzFDSyxZQUFZSSxRQUFRLEVBQ3BCRSxLQUFLRixRQUFRO2dCQUdmLElBQUksQ0FBQ0csaUJBQWlCO29CQUNwQixPQUFPO2dCQUNUO2dCQUVBLE9BQU87b0JBQ0xFLElBQUlILEtBQUtHLEVBQUU7b0JBQ1hSLE9BQU9LLEtBQUtMLEtBQUs7b0JBQ2pCRixNQUFNTyxLQUFLUCxJQUFJO29CQUNmVyxNQUFNSixLQUFLSSxJQUFJO29CQUNmQyxXQUFXTCxLQUFLSyxTQUFTLElBQUlDO2dCQUMvQjtZQUNGO1FBQ0Y7S0FDRDtJQUNEQyxTQUFTO1FBQ1BDLFVBQVU7SUFDWjtJQUNBQyxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVYLElBQUksRUFBRTtZQUN2QixJQUFJQSxNQUFNO2dCQUNSVyxNQUFNUCxJQUFJLEdBQUdKLEtBQUtJLElBQUk7Z0JBQ3RCTyxNQUFNTixTQUFTLEdBQUdMLEtBQUtLLFNBQVM7WUFDbEM7WUFDQSxPQUFPTTtRQUNUO1FBQ0EsTUFBTUosU0FBUSxFQUFFQSxPQUFPLEVBQUVJLEtBQUssRUFBRTtZQUM5QixJQUFJQSxPQUFPO2dCQUNUSixRQUFRUCxJQUFJLENBQUNHLEVBQUUsR0FBR1EsTUFBTUMsR0FBRztnQkFDM0JMLFFBQVFQLElBQUksQ0FBQ0ksSUFBSSxHQUFHTyxNQUFNUCxJQUFJO2dCQUM5QkcsUUFBUVAsSUFBSSxDQUFDSyxTQUFTLEdBQUdNLE1BQU1OLFNBQVM7WUFDMUM7WUFDQSxPQUFPRTtRQUNUO1FBQ0EsTUFBTU0sVUFBUyxFQUFFQyxHQUFHLEVBQUVDLE9BQU8sRUFBRTtZQUM3Qiw0QkFBNEI7WUFDNUIsSUFBSUQsSUFBSUUsVUFBVSxDQUFDLE1BQU0sT0FBTyxHQUFHRCxVQUFVRCxLQUFLO2lCQUM3QyxJQUFJLElBQUlHLElBQUlILEtBQUtJLE1BQU0sS0FBS0gsU0FBUyxPQUFPRDtZQUVqRCw4Q0FBOEM7WUFDOUMsT0FBT0M7UUFDVDtRQUNBLE1BQU1JLFFBQU8sRUFBRW5CLElBQUksRUFBRW9CLE9BQU8sRUFBRUMsT0FBTyxFQUFFO1lBQ3JDLE9BQU87UUFDVDtJQUNGO0lBQ0FDLE9BQU87UUFDTEgsUUFBUTtJQUNWO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3JvZHJpZ29kaWJlcm5hcmRvMzNnbWFpbC5jb20vRG9jdW1lbnRzL0FwcCBEZXZlbG9wbWVudCBQcm95ZWN0cy9JbnRlbGxlZ28gUGxhdGZvcm0vc3JjL2xpYi9hdXRoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gXCJuZXh0LWF1dGhcIlxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHNcIlxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuaW1wb3J0IHsgZmluZFVzZXJCeUVtYWlsIH0gZnJvbSBcIi4vaHlicmlkLXN0b3JhZ2VcIlxuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBuYW1lOiBcImNyZWRlbnRpYWxzXCIsXG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBlbWFpbDogeyBsYWJlbDogXCJFbWFpbFwiLCB0eXBlOiBcImVtYWlsXCIgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6IFwiUGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwgfHwgIWNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaW5kIHVzZXIgaW4gZGF0YWJhc2VcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGZpbmRVc2VyQnlFbWFpbChjcmVkZW50aWFscy5lbWFpbClcblxuICAgICAgICBpZiAoIXVzZXIgfHwgIXVzZXIucGFzc3dvcmQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoXG4gICAgICAgICAgY3JlZGVudGlhbHMucGFzc3dvcmQsXG4gICAgICAgICAgdXNlci5wYXNzd29yZFxuICAgICAgICApXG5cbiAgICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICAgIHN0dWRlbnRJZDogdXNlci5zdHVkZW50SWQgfHwgdW5kZWZpbmVkLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgXSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiBcImp3dFwiLFxuICB9LFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciB9KSB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICB0b2tlbi5yb2xlID0gdXNlci5yb2xlXG4gICAgICAgIHRva2VuLnN0dWRlbnRJZCA9IHVzZXIuc3R1ZGVudElkXG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW5cbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uc3ViIVxuICAgICAgICBzZXNzaW9uLnVzZXIucm9sZSA9IHRva2VuLnJvbGUgYXMgc3RyaW5nXG4gICAgICAgIHNlc3Npb24udXNlci5zdHVkZW50SWQgPSB0b2tlbi5zdHVkZW50SWQgYXMgc3RyaW5nXG4gICAgICB9XG4gICAgICByZXR1cm4gc2Vzc2lvblxuICAgIH0sXG4gICAgYXN5bmMgcmVkaXJlY3QoeyB1cmwsIGJhc2VVcmwgfSkge1xuICAgICAgLy8gSGFuZGxlIGludGVybmFsIHJlZGlyZWN0c1xuICAgICAgaWYgKHVybC5zdGFydHNXaXRoKFwiL1wiKSkgcmV0dXJuIGAke2Jhc2VVcmx9JHt1cmx9YFxuICAgICAgZWxzZSBpZiAobmV3IFVSTCh1cmwpLm9yaWdpbiA9PT0gYmFzZVVybCkgcmV0dXJuIHVybFxuICAgICAgXG4gICAgICAvLyBEZWZhdWx0IHRvIGhvbWUgcGFnZSBmb3IgZXh0ZXJuYWwgcmVkaXJlY3RzXG4gICAgICByZXR1cm4gYmFzZVVybFxuICAgIH0sXG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSB9KSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46IFwiL2F1dGgvc2lnbmluXCIsXG4gIH0sXG59Il0sIm5hbWVzIjpbIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJiY3J5cHQiLCJmaW5kVXNlckJ5RW1haWwiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJ1c2VyIiwiaXNQYXNzd29yZFZhbGlkIiwiY29tcGFyZSIsImlkIiwicm9sZSIsInN0dWRlbnRJZCIsInVuZGVmaW5lZCIsInNlc3Npb24iLCJzdHJhdGVneSIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwic3ViIiwicmVkaXJlY3QiLCJ1cmwiLCJiYXNlVXJsIiwic3RhcnRzV2l0aCIsIlVSTCIsIm9yaWdpbiIsInNpZ25JbiIsImFjY291bnQiLCJwcm9maWxlIiwicGFnZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/calendar-data.ts":
/*!**********************************!*\
  !*** ./src/lib/calendar-data.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addCalendarEvent: () => (/* binding */ addCalendarEvent),\n/* harmony export */   createUserCalendarData: () => (/* binding */ createUserCalendarData),\n/* harmony export */   deleteCalendarEvent: () => (/* binding */ deleteCalendarEvent),\n/* harmony export */   findAvailableTimeSlots: () => (/* binding */ findAvailableTimeSlots),\n/* harmony export */   getEventTypeColor: () => (/* binding */ getEventTypeColor),\n/* harmony export */   getEventTypeIcon: () => (/* binding */ getEventTypeIcon),\n/* harmony export */   getEventsForDate: () => (/* binding */ getEventsForDate),\n/* harmony export */   getEventsForDateRange: () => (/* binding */ getEventsForDateRange),\n/* harmony export */   getUserCalendarData: () => (/* binding */ getUserCalendarData),\n/* harmony export */   isTimeSlotAvailable: () => (/* binding */ isTimeSlotAvailable),\n/* harmony export */   tempCalendarData: () => (/* binding */ tempCalendarData),\n/* harmony export */   updateCalendarEvent: () => (/* binding */ updateCalendarEvent),\n/* harmony export */   updateUserCalendarData: () => (/* binding */ updateUserCalendarData)\n/* harmony export */ });\n// Calendar Data Models for Smart Calendar\n// Temporary storage for calendar data\nconst globalForCalendarData = globalThis;\nconst tempCalendarData = globalForCalendarData.tempCalendarData ?? [];\nglobalForCalendarData.tempCalendarData = tempCalendarData;\n// Calendar Data Management Functions\nfunction getUserCalendarData(userId) {\n    return tempCalendarData.find((data)=>data.userId === userId);\n}\nfunction createUserCalendarData(userId) {\n    const newData = {\n        userId,\n        schoolSchedule: {\n            monday: [],\n            tuesday: [],\n            wednesday: [],\n            thursday: [],\n            friday: []\n        },\n        studyPreferences: {\n            preferredStudyTime: 'afternoon',\n            dailyStudyHours: 3,\n            maxSessionDuration: 90,\n            breakBetweenSessions: 15,\n            weekendStudyHours: 4,\n            noStudyDays: [\n                0\n            ] // Sunday\n        },\n        events: [],\n        isSetupComplete: false,\n        lastUpdated: new Date()\n    };\n    tempCalendarData.push(newData);\n    return newData;\n}\nfunction updateUserCalendarData(userId, updates) {\n    const index = tempCalendarData.findIndex((data)=>data.userId === userId);\n    if (index !== -1) {\n        tempCalendarData[index] = {\n            ...tempCalendarData[index],\n            ...updates,\n            lastUpdated: new Date()\n        };\n        return true;\n    }\n    return false;\n}\nfunction addCalendarEvent(userId, event) {\n    const userData = getUserCalendarData(userId);\n    if (userData) {\n        userData.events.push(event);\n        userData.lastUpdated = new Date();\n        // Force update in global storage\n        const index = tempCalendarData.findIndex((data)=>data.userId === userId);\n        if (index !== -1) {\n            tempCalendarData[index] = userData;\n        }\n        console.log(`📅 Evento agregado: ${event.title} - Total eventos: ${userData.events.length}`);\n        return true;\n    }\n    return false;\n}\nfunction updateCalendarEvent(userId, eventId, updates) {\n    const userData = getUserCalendarData(userId);\n    if (userData) {\n        const eventIndex = userData.events.findIndex((e)=>e.id === eventId);\n        if (eventIndex !== -1) {\n            userData.events[eventIndex] = {\n                ...userData.events[eventIndex],\n                ...updates\n            };\n            userData.lastUpdated = new Date();\n            // Force update in global storage\n            const index = tempCalendarData.findIndex((data)=>data.userId === userId);\n            if (index !== -1) {\n                tempCalendarData[index] = userData;\n            }\n            console.log(`📅 Evento actualizado: ${userData.events[eventIndex].title}`);\n            return true;\n        }\n    }\n    return false;\n}\nfunction deleteCalendarEvent(userId, eventId) {\n    const userData = getUserCalendarData(userId);\n    if (userData) {\n        const eventIndex = userData.events.findIndex((e)=>e.id === eventId);\n        if (eventIndex !== -1) {\n            const deletedEvent = userData.events[eventIndex];\n            userData.events.splice(eventIndex, 1);\n            userData.lastUpdated = new Date();\n            // Force update in global storage\n            const index = tempCalendarData.findIndex((data)=>data.userId === userId);\n            if (index !== -1) {\n                tempCalendarData[index] = userData;\n            }\n            console.log(`📅 Evento eliminado: ${deletedEvent.title} - Total eventos: ${userData.events.length}`);\n            return true;\n        }\n    }\n    return false;\n}\nfunction getEventsForDate(userId, date) {\n    const userData = getUserCalendarData(userId);\n    if (!userData) return [];\n    const targetDate = new Date(date);\n    targetDate.setHours(0, 0, 0, 0);\n    return userData.events.filter((event)=>{\n        const eventDate = new Date(event.date);\n        eventDate.setHours(0, 0, 0, 0);\n        return eventDate.getTime() === targetDate.getTime();\n    });\n}\nfunction getEventsForDateRange(userId, startDate, endDate) {\n    const userData = getUserCalendarData(userId);\n    if (!userData) return [];\n    return userData.events.filter((event)=>{\n        const eventDate = new Date(event.date);\n        return eventDate >= startDate && eventDate <= endDate;\n    });\n}\n// Utility functions for calendar operations\nfunction isTimeSlotAvailable(userId, date, startTime, endTime) {\n    const userData = getUserCalendarData(userId);\n    if (!userData) return true;\n    const dayName = getDayName(date.getDay());\n    const schoolSlots = userData.schoolSchedule[dayName] || [];\n    // Check school schedule conflicts\n    for (const slot of schoolSlots){\n        if (timeOverlaps(startTime, endTime, slot.start, slot.end)) {\n            return false;\n        }\n    }\n    // Check existing events\n    const dayEvents = getEventsForDate(userId, date);\n    for (const event of dayEvents){\n        if (event.startTime && event.endTime) {\n            if (timeOverlaps(startTime, endTime, event.startTime, event.endTime)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nfunction findAvailableTimeSlots(userId, date, duration, preferredTime) {\n    const userData = getUserCalendarData(userId);\n    if (!userData) return [];\n    const slots = [];\n    // Define time ranges based on preference\n    const timeRanges = {\n        morning: [\n            '08:00',\n            '12:00'\n        ],\n        afternoon: [\n            '14:00',\n            '18:00'\n        ],\n        evening: [\n            '19:00',\n            '22:00'\n        ]\n    };\n    const searchRange = preferredTime ? timeRanges[preferredTime] : [\n        '08:00',\n        '22:00'\n    ];\n    const [searchStart, searchEnd] = searchRange;\n    // Generate potential slots every 30 minutes\n    const startMinutes = timeToMinutes(searchStart);\n    const endMinutes = timeToMinutes(searchEnd);\n    for(let minutes = startMinutes; minutes <= endMinutes - duration; minutes += 30){\n        const slotStart = minutesToTime(minutes);\n        const slotEnd = minutesToTime(minutes + duration);\n        if (isTimeSlotAvailable(userId, date, slotStart, slotEnd)) {\n            slots.push({\n                start: slotStart,\n                end: slotEnd\n            });\n        }\n    }\n    return slots;\n}\nfunction getEventTypeColor(type) {\n    const colors = {\n        exam: '#EF4444',\n        study_session: '#3B82F6',\n        class: '#10B981',\n        personal: '#8B5CF6',\n        extracurricular: '#F59E0B' // Orange\n    };\n    return colors[type] || '#64748B';\n}\nfunction getEventTypeIcon(type) {\n    const icons = {\n        exam: '📝',\n        study_session: '📚',\n        class: '🎓',\n        personal: '👤',\n        extracurricular: '🏃‍♀️'\n    };\n    return icons[type] || '📅';\n}\n// Helper functions\nfunction getDayName(dayIndex) {\n    const days = [\n        'sunday',\n        'monday',\n        'tuesday',\n        'wednesday',\n        'thursday',\n        'friday',\n        'saturday'\n    ];\n    return days[dayIndex];\n}\nfunction timeToMinutes(time) {\n    const [hours, minutes] = time.split(':').map(Number);\n    return hours * 60 + minutes;\n}\nfunction minutesToTime(minutes) {\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;\n}\nfunction timeOverlaps(start1, end1, start2, end2) {\n    const start1Minutes = timeToMinutes(start1);\n    const end1Minutes = timeToMinutes(end1);\n    const start2Minutes = timeToMinutes(start2);\n    const end2Minutes = timeToMinutes(end2);\n    return start1Minutes < end2Minutes && end1Minutes > start2Minutes;\n}\n// Initialize demo data\nfunction initDemoCalendarData() {\n    const demoUserId = \"demo-student-fixed\";\n    if (!getUserCalendarData(demoUserId)) {\n        console.log(\"📅 Inicializando datos de calendario demo...\");\n        const demoData = createUserCalendarData(demoUserId);\n        // Demo school schedule\n        demoData.schoolSchedule = {\n            monday: [\n                {\n                    start: '08:00',\n                    end: '09:30',\n                    subject: 'Matemáticas',\n                    location: 'Aula 201',\n                    color: '#3B82F6'\n                },\n                {\n                    start: '09:45',\n                    end: '11:15',\n                    subject: 'Química',\n                    location: 'Laboratorio A',\n                    color: '#EF4444'\n                },\n                {\n                    start: '11:30',\n                    end: '13:00',\n                    subject: 'Historia',\n                    location: 'Aula 105',\n                    color: '#8B5CF6'\n                }\n            ],\n            tuesday: [\n                {\n                    start: '08:00',\n                    end: '09:30',\n                    subject: 'Física',\n                    location: 'Laboratorio B',\n                    color: '#10B981'\n                },\n                {\n                    start: '09:45',\n                    end: '11:15',\n                    subject: 'Literatura',\n                    location: 'Aula 203',\n                    color: '#F59E0B'\n                },\n                {\n                    start: '11:30',\n                    end: '13:00',\n                    subject: 'Biología',\n                    location: 'Laboratorio C',\n                    color: '#EC4899'\n                }\n            ],\n            wednesday: [\n                {\n                    start: '08:00',\n                    end: '09:30',\n                    subject: 'Matemáticas',\n                    location: 'Aula 201',\n                    color: '#3B82F6'\n                },\n                {\n                    start: '09:45',\n                    end: '11:15',\n                    subject: 'Educación Física',\n                    location: 'Gimnasio',\n                    color: '#06B6D4'\n                },\n                {\n                    start: '11:30',\n                    end: '13:00',\n                    subject: 'Arte',\n                    location: 'Taller',\n                    color: '#F97316'\n                }\n            ],\n            thursday: [\n                {\n                    start: '08:00',\n                    end: '09:30',\n                    subject: 'Química',\n                    location: 'Laboratorio A',\n                    color: '#EF4444'\n                },\n                {\n                    start: '09:45',\n                    end: '11:15',\n                    subject: 'Física',\n                    location: 'Laboratorio B',\n                    color: '#10B981'\n                },\n                {\n                    start: '11:30',\n                    end: '13:00',\n                    subject: 'Historia',\n                    location: 'Aula 105',\n                    color: '#8B5CF6'\n                }\n            ],\n            friday: [\n                {\n                    start: '08:00',\n                    end: '09:30',\n                    subject: 'Biología',\n                    location: 'Laboratorio C',\n                    color: '#EC4899'\n                },\n                {\n                    start: '09:45',\n                    end: '11:15',\n                    subject: 'Literatura',\n                    location: 'Aula 203',\n                    color: '#F59E0B'\n                },\n                {\n                    start: '11:30',\n                    end: '13:00',\n                    subject: 'Matemáticas',\n                    location: 'Aula 201',\n                    color: '#3B82F6'\n                }\n            ]\n        };\n        // Demo events\n        const now = new Date();\n        const demoEvents = [\n            {\n                id: 'exam-1',\n                title: 'Examen Química Orgánica',\n                date: new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000),\n                startTime: '10:00',\n                endTime: '12:00',\n                type: 'exam',\n                color: getEventTypeColor('exam'),\n                description: 'Examen parcial de química orgánica',\n                subject: 'Química',\n                location: 'Laboratorio A'\n            },\n            {\n                id: 'study-1',\n                title: 'Sesión de Estudio - Matemáticas',\n                date: new Date(now.getTime() + 1 * 24 * 60 * 60 * 1000),\n                startTime: '15:00',\n                endTime: '16:30',\n                type: 'study_session',\n                color: getEventTypeColor('study_session'),\n                description: 'Repaso de cálculo integral',\n                subject: 'Matemáticas'\n            },\n            {\n                id: 'personal-1',\n                title: 'Entrenamiento Fútbol',\n                date: new Date(now.getTime() + 2 * 24 * 60 * 60 * 1000),\n                startTime: '17:00',\n                endTime: '18:30',\n                type: 'extracurricular',\n                color: getEventTypeColor('extracurricular'),\n                description: 'Entrenamiento de fútbol',\n                location: 'Campo deportivo'\n            }\n        ];\n        demoEvents.forEach((event)=>{\n            demoData.events.push(event);\n        });\n        demoData.isSetupComplete = true;\n        demoData.lastUpdated = new Date();\n        console.log(\"✅ Datos de calendario demo inicializados\");\n    } else {\n        console.log(\"✅ Datos de calendario demo ya existen\");\n    }\n}\n// Initialize demo data on module load\ninitDemoCalendarData();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUs7Z0JBQ2xESyxXQUFXO2dCQUNYQyxTQUFTO2dCQUNUNkIsTUFBTTtnQkFDTmtDLE9BQU9uQyxrQkFBa0I7Z0JBQ3pCc0MsYUFBYTtnQkFDYkosVUFBVTtZQUNaO1NBQ0Q7UUFFREcsV0FBV0UsT0FBTyxDQUFDN0YsQ0FBQUE7WUFDakJzRixTQUFTaEcsTUFBTSxDQUFDSSxJQUFJLENBQUNNO1FBQ3ZCO1FBRUFzRixTQUFTL0YsZUFBZSxHQUFHO1FBQzNCK0YsU0FBUzlGLFdBQVcsR0FBRyxJQUFJQztRQUUzQlMsUUFBUUMsR0FBRyxDQUFDO0lBQ2QsT0FBTztRQUNMRCxRQUFRQyxHQUFHLENBQUM7SUFDZDtBQUNGO0FBRUEsc0NBQXNDO0FBQ3RDaUYiLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2RyaWdvZGliZXJuYXJkbzMzZ21haWwuY29tL0RvY3VtZW50cy9BcHAgRGV2ZWxvcG1lbnQgUHJveWVjdHMvSW50ZWxsZWdvIFBsYXRmb3JtL3NyYy9saWIvY2FsZW5kYXItZGF0YS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDYWxlbmRhciBEYXRhIE1vZGVscyBmb3IgU21hcnQgQ2FsZW5kYXJcblxuZXhwb3J0IGludGVyZmFjZSBUaW1lU2xvdCB7XG4gIHN0YXJ0OiBzdHJpbmcgLy8gXCIwODowMFwiXG4gIGVuZDogc3RyaW5nICAgLy8gXCIwOTozMFwiXG4gIHN1YmplY3Q6IHN0cmluZ1xuICBsb2NhdGlvbj86IHN0cmluZ1xuICBjb2xvcj86IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNjaG9vbFNjaGVkdWxlIHtcbiAgbW9uZGF5OiBUaW1lU2xvdFtdXG4gIHR1ZXNkYXk6IFRpbWVTbG90W11cbiAgd2VkbmVzZGF5OiBUaW1lU2xvdFtdXG4gIHRodXJzZGF5OiBUaW1lU2xvdFtdXG4gIGZyaWRheTogVGltZVNsb3RbXVxuICBzYXR1cmRheT86IFRpbWVTbG90W11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYWxlbmRhckV2ZW50IHtcbiAgaWQ6IHN0cmluZ1xuICB0aXRsZTogc3RyaW5nXG4gIGRhdGU6IERhdGVcbiAgc3RhcnRUaW1lPzogc3RyaW5nXG4gIGVuZFRpbWU/OiBzdHJpbmdcbiAgdHlwZTogJ2V4YW0nIHwgJ3N0dWR5X3Nlc3Npb24nIHwgJ2NsYXNzJyB8ICdwZXJzb25hbCcgfCAnZXh0cmFjdXJyaWN1bGFyJ1xuICBjb2xvcjogc3RyaW5nXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gIHN1YmplY3Q/OiBzdHJpbmdcbiAgbG9jYXRpb24/OiBzdHJpbmdcbiAgcHJpb3JpdHk/OiAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnXG4gIGR1cmF0aW9uPzogbnVtYmVyIC8vIGluIG1pbnV0ZXNcbiAgaXNSZWN1cnJpbmc/OiBib29sZWFuXG4gIHJlY3VycmluZ1BhdHRlcm4/OiB7XG4gICAgZnJlcXVlbmN5OiAnZGFpbHknIHwgJ3dlZWtseScgfCAnbW9udGhseSdcbiAgICBkYXlzPzogbnVtYmVyW10gLy8gMD1TdW5kYXksIDE9TW9uZGF5LCBldGMuXG4gICAgZW5kRGF0ZT86IERhdGVcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0dWR5UHJlZmVyZW5jZXMge1xuICBwcmVmZXJyZWRTdHVkeVRpbWU6ICdtb3JuaW5nJyB8ICdhZnRlcm5vb24nIHwgJ2V2ZW5pbmcnIHwgJ2ZsZXhpYmxlJ1xuICBkYWlseVN0dWR5SG91cnM6IG51bWJlclxuICBtYXhTZXNzaW9uRHVyYXRpb246IG51bWJlclxuICBicmVha0JldHdlZW5TZXNzaW9uczogbnVtYmVyXG4gIHdlZWtlbmRTdHVkeUhvdXJzOiBudW1iZXJcbiAgbm9TdHVkeURheXM6IG51bWJlcltdIC8vIERheXMgb2Ygd2VlayB0byBhdm9pZCBzdHVkeWluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJDYWxlbmRhckRhdGEge1xuICB1c2VySWQ6IHN0cmluZ1xuICBzY2hvb2xTY2hlZHVsZTogU2Nob29sU2NoZWR1bGVcbiAgc3R1ZHlQcmVmZXJlbmNlczogU3R1ZHlQcmVmZXJlbmNlc1xuICBldmVudHM6IENhbGVuZGFyRXZlbnRbXVxuICBpc1NldHVwQ29tcGxldGU6IGJvb2xlYW5cbiAgbGFzdFVwZGF0ZWQ6IERhdGVcbn1cblxuLy8gVGVtcG9yYXJ5IHN0b3JhZ2UgZm9yIGNhbGVuZGFyIGRhdGFcbmNvbnN0IGdsb2JhbEZvckNhbGVuZGFyRGF0YSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHRlbXBDYWxlbmRhckRhdGE6IFVzZXJDYWxlbmRhckRhdGFbXSB8IHVuZGVmaW5lZFxufVxuXG5leHBvcnQgY29uc3QgdGVtcENhbGVuZGFyRGF0YTogVXNlckNhbGVuZGFyRGF0YVtdID0gZ2xvYmFsRm9yQ2FsZW5kYXJEYXRhLnRlbXBDYWxlbmRhckRhdGEgPz8gW11cbmdsb2JhbEZvckNhbGVuZGFyRGF0YS50ZW1wQ2FsZW5kYXJEYXRhID0gdGVtcENhbGVuZGFyRGF0YVxuXG4vLyBDYWxlbmRhciBEYXRhIE1hbmFnZW1lbnQgRnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckNhbGVuZGFyRGF0YSh1c2VySWQ6IHN0cmluZyk6IFVzZXJDYWxlbmRhckRhdGEgfCB1bmRlZmluZWQge1xuICByZXR1cm4gdGVtcENhbGVuZGFyRGF0YS5maW5kKGRhdGEgPT4gZGF0YS51c2VySWQgPT09IHVzZXJJZClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVVzZXJDYWxlbmRhckRhdGEodXNlcklkOiBzdHJpbmcpOiBVc2VyQ2FsZW5kYXJEYXRhIHtcbiAgY29uc3QgbmV3RGF0YTogVXNlckNhbGVuZGFyRGF0YSA9IHtcbiAgICB1c2VySWQsXG4gICAgc2Nob29sU2NoZWR1bGU6IHtcbiAgICAgIG1vbmRheTogW10sXG4gICAgICB0dWVzZGF5OiBbXSxcbiAgICAgIHdlZG5lc2RheTogW10sXG4gICAgICB0aHVyc2RheTogW10sXG4gICAgICBmcmlkYXk6IFtdXG4gICAgfSxcbiAgICBzdHVkeVByZWZlcmVuY2VzOiB7XG4gICAgICBwcmVmZXJyZWRTdHVkeVRpbWU6ICdhZnRlcm5vb24nLFxuICAgICAgZGFpbHlTdHVkeUhvdXJzOiAzLFxuICAgICAgbWF4U2Vzc2lvbkR1cmF0aW9uOiA5MCxcbiAgICAgIGJyZWFrQmV0d2VlblNlc3Npb25zOiAxNSxcbiAgICAgIHdlZWtlbmRTdHVkeUhvdXJzOiA0LFxuICAgICAgbm9TdHVkeURheXM6IFswXSAvLyBTdW5kYXlcbiAgICB9LFxuICAgIGV2ZW50czogW10sXG4gICAgaXNTZXR1cENvbXBsZXRlOiBmYWxzZSxcbiAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKVxuICB9XG4gIFxuICB0ZW1wQ2FsZW5kYXJEYXRhLnB1c2gobmV3RGF0YSlcbiAgcmV0dXJuIG5ld0RhdGFcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVVzZXJDYWxlbmRhckRhdGEodXNlcklkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8VXNlckNhbGVuZGFyRGF0YT4pOiBib29sZWFuIHtcbiAgY29uc3QgaW5kZXggPSB0ZW1wQ2FsZW5kYXJEYXRhLmZpbmRJbmRleChkYXRhID0+IGRhdGEudXNlcklkID09PSB1c2VySWQpXG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICB0ZW1wQ2FsZW5kYXJEYXRhW2luZGV4XSA9IHtcbiAgICAgIC4uLnRlbXBDYWxlbmRhckRhdGFbaW5kZXhdLFxuICAgICAgLi4udXBkYXRlcyxcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDYWxlbmRhckV2ZW50KHVzZXJJZDogc3RyaW5nLCBldmVudDogQ2FsZW5kYXJFdmVudCk6IGJvb2xlYW4ge1xuICBjb25zdCB1c2VyRGF0YSA9IGdldFVzZXJDYWxlbmRhckRhdGEodXNlcklkKVxuICBpZiAodXNlckRhdGEpIHtcbiAgICB1c2VyRGF0YS5ldmVudHMucHVzaChldmVudClcbiAgICB1c2VyRGF0YS5sYXN0VXBkYXRlZCA9IG5ldyBEYXRlKClcbiAgICBcbiAgICAvLyBGb3JjZSB1cGRhdGUgaW4gZ2xvYmFsIHN0b3JhZ2VcbiAgICBjb25zdCBpbmRleCA9IHRlbXBDYWxlbmRhckRhdGEuZmluZEluZGV4KGRhdGEgPT4gZGF0YS51c2VySWQgPT09IHVzZXJJZClcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0ZW1wQ2FsZW5kYXJEYXRhW2luZGV4XSA9IHVzZXJEYXRhXG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5OFIEV2ZW50byBhZ3JlZ2FkbzogJHtldmVudC50aXRsZX0gLSBUb3RhbCBldmVudG9zOiAke3VzZXJEYXRhLmV2ZW50cy5sZW5ndGh9YClcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ2FsZW5kYXJFdmVudCh1c2VySWQ6IHN0cmluZywgZXZlbnRJZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPENhbGVuZGFyRXZlbnQ+KTogYm9vbGVhbiB7XG4gIGNvbnN0IHVzZXJEYXRhID0gZ2V0VXNlckNhbGVuZGFyRGF0YSh1c2VySWQpXG4gIGlmICh1c2VyRGF0YSkge1xuICAgIGNvbnN0IGV2ZW50SW5kZXggPSB1c2VyRGF0YS5ldmVudHMuZmluZEluZGV4KGUgPT4gZS5pZCA9PT0gZXZlbnRJZClcbiAgICBpZiAoZXZlbnRJbmRleCAhPT0gLTEpIHtcbiAgICAgIHVzZXJEYXRhLmV2ZW50c1tldmVudEluZGV4XSA9IHtcbiAgICAgICAgLi4udXNlckRhdGEuZXZlbnRzW2V2ZW50SW5kZXhdLFxuICAgICAgICAuLi51cGRhdGVzXG4gICAgICB9XG4gICAgICB1c2VyRGF0YS5sYXN0VXBkYXRlZCA9IG5ldyBEYXRlKClcbiAgICAgIFxuICAgICAgLy8gRm9yY2UgdXBkYXRlIGluIGdsb2JhbCBzdG9yYWdlXG4gICAgICBjb25zdCBpbmRleCA9IHRlbXBDYWxlbmRhckRhdGEuZmluZEluZGV4KGRhdGEgPT4gZGF0YS51c2VySWQgPT09IHVzZXJJZClcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdGVtcENhbGVuZGFyRGF0YVtpbmRleF0gPSB1c2VyRGF0YVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhg8J+ThSBFdmVudG8gYWN0dWFsaXphZG86ICR7dXNlckRhdGEuZXZlbnRzW2V2ZW50SW5kZXhdLnRpdGxlfWApXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUNhbGVuZGFyRXZlbnQodXNlcklkOiBzdHJpbmcsIGV2ZW50SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCB1c2VyRGF0YSA9IGdldFVzZXJDYWxlbmRhckRhdGEodXNlcklkKVxuICBpZiAodXNlckRhdGEpIHtcbiAgICBjb25zdCBldmVudEluZGV4ID0gdXNlckRhdGEuZXZlbnRzLmZpbmRJbmRleChlID0+IGUuaWQgPT09IGV2ZW50SWQpXG4gICAgaWYgKGV2ZW50SW5kZXggIT09IC0xKSB7XG4gICAgICBjb25zdCBkZWxldGVkRXZlbnQgPSB1c2VyRGF0YS5ldmVudHNbZXZlbnRJbmRleF1cbiAgICAgIHVzZXJEYXRhLmV2ZW50cy5zcGxpY2UoZXZlbnRJbmRleCwgMSlcbiAgICAgIHVzZXJEYXRhLmxhc3RVcGRhdGVkID0gbmV3IERhdGUoKVxuICAgICAgXG4gICAgICAvLyBGb3JjZSB1cGRhdGUgaW4gZ2xvYmFsIHN0b3JhZ2VcbiAgICAgIGNvbnN0IGluZGV4ID0gdGVtcENhbGVuZGFyRGF0YS5maW5kSW5kZXgoZGF0YSA9PiBkYXRhLnVzZXJJZCA9PT0gdXNlcklkKVxuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICB0ZW1wQ2FsZW5kYXJEYXRhW2luZGV4XSA9IHVzZXJEYXRhXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OFIEV2ZW50byBlbGltaW5hZG86ICR7ZGVsZXRlZEV2ZW50LnRpdGxlfSAtIFRvdGFsIGV2ZW50b3M6ICR7dXNlckRhdGEuZXZlbnRzLmxlbmd0aH1gKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmVudHNGb3JEYXRlKHVzZXJJZDogc3RyaW5nLCBkYXRlOiBEYXRlKTogQ2FsZW5kYXJFdmVudFtdIHtcbiAgY29uc3QgdXNlckRhdGEgPSBnZXRVc2VyQ2FsZW5kYXJEYXRhKHVzZXJJZClcbiAgaWYgKCF1c2VyRGF0YSkgcmV0dXJuIFtdXG4gIFxuICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZGF0ZSlcbiAgdGFyZ2V0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICBcbiAgcmV0dXJuIHVzZXJEYXRhLmV2ZW50cy5maWx0ZXIoZXZlbnQgPT4ge1xuICAgIGNvbnN0IGV2ZW50RGF0ZSA9IG5ldyBEYXRlKGV2ZW50LmRhdGUpXG4gICAgZXZlbnREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gICAgcmV0dXJuIGV2ZW50RGF0ZS5nZXRUaW1lKCkgPT09IHRhcmdldERhdGUuZ2V0VGltZSgpXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmVudHNGb3JEYXRlUmFuZ2UodXNlcklkOiBzdHJpbmcsIHN0YXJ0RGF0ZTogRGF0ZSwgZW5kRGF0ZTogRGF0ZSk6IENhbGVuZGFyRXZlbnRbXSB7XG4gIGNvbnN0IHVzZXJEYXRhID0gZ2V0VXNlckNhbGVuZGFyRGF0YSh1c2VySWQpXG4gIGlmICghdXNlckRhdGEpIHJldHVybiBbXVxuICBcbiAgcmV0dXJuIHVzZXJEYXRhLmV2ZW50cy5maWx0ZXIoZXZlbnQgPT4ge1xuICAgIGNvbnN0IGV2ZW50RGF0ZSA9IG5ldyBEYXRlKGV2ZW50LmRhdGUpXG4gICAgcmV0dXJuIGV2ZW50RGF0ZSA+PSBzdGFydERhdGUgJiYgZXZlbnREYXRlIDw9IGVuZERhdGVcbiAgfSlcbn1cblxuLy8gVXRpbGl0eSBmdW5jdGlvbnMgZm9yIGNhbGVuZGFyIG9wZXJhdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBpc1RpbWVTbG90QXZhaWxhYmxlKFxuICB1c2VySWQ6IHN0cmluZywgXG4gIGRhdGU6IERhdGUsIFxuICBzdGFydFRpbWU6IHN0cmluZywgXG4gIGVuZFRpbWU6IHN0cmluZ1xuKTogYm9vbGVhbiB7XG4gIGNvbnN0IHVzZXJEYXRhID0gZ2V0VXNlckNhbGVuZGFyRGF0YSh1c2VySWQpXG4gIGlmICghdXNlckRhdGEpIHJldHVybiB0cnVlXG4gIFxuICBjb25zdCBkYXlOYW1lID0gZ2V0RGF5TmFtZShkYXRlLmdldERheSgpKVxuICBjb25zdCBzY2hvb2xTbG90cyA9IHVzZXJEYXRhLnNjaG9vbFNjaGVkdWxlW2RheU5hbWVdIHx8IFtdXG4gIFxuICAvLyBDaGVjayBzY2hvb2wgc2NoZWR1bGUgY29uZmxpY3RzXG4gIGZvciAoY29uc3Qgc2xvdCBvZiBzY2hvb2xTbG90cykge1xuICAgIGlmICh0aW1lT3ZlcmxhcHMoc3RhcnRUaW1lLCBlbmRUaW1lLCBzbG90LnN0YXJ0LCBzbG90LmVuZCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuICBcbiAgLy8gQ2hlY2sgZXhpc3RpbmcgZXZlbnRzXG4gIGNvbnN0IGRheUV2ZW50cyA9IGdldEV2ZW50c0ZvckRhdGUodXNlcklkLCBkYXRlKVxuICBmb3IgKGNvbnN0IGV2ZW50IG9mIGRheUV2ZW50cykge1xuICAgIGlmIChldmVudC5zdGFydFRpbWUgJiYgZXZlbnQuZW5kVGltZSkge1xuICAgICAgaWYgKHRpbWVPdmVybGFwcyhzdGFydFRpbWUsIGVuZFRpbWUsIGV2ZW50LnN0YXJ0VGltZSwgZXZlbnQuZW5kVGltZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEF2YWlsYWJsZVRpbWVTbG90cyhcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGRhdGU6IERhdGUsXG4gIGR1cmF0aW9uOiBudW1iZXIsIC8vIGluIG1pbnV0ZXNcbiAgcHJlZmVycmVkVGltZT86ICdtb3JuaW5nJyB8ICdhZnRlcm5vb24nIHwgJ2V2ZW5pbmcnXG4pOiB7IHN0YXJ0OiBzdHJpbmc7IGVuZDogc3RyaW5nIH1bXSB7XG4gIGNvbnN0IHVzZXJEYXRhID0gZ2V0VXNlckNhbGVuZGFyRGF0YSh1c2VySWQpXG4gIGlmICghdXNlckRhdGEpIHJldHVybiBbXVxuICBcbiAgY29uc3Qgc2xvdHM6IHsgc3RhcnQ6IHN0cmluZzsgZW5kOiBzdHJpbmcgfVtdID0gW11cbiAgXG4gIC8vIERlZmluZSB0aW1lIHJhbmdlcyBiYXNlZCBvbiBwcmVmZXJlbmNlXG4gIGNvbnN0IHRpbWVSYW5nZXMgPSB7XG4gICAgbW9ybmluZzogWycwODowMCcsICcxMjowMCddLFxuICAgIGFmdGVybm9vbjogWycxNDowMCcsICcxODowMCddLFxuICAgIGV2ZW5pbmc6IFsnMTk6MDAnLCAnMjI6MDAnXVxuICB9XG4gIFxuICBjb25zdCBzZWFyY2hSYW5nZSA9IHByZWZlcnJlZFRpbWUgPyB0aW1lUmFuZ2VzW3ByZWZlcnJlZFRpbWVdIDogWycwODowMCcsICcyMjowMCddXG4gIGNvbnN0IFtzZWFyY2hTdGFydCwgc2VhcmNoRW5kXSA9IHNlYXJjaFJhbmdlXG4gIFxuICAvLyBHZW5lcmF0ZSBwb3RlbnRpYWwgc2xvdHMgZXZlcnkgMzAgbWludXRlc1xuICBjb25zdCBzdGFydE1pbnV0ZXMgPSB0aW1lVG9NaW51dGVzKHNlYXJjaFN0YXJ0KVxuICBjb25zdCBlbmRNaW51dGVzID0gdGltZVRvTWludXRlcyhzZWFyY2hFbmQpXG4gIFxuICBmb3IgKGxldCBtaW51dGVzID0gc3RhcnRNaW51dGVzOyBtaW51dGVzIDw9IGVuZE1pbnV0ZXMgLSBkdXJhdGlvbjsgbWludXRlcyArPSAzMCkge1xuICAgIGNvbnN0IHNsb3RTdGFydCA9IG1pbnV0ZXNUb1RpbWUobWludXRlcylcbiAgICBjb25zdCBzbG90RW5kID0gbWludXRlc1RvVGltZShtaW51dGVzICsgZHVyYXRpb24pXG4gICAgXG4gICAgaWYgKGlzVGltZVNsb3RBdmFpbGFibGUodXNlcklkLCBkYXRlLCBzbG90U3RhcnQsIHNsb3RFbmQpKSB7XG4gICAgICBzbG90cy5wdXNoKHsgc3RhcnQ6IHNsb3RTdGFydCwgZW5kOiBzbG90RW5kIH0pXG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gc2xvdHNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEV2ZW50VHlwZUNvbG9yKHR5cGU6IENhbGVuZGFyRXZlbnRbJ3R5cGUnXSk6IHN0cmluZyB7XG4gIGNvbnN0IGNvbG9ycyA9IHtcbiAgICBleGFtOiAnI0VGNDQ0NCcsICAgICAgICAgIC8vIFJlZFxuICAgIHN0dWR5X3Nlc3Npb246ICcjM0I4MkY2JywgLy8gQmx1ZVxuICAgIGNsYXNzOiAnIzEwQjk4MScsICAgICAgICAgLy8gR3JlZW5cbiAgICBwZXJzb25hbDogJyM4QjVDRjYnLCAgICAgIC8vIFB1cnBsZVxuICAgIGV4dHJhY3VycmljdWxhcjogJyNGNTlFMEInIC8vIE9yYW5nZVxuICB9XG4gIHJldHVybiBjb2xvcnNbdHlwZV0gfHwgJyM2NDc0OEInXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmVudFR5cGVJY29uKHR5cGU6IENhbGVuZGFyRXZlbnRbJ3R5cGUnXSk6IHN0cmluZyB7XG4gIGNvbnN0IGljb25zID0ge1xuICAgIGV4YW06ICfwn5OdJyxcbiAgICBzdHVkeV9zZXNzaW9uOiAn8J+TmicsXG4gICAgY2xhc3M6ICfwn46TJyxcbiAgICBwZXJzb25hbDogJ/CfkaQnLFxuICAgIGV4dHJhY3VycmljdWxhcjogJ/Cfj4PigI3imYDvuI8nXG4gIH1cbiAgcmV0dXJuIGljb25zW3R5cGVdIHx8ICfwn5OFJ1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zXG5mdW5jdGlvbiBnZXREYXlOYW1lKGRheUluZGV4OiBudW1iZXIpOiBrZXlvZiBTY2hvb2xTY2hlZHVsZSB7XG4gIGNvbnN0IGRheXMgPSBbJ3N1bmRheScsICdtb25kYXknLCAndHVlc2RheScsICd3ZWRuZXNkYXknLCAndGh1cnNkYXknLCAnZnJpZGF5JywgJ3NhdHVyZGF5J11cbiAgcmV0dXJuIGRheXNbZGF5SW5kZXhdIGFzIGtleW9mIFNjaG9vbFNjaGVkdWxlXG59XG5cbmZ1bmN0aW9uIHRpbWVUb01pbnV0ZXModGltZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgY29uc3QgW2hvdXJzLCBtaW51dGVzXSA9IHRpbWUuc3BsaXQoJzonKS5tYXAoTnVtYmVyKVxuICByZXR1cm4gaG91cnMgKiA2MCArIG1pbnV0ZXNcbn1cblxuZnVuY3Rpb24gbWludXRlc1RvVGltZShtaW51dGVzOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IobWludXRlcyAvIDYwKVxuICBjb25zdCBtaW5zID0gbWludXRlcyAlIDYwXG4gIHJldHVybiBgJHtob3Vycy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7bWlucy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YFxufVxuXG5mdW5jdGlvbiB0aW1lT3ZlcmxhcHMoc3RhcnQxOiBzdHJpbmcsIGVuZDE6IHN0cmluZywgc3RhcnQyOiBzdHJpbmcsIGVuZDI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBzdGFydDFNaW51dGVzID0gdGltZVRvTWludXRlcyhzdGFydDEpXG4gIGNvbnN0IGVuZDFNaW51dGVzID0gdGltZVRvTWludXRlcyhlbmQxKVxuICBjb25zdCBzdGFydDJNaW51dGVzID0gdGltZVRvTWludXRlcyhzdGFydDIpXG4gIGNvbnN0IGVuZDJNaW51dGVzID0gdGltZVRvTWludXRlcyhlbmQyKVxuICBcbiAgcmV0dXJuIHN0YXJ0MU1pbnV0ZXMgPCBlbmQyTWludXRlcyAmJiBlbmQxTWludXRlcyA+IHN0YXJ0Mk1pbnV0ZXNcbn1cblxuLy8gSW5pdGlhbGl6ZSBkZW1vIGRhdGFcbmZ1bmN0aW9uIGluaXREZW1vQ2FsZW5kYXJEYXRhKCkge1xuICBjb25zdCBkZW1vVXNlcklkID0gXCJkZW1vLXN0dWRlbnQtZml4ZWRcIlxuICBcbiAgaWYgKCFnZXRVc2VyQ2FsZW5kYXJEYXRhKGRlbW9Vc2VySWQpKSB7XG4gICAgY29uc29sZS5sb2coXCLwn5OFIEluaWNpYWxpemFuZG8gZGF0b3MgZGUgY2FsZW5kYXJpbyBkZW1vLi4uXCIpXG4gICAgXG4gICAgY29uc3QgZGVtb0RhdGEgPSBjcmVhdGVVc2VyQ2FsZW5kYXJEYXRhKGRlbW9Vc2VySWQpXG4gICAgXG4gICAgLy8gRGVtbyBzY2hvb2wgc2NoZWR1bGVcbiAgICBkZW1vRGF0YS5zY2hvb2xTY2hlZHVsZSA9IHtcbiAgICAgIG1vbmRheTogW1xuICAgICAgICB7IHN0YXJ0OiAnMDg6MDAnLCBlbmQ6ICcwOTozMCcsIHN1YmplY3Q6ICdNYXRlbcOhdGljYXMnLCBsb2NhdGlvbjogJ0F1bGEgMjAxJywgY29sb3I6ICcjM0I4MkY2JyB9LFxuICAgICAgICB7IHN0YXJ0OiAnMDk6NDUnLCBlbmQ6ICcxMToxNScsIHN1YmplY3Q6ICdRdcOtbWljYScsIGxvY2F0aW9uOiAnTGFib3JhdG9yaW8gQScsIGNvbG9yOiAnI0VGNDQ0NCcgfSxcbiAgICAgICAgeyBzdGFydDogJzExOjMwJywgZW5kOiAnMTM6MDAnLCBzdWJqZWN0OiAnSGlzdG9yaWEnLCBsb2NhdGlvbjogJ0F1bGEgMTA1JywgY29sb3I6ICcjOEI1Q0Y2JyB9XG4gICAgICBdLFxuICAgICAgdHVlc2RheTogW1xuICAgICAgICB7IHN0YXJ0OiAnMDg6MDAnLCBlbmQ6ICcwOTozMCcsIHN1YmplY3Q6ICdGw61zaWNhJywgbG9jYXRpb246ICdMYWJvcmF0b3JpbyBCJywgY29sb3I6ICcjMTBCOTgxJyB9LFxuICAgICAgICB7IHN0YXJ0OiAnMDk6NDUnLCBlbmQ6ICcxMToxNScsIHN1YmplY3Q6ICdMaXRlcmF0dXJhJywgbG9jYXRpb246ICdBdWxhIDIwMycsIGNvbG9yOiAnI0Y1OUUwQicgfSxcbiAgICAgICAgeyBzdGFydDogJzExOjMwJywgZW5kOiAnMTM6MDAnLCBzdWJqZWN0OiAnQmlvbG9nw61hJywgbG9jYXRpb246ICdMYWJvcmF0b3JpbyBDJywgY29sb3I6ICcjRUM0ODk5JyB9XG4gICAgICBdLFxuICAgICAgd2VkbmVzZGF5OiBbXG4gICAgICAgIHsgc3RhcnQ6ICcwODowMCcsIGVuZDogJzA5OjMwJywgc3ViamVjdDogJ01hdGVtw6F0aWNhcycsIGxvY2F0aW9uOiAnQXVsYSAyMDEnLCBjb2xvcjogJyMzQjgyRjYnIH0sXG4gICAgICAgIHsgc3RhcnQ6ICcwOTo0NScsIGVuZDogJzExOjE1Jywgc3ViamVjdDogJ0VkdWNhY2nDs24gRsOtc2ljYScsIGxvY2F0aW9uOiAnR2ltbmFzaW8nLCBjb2xvcjogJyMwNkI2RDQnIH0sXG4gICAgICAgIHsgc3RhcnQ6ICcxMTozMCcsIGVuZDogJzEzOjAwJywgc3ViamVjdDogJ0FydGUnLCBsb2NhdGlvbjogJ1RhbGxlcicsIGNvbG9yOiAnI0Y5NzMxNicgfVxuICAgICAgXSxcbiAgICAgIHRodXJzZGF5OiBbXG4gICAgICAgIHsgc3RhcnQ6ICcwODowMCcsIGVuZDogJzA5OjMwJywgc3ViamVjdDogJ1F1w61taWNhJywgbG9jYXRpb246ICdMYWJvcmF0b3JpbyBBJywgY29sb3I6ICcjRUY0NDQ0JyB9LFxuICAgICAgICB7IHN0YXJ0OiAnMDk6NDUnLCBlbmQ6ICcxMToxNScsIHN1YmplY3Q6ICdGw61zaWNhJywgbG9jYXRpb246ICdMYWJvcmF0b3JpbyBCJywgY29sb3I6ICcjMTBCOTgxJyB9LFxuICAgICAgICB7IHN0YXJ0OiAnMTE6MzAnLCBlbmQ6ICcxMzowMCcsIHN1YmplY3Q6ICdIaXN0b3JpYScsIGxvY2F0aW9uOiAnQXVsYSAxMDUnLCBjb2xvcjogJyM4QjVDRjYnIH1cbiAgICAgIF0sXG4gICAgICBmcmlkYXk6IFtcbiAgICAgICAgeyBzdGFydDogJzA4OjAwJywgZW5kOiAnMDk6MzAnLCBzdWJqZWN0OiAnQmlvbG9nw61hJywgbG9jYXRpb246ICdMYWJvcmF0b3JpbyBDJywgY29sb3I6ICcjRUM0ODk5JyB9LFxuICAgICAgICB7IHN0YXJ0OiAnMDk6NDUnLCBlbmQ6ICcxMToxNScsIHN1YmplY3Q6ICdMaXRlcmF0dXJhJywgbG9jYXRpb246ICdBdWxhIDIwMycsIGNvbG9yOiAnI0Y1OUUwQicgfSxcbiAgICAgICAgeyBzdGFydDogJzExOjMwJywgZW5kOiAnMTM6MDAnLCBzdWJqZWN0OiAnTWF0ZW3DoXRpY2FzJywgbG9jYXRpb246ICdBdWxhIDIwMScsIGNvbG9yOiAnIzNCODJGNicgfVxuICAgICAgXVxuICAgIH1cbiAgICBcbiAgICAvLyBEZW1vIGV2ZW50c1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICBjb25zdCBkZW1vRXZlbnRzOiBDYWxlbmRhckV2ZW50W10gPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnZXhhbS0xJyxcbiAgICAgICAgdGl0bGU6ICdFeGFtZW4gUXXDrW1pY2EgT3Jnw6FuaWNhJyxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUobm93LmdldFRpbWUoKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgICAgc3RhcnRUaW1lOiAnMTA6MDAnLFxuICAgICAgICBlbmRUaW1lOiAnMTI6MDAnLFxuICAgICAgICB0eXBlOiAnZXhhbScsXG4gICAgICAgIGNvbG9yOiBnZXRFdmVudFR5cGVDb2xvcignZXhhbScpLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0V4YW1lbiBwYXJjaWFsIGRlIHF1w61taWNhIG9yZ8OhbmljYScsXG4gICAgICAgIHN1YmplY3Q6ICdRdcOtbWljYScsXG4gICAgICAgIGxvY2F0aW9uOiAnTGFib3JhdG9yaW8gQSdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnc3R1ZHktMScsXG4gICAgICAgIHRpdGxlOiAnU2VzacOzbiBkZSBFc3R1ZGlvIC0gTWF0ZW3DoXRpY2FzJyxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUobm93LmdldFRpbWUoKSArIDEgKiAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgICAgc3RhcnRUaW1lOiAnMTU6MDAnLFxuICAgICAgICBlbmRUaW1lOiAnMTY6MzAnLFxuICAgICAgICB0eXBlOiAnc3R1ZHlfc2Vzc2lvbicsXG4gICAgICAgIGNvbG9yOiBnZXRFdmVudFR5cGVDb2xvcignc3R1ZHlfc2Vzc2lvbicpLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1JlcGFzbyBkZSBjw6FsY3VsbyBpbnRlZ3JhbCcsXG4gICAgICAgIHN1YmplY3Q6ICdNYXRlbcOhdGljYXMnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ3BlcnNvbmFsLTEnLFxuICAgICAgICB0aXRsZTogJ0VudHJlbmFtaWVudG8gRsO6dGJvbCcsXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyAyICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgIHN0YXJ0VGltZTogJzE3OjAwJyxcbiAgICAgICAgZW5kVGltZTogJzE4OjMwJyxcbiAgICAgICAgdHlwZTogJ2V4dHJhY3VycmljdWxhcicsXG4gICAgICAgIGNvbG9yOiBnZXRFdmVudFR5cGVDb2xvcignZXh0cmFjdXJyaWN1bGFyJyksXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRW50cmVuYW1pZW50byBkZSBmw7p0Ym9sJyxcbiAgICAgICAgbG9jYXRpb246ICdDYW1wbyBkZXBvcnRpdm8nXG4gICAgICB9XG4gICAgXVxuICAgIFxuICAgIGRlbW9FdmVudHMuZm9yRWFjaChldmVudCA9PiB7XG4gICAgICBkZW1vRGF0YS5ldmVudHMucHVzaChldmVudClcbiAgICB9KVxuICAgIFxuICAgIGRlbW9EYXRhLmlzU2V0dXBDb21wbGV0ZSA9IHRydWVcbiAgICBkZW1vRGF0YS5sYXN0VXBkYXRlZCA9IG5ldyBEYXRlKClcbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIuKchSBEYXRvcyBkZSBjYWxlbmRhcmlvIGRlbW8gaW5pY2lhbGl6YWRvc1wiKVxuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKFwi4pyFIERhdG9zIGRlIGNhbGVuZGFyaW8gZGVtbyB5YSBleGlzdGVuXCIpXG4gIH1cbn1cblxuLy8gSW5pdGlhbGl6ZSBkZW1vIGRhdGEgb24gbW9kdWxlIGxvYWRcbmluaXREZW1vQ2FsZW5kYXJEYXRhKCkiXSwibmFtZXMiOlsiZ2xvYmFsRm9yQ2FsZW5kYXJEYXRhIiwiZ2xvYmFsVGhpcyIsInRlbXBDYWxlbmRhckRhdGEiLCJnZXRVc2VyQ2FsZW5kYXJEYXRhIiwidXNlcklkIiwiZmluZCIsImRhdGEiLCJjcmVhdGVVc2VyQ2FsZW5kYXJEYXRhIiwibmV3RGF0YSIsInNjaG9vbFNjaGVkdWxlIiwibW9uZGF5IiwidHVlc2RheSIsIndlZG5lc2RheSIsInRodXJzZGF5IiwiZnJpZGF5Iiwic3R1ZHlQcmVmZXJlbmNlcyIsInByZWZlcnJlZFN0dWR5VGltZSIsImRhaWx5U3R1ZHlIb3VycyIsIm1heFNlc3Npb25EdXJhdGlvbiIsImJyZWFrQmV0d2VlblNlc3Npb25zIiwid2Vla2VuZFN0dWR5SG91cnMiLCJub1N0dWR5RGF5cyIsImV2ZW50cyIsImlzU2V0dXBDb21wbGV0ZSIsImxhc3RVcGRhdGVkIiwiRGF0ZSIsInB1c2giLCJ1cGRhdGVVc2VyQ2FsZW5kYXJEYXRhIiwidXBkYXRlcyIsImluZGV4IiwiZmluZEluZGV4IiwiYWRkQ2FsZW5kYXJFdmVudCIsImV2ZW50IiwidXNlckRhdGEiLCJjb25zb2xlIiwibG9nIiwidGl0bGUiLCJsZW5ndGgiLCJ1cGRhdGVDYWxlbmRhckV2ZW50IiwiZXZlbnRJZCIsImV2ZW50SW5kZXgiLCJlIiwiaWQiLCJkZWxldGVDYWxlbmRhckV2ZW50IiwiZGVsZXRlZEV2ZW50Iiwic3BsaWNlIiwiZ2V0RXZlbnRzRm9yRGF0ZSIsImRhdGUiLCJ0YXJnZXREYXRlIiwic2V0SG91cnMiLCJmaWx0ZXIiLCJldmVudERhdGUiLCJnZXRUaW1lIiwiZ2V0RXZlbnRzRm9yRGF0ZVJhbmdlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImlzVGltZVNsb3RBdmFpbGFibGUiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwiZGF5TmFtZSIsImdldERheU5hbWUiLCJnZXREYXkiLCJzY2hvb2xTbG90cyIsInNsb3QiLCJ0aW1lT3ZlcmxhcHMiLCJzdGFydCIsImVuZCIsImRheUV2ZW50cyIsImZpbmRBdmFpbGFibGVUaW1lU2xvdHMiLCJkdXJhdGlvbiIsInByZWZlcnJlZFRpbWUiLCJzbG90cyIsInRpbWVSYW5nZXMiLCJtb3JuaW5nIiwiYWZ0ZXJub29uIiwiZXZlbmluZyIsInNlYXJjaFJhbmdlIiwic2VhcmNoU3RhcnQiLCJzZWFyY2hFbmQiLCJzdGFydE1pbnV0ZXMiLCJ0aW1lVG9NaW51dGVzIiwiZW5kTWludXRlcyIsIm1pbnV0ZXMiLCJzbG90U3RhcnQiLCJtaW51dGVzVG9UaW1lIiwic2xvdEVuZCIsImdldEV2ZW50VHlwZUNvbG9yIiwidHlwZSIsImNvbG9ycyIsImV4YW0iLCJzdHVkeV9zZXNzaW9uIiwiY2xhc3MiLCJwZXJzb25hbCIsImV4dHJhY3VycmljdWxhciIsImdldEV2ZW50VHlwZUljb24iLCJpY29ucyIsImRheUluZGV4IiwiZGF5cyIsInRpbWUiLCJob3VycyIsInNwbGl0IiwibWFwIiwiTnVtYmVyIiwiTWF0aCIsImZsb29yIiwibWlucyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJzdGFydDEiLCJlbmQxIiwic3RhcnQyIiwiZW5kMiIsInN0YXJ0MU1pbnV0ZXMiLCJlbmQxTWludXRlcyIsInN0YXJ0Mk1pbnV0ZXMiLCJlbmQyTWludXRlcyIsImluaXREZW1vQ2FsZW5kYXJEYXRhIiwiZGVtb1VzZXJJZCIsImRlbW9EYXRhIiwic3ViamVjdCIsImxvY2F0aW9uIiwiY29sb3IiLCJub3ciLCJkZW1vRXZlbnRzIiwiZGVzY3JpcHRpb24iLCJmb3JFYWNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/calendar-data.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/hybrid-storage.ts":
/*!***********************************!*\
  !*** ./src/lib/hybrid-storage.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canSubmitThisWeek: () => (/* binding */ canSubmitThisWeek),\n/* harmony export */   createProgressReport: () => (/* binding */ createProgressReport),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   findProgressReportByUserAndWeek: () => (/* binding */ findProgressReportByUserAndWeek),\n/* harmony export */   findProgressReportsByUser: () => (/* binding */ findProgressReportsByUser),\n/* harmony export */   findUserByEmail: () => (/* binding */ findUserByEmail),\n/* harmony export */   findUserById: () => (/* binding */ findUserById),\n/* harmony export */   findUsersByRole: () => (/* binding */ findUsersByRole),\n/* harmony export */   generateStudentId: () => (/* binding */ generateStudentId),\n/* harmony export */   getAllProgressReports: () => (/* binding */ getAllProgressReports),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getCurrentWeekEnd: () => (/* binding */ getCurrentWeekEnd),\n/* harmony export */   getCurrentWeekStart: () => (/* binding */ getCurrentWeekStart),\n/* harmony export */   getMonthWeeks: () => (/* binding */ getMonthWeeks),\n/* harmony export */   initializeStorage: () => (/* binding */ initializeStorage),\n/* harmony export */   validateStudentId: () => (/* binding */ validateStudentId)\n/* harmony export */ });\n/* harmony import */ var _temp_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./temp-storage */ \"(rsc)/./src/lib/temp-storage.ts\");\n// Hybrid storage system that can work with database or fallback to temp-storage\n\n// For now, use temp-storage exclusively to ensure stability\nconst useDatabase = false;\nconsole.log('🔄 Using temp-storage system for reliability');\n// Initialize the storage system\nasync function initializeStorage() {\n    console.log('✅ Temp-storage system initialized');\n}\n// User management functions with fallback\nasync function createUser(userData) {\n    const hashedPassword = (__webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/umd/index.js\").hashSync)(userData.password, 12);\n    const user = {\n        id: Date.now().toString(),\n        ...userData,\n        password: hashedPassword,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        status: 'ACTIVE'\n    };\n    _temp_storage__WEBPACK_IMPORTED_MODULE_0__.addUser(user);\n    return user;\n}\nasync function findUserByEmail(email) {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.findUserByEmail(email);\n}\nasync function getAllUsers() {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.getAllUsers();\n}\nasync function findUsersByRole(role) {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.findUsersByRole(role);\n}\nasync function findUserById(id) {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.findUserById(id);\n}\nasync function generateStudentId() {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.generateStudentId();\n}\n// Progress reports functions with fallback\nasync function createProgressReport(data) {\n    const report = {\n        id: Date.now().toString(),\n        userId: data.userId,\n        weekStart: data.weekStart,\n        weekEnd: data.weekEnd,\n        submittedAt: new Date(),\n        responses: data.responses\n    };\n    _temp_storage__WEBPACK_IMPORTED_MODULE_0__.addWeeklyReport(report);\n    return report;\n}\nasync function findProgressReportsByUser(userId) {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.findWeeklyReportsByUser(userId);\n}\nasync function getAllProgressReports() {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.getAllWeeklyReports();\n}\nasync function findProgressReportByUserAndWeek(userId, weekStart) {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.findWeeklyReportByUserAndWeek(userId, weekStart);\n}\nasync function canSubmitThisWeek(userId) {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.canSubmitThisWeek(userId);\n}\n// Utility functions (same for both)\nfunction getCurrentWeekStart() {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.getCurrentWeekStart();\n}\nfunction getCurrentWeekEnd() {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.getCurrentWeekEnd();\n}\nfunction getMonthWeeks(year, month) {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.getMonthWeeks(year, month);\n}\nfunction validateStudentId(studentId) {\n    return _temp_storage__WEBPACK_IMPORTED_MODULE_0__.validateStudentId(studentId);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2h5YnJpZC1zdG9yYWdlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsZ0ZBQWdGO0FBQ25DO0FBRTdDLDREQUE0RDtBQUM1RCxNQUFNQyxjQUFjO0FBRXBCQyxRQUFRQyxHQUFHLENBQUM7QUFFWixnQ0FBZ0M7QUFDekIsZUFBZUM7SUFDcEJGLFFBQVFDLEdBQUcsQ0FBQztBQUNkO0FBRUEsMENBQTBDO0FBQ25DLGVBQWVFLFdBQVdDLFFBQWE7SUFDNUMsTUFBTUMsaUJBQWlCQyw0RkFBNEIsQ0FBQ0YsU0FBU0ksUUFBUSxFQUFFO0lBQ3ZFLE1BQU1DLE9BQU87UUFDWEMsSUFBSUMsS0FBS0MsR0FBRyxHQUFHQyxRQUFRO1FBQ3ZCLEdBQUdULFFBQVE7UUFDWEksVUFBVUg7UUFDVlMsV0FBVyxJQUFJSDtRQUNmSSxXQUFXLElBQUlKO1FBQ2ZLLFFBQVE7SUFDVjtJQUNBbEIsa0RBQW1CLENBQUNXO0lBQ3BCLE9BQU9BO0FBQ1Q7QUFFTyxlQUFlUyxnQkFBZ0JDLEtBQWE7SUFDakQsT0FBT3JCLDBEQUEyQixDQUFDcUI7QUFDckM7QUFFTyxlQUFlQztJQUNwQixPQUFPdEIsc0RBQXVCO0FBQ2hDO0FBRU8sZUFBZXVCLGdCQUFnQkMsSUFBUztJQUM3QyxPQUFPeEIsMERBQTJCLENBQUN3QjtBQUNyQztBQUVPLGVBQWVDLGFBQWFiLEVBQVU7SUFDM0MsT0FBT1osdURBQXdCLENBQUNZO0FBQ2xDO0FBRU8sZUFBZWM7SUFDcEIsT0FBTzFCLDREQUE2QjtBQUN0QztBQUVBLDJDQUEyQztBQUNwQyxlQUFlMkIscUJBQXFCQyxJQUFTO0lBQ2xELE1BQU1DLFNBQVM7UUFDYmpCLElBQUlDLEtBQUtDLEdBQUcsR0FBR0MsUUFBUTtRQUN2QmUsUUFBUUYsS0FBS0UsTUFBTTtRQUNuQkMsV0FBV0gsS0FBS0csU0FBUztRQUN6QkMsU0FBU0osS0FBS0ksT0FBTztRQUNyQkMsYUFBYSxJQUFJcEI7UUFDakJxQixXQUFXTixLQUFLTSxTQUFTO0lBQzNCO0lBQ0FsQywwREFBMkIsQ0FBQzZCO0lBQzVCLE9BQU9BO0FBQ1Q7QUFFTyxlQUFlTywwQkFBMEJOLE1BQWM7SUFDNUQsT0FBTzlCLGtFQUFtQyxDQUFDOEI7QUFDN0M7QUFFTyxlQUFlUTtJQUNwQixPQUFPdEMsOERBQStCO0FBQ3hDO0FBRU8sZUFBZXdDLGdDQUFnQ1YsTUFBYyxFQUFFQyxTQUFlO0lBQ25GLE9BQU8vQix3RUFBeUMsQ0FBQzhCLFFBQVFDO0FBQzNEO0FBRU8sZUFBZVcsa0JBQWtCWixNQUFjO0lBQ3BELE9BQU85Qiw0REFBNkIsQ0FBQzhCO0FBQ3ZDO0FBRUEsb0NBQW9DO0FBQzdCLFNBQVNhO0lBQ2QsT0FBTzNDLDhEQUErQjtBQUN4QztBQUVPLFNBQVM0QztJQUNkLE9BQU81Qyw0REFBNkI7QUFDdEM7QUFFTyxTQUFTNkMsY0FBY0MsSUFBWSxFQUFFQyxLQUFhO0lBQ3ZELE9BQU8vQyx3REFBeUIsQ0FBQzhDLE1BQU1DO0FBQ3pDO0FBRU8sU0FBU0Msa0JBQWtCQyxTQUFpQjtJQUNqRCxPQUFPakQsNERBQTZCLENBQUNpRDtBQUN2QyIsInNvdXJjZXMiOlsiL1VzZXJzL3JvZHJpZ29kaWJlcm5hcmRvMzNnbWFpbC5jb20vRG9jdW1lbnRzL0FwcCBEZXZlbG9wbWVudCBQcm95ZWN0cy9JbnRlbGxlZ28gUGxhdGZvcm0vc3JjL2xpYi9oeWJyaWQtc3RvcmFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBIeWJyaWQgc3RvcmFnZSBzeXN0ZW0gdGhhdCBjYW4gd29yayB3aXRoIGRhdGFiYXNlIG9yIGZhbGxiYWNrIHRvIHRlbXAtc3RvcmFnZVxuaW1wb3J0ICogYXMgdGVtcFN0b3JhZ2UgZnJvbSAnLi90ZW1wLXN0b3JhZ2UnXG5cbi8vIEZvciBub3csIHVzZSB0ZW1wLXN0b3JhZ2UgZXhjbHVzaXZlbHkgdG8gZW5zdXJlIHN0YWJpbGl0eVxuY29uc3QgdXNlRGF0YWJhc2UgPSBmYWxzZVxuXG5jb25zb2xlLmxvZygn8J+UhCBVc2luZyB0ZW1wLXN0b3JhZ2Ugc3lzdGVtIGZvciByZWxpYWJpbGl0eScpXG5cbi8vIEluaXRpYWxpemUgdGhlIHN0b3JhZ2Ugc3lzdGVtXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVN0b3JhZ2UoKSB7XG4gIGNvbnNvbGUubG9nKCfinIUgVGVtcC1zdG9yYWdlIHN5c3RlbSBpbml0aWFsaXplZCcpXG59XG5cbi8vIFVzZXIgbWFuYWdlbWVudCBmdW5jdGlvbnMgd2l0aCBmYWxsYmFja1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXIodXNlckRhdGE6IGFueSkge1xuICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IHJlcXVpcmUoJ2JjcnlwdGpzJykuaGFzaFN5bmModXNlckRhdGEucGFzc3dvcmQsIDEyKVxuICBjb25zdCB1c2VyID0ge1xuICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgLi4udXNlckRhdGEsXG4gICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgc3RhdHVzOiAnQUNUSVZFJyBhcyBjb25zdCxcbiAgfVxuICB0ZW1wU3RvcmFnZS5hZGRVc2VyKHVzZXIpXG4gIHJldHVybiB1c2VyXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kVXNlckJ5RW1haWwoZW1haWw6IHN0cmluZykge1xuICByZXR1cm4gdGVtcFN0b3JhZ2UuZmluZFVzZXJCeUVtYWlsKGVtYWlsKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsVXNlcnMoKSB7XG4gIHJldHVybiB0ZW1wU3RvcmFnZS5nZXRBbGxVc2VycygpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kVXNlcnNCeVJvbGUocm9sZTogYW55KSB7XG4gIHJldHVybiB0ZW1wU3RvcmFnZS5maW5kVXNlcnNCeVJvbGUocm9sZSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRVc2VyQnlJZChpZDogc3RyaW5nKSB7XG4gIHJldHVybiB0ZW1wU3RvcmFnZS5maW5kVXNlckJ5SWQoaWQpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVN0dWRlbnRJZCgpIHtcbiAgcmV0dXJuIHRlbXBTdG9yYWdlLmdlbmVyYXRlU3R1ZGVudElkKClcbn1cblxuLy8gUHJvZ3Jlc3MgcmVwb3J0cyBmdW5jdGlvbnMgd2l0aCBmYWxsYmFja1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVByb2dyZXNzUmVwb3J0KGRhdGE6IGFueSkge1xuICBjb25zdCByZXBvcnQgPSB7XG4gICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxuICAgIHdlZWtTdGFydDogZGF0YS53ZWVrU3RhcnQsXG4gICAgd2Vla0VuZDogZGF0YS53ZWVrRW5kLFxuICAgIHN1Ym1pdHRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHJlc3BvbnNlczogZGF0YS5yZXNwb25zZXNcbiAgfVxuICB0ZW1wU3RvcmFnZS5hZGRXZWVrbHlSZXBvcnQocmVwb3J0KVxuICByZXR1cm4gcmVwb3J0XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kUHJvZ3Jlc3NSZXBvcnRzQnlVc2VyKHVzZXJJZDogc3RyaW5nKSB7XG4gIHJldHVybiB0ZW1wU3RvcmFnZS5maW5kV2Vla2x5UmVwb3J0c0J5VXNlcih1c2VySWQpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxQcm9ncmVzc1JlcG9ydHMoKSB7XG4gIHJldHVybiB0ZW1wU3RvcmFnZS5nZXRBbGxXZWVrbHlSZXBvcnRzKClcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRQcm9ncmVzc1JlcG9ydEJ5VXNlckFuZFdlZWsodXNlcklkOiBzdHJpbmcsIHdlZWtTdGFydDogRGF0ZSkge1xuICByZXR1cm4gdGVtcFN0b3JhZ2UuZmluZFdlZWtseVJlcG9ydEJ5VXNlckFuZFdlZWsodXNlcklkLCB3ZWVrU3RhcnQpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYW5TdWJtaXRUaGlzV2Vlayh1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gdGVtcFN0b3JhZ2UuY2FuU3VibWl0VGhpc1dlZWsodXNlcklkKVxufVxuXG4vLyBVdGlsaXR5IGZ1bmN0aW9ucyAoc2FtZSBmb3IgYm90aClcbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50V2Vla1N0YXJ0KCkge1xuICByZXR1cm4gdGVtcFN0b3JhZ2UuZ2V0Q3VycmVudFdlZWtTdGFydCgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50V2Vla0VuZCgpIHtcbiAgcmV0dXJuIHRlbXBTdG9yYWdlLmdldEN1cnJlbnRXZWVrRW5kKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vbnRoV2Vla3MoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyKSB7XG4gIHJldHVybiB0ZW1wU3RvcmFnZS5nZXRNb250aFdlZWtzKHllYXIsIG1vbnRoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTdHVkZW50SWQoc3R1ZGVudElkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHRlbXBTdG9yYWdlLnZhbGlkYXRlU3R1ZGVudElkKHN0dWRlbnRJZClcbn0iXSwibmFtZXMiOlsidGVtcFN0b3JhZ2UiLCJ1c2VEYXRhYmFzZSIsImNvbnNvbGUiLCJsb2ciLCJpbml0aWFsaXplU3RvcmFnZSIsImNyZWF0ZVVzZXIiLCJ1c2VyRGF0YSIsImhhc2hlZFBhc3N3b3JkIiwicmVxdWlyZSIsImhhc2hTeW5jIiwicGFzc3dvcmQiLCJ1c2VyIiwiaWQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJzdGF0dXMiLCJhZGRVc2VyIiwiZmluZFVzZXJCeUVtYWlsIiwiZW1haWwiLCJnZXRBbGxVc2VycyIsImZpbmRVc2Vyc0J5Um9sZSIsInJvbGUiLCJmaW5kVXNlckJ5SWQiLCJnZW5lcmF0ZVN0dWRlbnRJZCIsImNyZWF0ZVByb2dyZXNzUmVwb3J0IiwiZGF0YSIsInJlcG9ydCIsInVzZXJJZCIsIndlZWtTdGFydCIsIndlZWtFbmQiLCJzdWJtaXR0ZWRBdCIsInJlc3BvbnNlcyIsImFkZFdlZWtseVJlcG9ydCIsImZpbmRQcm9ncmVzc1JlcG9ydHNCeVVzZXIiLCJmaW5kV2Vla2x5UmVwb3J0c0J5VXNlciIsImdldEFsbFByb2dyZXNzUmVwb3J0cyIsImdldEFsbFdlZWtseVJlcG9ydHMiLCJmaW5kUHJvZ3Jlc3NSZXBvcnRCeVVzZXJBbmRXZWVrIiwiZmluZFdlZWtseVJlcG9ydEJ5VXNlckFuZFdlZWsiLCJjYW5TdWJtaXRUaGlzV2VlayIsImdldEN1cnJlbnRXZWVrU3RhcnQiLCJnZXRDdXJyZW50V2Vla0VuZCIsImdldE1vbnRoV2Vla3MiLCJ5ZWFyIiwibW9udGgiLCJ2YWxpZGF0ZVN0dWRlbnRJZCIsInN0dWRlbnRJZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/hybrid-storage.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/temp-storage.ts":
/*!*********************************!*\
  !*** ./src/lib/temp-storage.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addConversationTurn: () => (/* binding */ addConversationTurn),\n/* harmony export */   addPendingTask: () => (/* binding */ addPendingTask),\n/* harmony export */   addUser: () => (/* binding */ addUser),\n/* harmony export */   addWeeklyReport: () => (/* binding */ addWeeklyReport),\n/* harmony export */   canSubmitThisWeek: () => (/* binding */ canSubmitThisWeek),\n/* harmony export */   cleanupOldConversations: () => (/* binding */ cleanupOldConversations),\n/* harmony export */   createConversationSession: () => (/* binding */ createConversationSession),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   findEventById: () => (/* binding */ findEventById),\n/* harmony export */   findUserByEmail: () => (/* binding */ findUserByEmail),\n/* harmony export */   findUserById: () => (/* binding */ findUserById),\n/* harmony export */   findUserByStudentId: () => (/* binding */ findUserByStudentId),\n/* harmony export */   findUsersByProgram: () => (/* binding */ findUsersByProgram),\n/* harmony export */   findUsersByRole: () => (/* binding */ findUsersByRole),\n/* harmony export */   findUsersByStatus: () => (/* binding */ findUsersByStatus),\n/* harmony export */   findWeeklyReportByUserAndWeek: () => (/* binding */ findWeeklyReportByUserAndWeek),\n/* harmony export */   findWeeklyReportsByUser: () => (/* binding */ findWeeklyReportsByUser),\n/* harmony export */   generateStudentId: () => (/* binding */ generateStudentId),\n/* harmony export */   getAllCalendarEvents: () => (/* binding */ getAllCalendarEvents),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getAllWeeklyReports: () => (/* binding */ getAllWeeklyReports),\n/* harmony export */   getConversationHistory: () => (/* binding */ getConversationHistory),\n/* harmony export */   getConversationSession: () => (/* binding */ getConversationSession),\n/* harmony export */   getCurrentWeekEnd: () => (/* binding */ getCurrentWeekEnd),\n/* harmony export */   getCurrentWeekStart: () => (/* binding */ getCurrentWeekStart),\n/* harmony export */   getEvents: () => (/* binding */ getEvents),\n/* harmony export */   getEventsForDateRange: () => (/* binding */ getEventsForDateRange),\n/* harmony export */   getMonthWeeks: () => (/* binding */ getMonthWeeks),\n/* harmony export */   getPendingTasks: () => (/* binding */ getPendingTasks),\n/* harmony export */   getUpcomingEvents: () => (/* binding */ getUpcomingEvents),\n/* harmony export */   getUserActiveSessions: () => (/* binding */ getUserActiveSessions),\n/* harmony export */   getWeekDates: () => (/* binding */ getWeekDates),\n/* harmony export */   getWeeklyReportsByDateRange: () => (/* binding */ getWeeklyReportsByDateRange),\n/* harmony export */   markTaskCompleted: () => (/* binding */ markTaskCompleted),\n/* harmony export */   tempConversations: () => (/* binding */ tempConversations),\n/* harmony export */   tempUsers: () => (/* binding */ tempUsers),\n/* harmony export */   tempWeeklyReports: () => (/* binding */ tempWeeklyReports),\n/* harmony export */   updateConversationSession: () => (/* binding */ updateConversationSession),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   validateStudentId: () => (/* binding */ validateStudentId)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n// Temporary user storage - replace with database later\n// Singleton pattern to persist data across requests\nconst globalForStorage = globalThis;\nconst tempUsers = globalForStorage.tempUsers ?? [];\nconst tempWeeklyReports = globalForStorage.tempWeeklyReports ?? [];\n// Assign to globalThis to persist across requests\nglobalForStorage.tempUsers = tempUsers;\nglobalForStorage.tempWeeklyReports = tempWeeklyReports;\nfunction addUser(user) {\n    tempUsers.push(user);\n}\nfunction findUserByEmail(email) {\n    return tempUsers.find((user)=>user.email === email);\n}\nfunction findUserByStudentId(studentId) {\n    return tempUsers.find((user)=>user.studentId === studentId);\n}\nfunction findUserById(id) {\n    return tempUsers.find((user)=>user.id === id);\n}\nfunction getAllUsers() {\n    return tempUsers;\n}\nfunction findUsersByRole(role) {\n    return tempUsers.filter((user)=>user.role === role);\n}\nfunction findUsersByProgram(program) {\n    return tempUsers.filter((user)=>user.program === program);\n}\nfunction findUsersByStatus(status) {\n    return tempUsers.filter((user)=>user.status === status);\n}\nfunction updateUser(id, updates) {\n    const userIndex = tempUsers.findIndex((user)=>user.id === id);\n    if (userIndex !== -1) {\n        tempUsers[userIndex] = {\n            ...tempUsers[userIndex],\n            ...updates,\n            updatedAt: new Date()\n        };\n        return tempUsers[userIndex];\n    }\n    return null;\n}\nfunction deleteUser(id) {\n    const userIndex = tempUsers.findIndex((user)=>user.id === id);\n    if (userIndex !== -1) {\n        return tempUsers.splice(userIndex, 1)[0];\n    }\n    return null;\n}\nfunction validateStudentId(studentId) {\n    // Formato sugerido: EST-YYYY-XXX (ej: EST-2024-001)\n    const studentIdRegex = /^EST-\\d{4}-\\d{3}$/;\n    return studentIdRegex.test(studentId);\n}\nfunction generateStudentId() {\n    const currentYear = new Date().getFullYear();\n    const existingIds = tempUsers.filter((user)=>user.studentId && user.studentId.startsWith(`EST-${currentYear}`)).map((user)=>user.studentId).sort();\n    let nextNumber = 1;\n    if (existingIds.length > 0) {\n        const lastId = existingIds[existingIds.length - 1];\n        const lastNumber = parseInt(lastId.split('-')[2]);\n        nextNumber = lastNumber + 1;\n    }\n    return `EST-${currentYear}-${nextNumber.toString().padStart(3, '0')}`;\n}\n// Weekly Reports Functions\nfunction addWeeklyReport(report) {\n    tempWeeklyReports.push(report);\n}\nfunction findWeeklyReportsByUser(userId) {\n    return tempWeeklyReports.filter((report)=>report.userId === userId);\n}\nfunction findWeeklyReportByUserAndWeek(userId, weekStart) {\n    return tempWeeklyReports.find((report)=>report.userId === userId && report.weekStart.getTime() === weekStart.getTime());\n}\nfunction getAllWeeklyReports() {\n    return tempWeeklyReports;\n}\nfunction getWeeklyReportsByDateRange(startDate, endDate) {\n    return tempWeeklyReports.filter((report)=>report.weekStart >= startDate && report.weekEnd <= endDate);\n}\n// Date utility functions\nfunction getCurrentWeekStart() {\n    const now = new Date();\n    const monday = new Date(now);\n    const day = now.getDay();\n    const diff = now.getDate() - day + (day === 0 ? -6 : 1 // Adjust for Sunday\n    );\n    monday.setDate(diff);\n    monday.setHours(0, 0, 0, 0);\n    return monday;\n}\nfunction getCurrentWeekEnd() {\n    const weekStart = getCurrentWeekStart();\n    const weekEnd = new Date(weekStart);\n    weekEnd.setDate(weekStart.getDate() + 6);\n    weekEnd.setHours(23, 59, 59, 999);\n    return weekEnd;\n}\nfunction canSubmitThisWeek(userId) {\n    const weekStart = getCurrentWeekStart();\n    const weekEnd = getCurrentWeekEnd();\n    const currentDate = new Date();\n    const existingReport = findWeeklyReportByUserAndWeek(userId, weekStart);\n    // Can submit if:\n    // 1. We are currently in this week (currentDate is between weekStart and weekEnd)\n    // 2. No report exists for this week\n    const isCurrentWeek = currentDate >= weekStart && currentDate <= weekEnd;\n    console.log(`🔍 Debug canSubmitThisWeek for user ${userId}:`);\n    console.log(`  Current date: ${currentDate.toISOString()}`);\n    console.log(`  Week start: ${weekStart.toISOString()}`);\n    console.log(`  Week end: ${weekEnd.toISOString()}`);\n    console.log(`  Is current week: ${isCurrentWeek}`);\n    console.log(`  Existing report: ${existingReport ? 'YES' : 'NO'}`);\n    console.log(`  Can submit: ${isCurrentWeek && !existingReport}`);\n    return isCurrentWeek && !existingReport;\n}\nfunction getWeekDates(date) {\n    const start = new Date(date);\n    const day = start.getDay();\n    const diff = start.getDate() - day + (day === 0 ? -6 : 1);\n    start.setDate(diff);\n    start.setHours(0, 0, 0, 0);\n    const end = new Date(start);\n    end.setDate(start.getDate() + 6);\n    end.setHours(23, 59, 59, 999);\n    return {\n        start,\n        end\n    };\n}\nfunction getMonthWeeks(year, month) {\n    const weeks = [];\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    let current = new Date(firstDay);\n    // Adjust to start from Monday of first week\n    const dayOfWeek = current.getDay();\n    const daysToSubtract = dayOfWeek === 0 ? 6 : dayOfWeek - 1;\n    current.setDate(current.getDate() - daysToSubtract);\n    while(current <= lastDay){\n        const weekStart = new Date(current);\n        const weekEnd = new Date(current);\n        weekEnd.setDate(weekStart.getDate() + 6);\n        weeks.push({\n            start: weekStart,\n            end: weekEnd\n        });\n        current.setDate(current.getDate() + 7);\n    }\n    return weeks;\n}\n// ===== CALENDAR FUNCTIONS =====\n// These functions integrate with the calendar system for Sara AI\nfunction getEvents(userId) {\n    // Import calendar data functions\n    try {\n        const { getUserCalendarData } = __webpack_require__(/*! ./calendar-data */ \"(rsc)/./src/lib/calendar-data.ts\");\n        const userData = getUserCalendarData(userId);\n        return userData?.events || [];\n    } catch (error) {\n        console.error('Error getting calendar events:', error);\n        return [];\n    }\n}\nfunction getAllCalendarEvents(userId) {\n    // Alias for getEvents for compatibility\n    return getEvents(userId);\n}\nfunction getUpcomingEvents(userId, days = 30) {\n    try {\n        const allEvents = getEvents(userId);\n        const now = new Date();\n        const futureDate = new Date();\n        futureDate.setDate(futureDate.getDate() + days);\n        return allEvents.filter((event)=>{\n            const eventDate = new Date(event.date);\n            return eventDate >= now && eventDate <= futureDate;\n        }).sort((a, b)=>new Date(a.date).getTime() - new Date(b.date).getTime());\n    } catch (error) {\n        console.error('Error getting upcoming events:', error);\n        return [];\n    }\n}\nfunction getEventsForDateRange(userId, startDate, endDate) {\n    try {\n        const allEvents = getEvents(userId);\n        return allEvents.filter((event)=>{\n            const eventDate = new Date(event.date);\n            return eventDate >= startDate && eventDate <= endDate;\n        });\n    } catch (error) {\n        console.error('Error getting events for date range:', error);\n        return [];\n    }\n}\nfunction findEventById(userId, eventId) {\n    try {\n        const allEvents = getEvents(userId);\n        return allEvents.find((event)=>event.id === eventId) || null;\n    } catch (error) {\n        console.error('Error finding event by ID:', error);\n        return null;\n    }\n}\n// Global storage for conversations\nconst globalForConversations = globalThis;\nconst tempConversations = globalForConversations.tempConversations ?? [];\nglobalForConversations.tempConversations = tempConversations;\nfunction getConversationSession(userId, sessionId) {\n    return tempConversations.find((session)=>session.userId === userId && session.sessionId === sessionId) || null;\n}\nfunction createConversationSession(userId, sessionId) {\n    // First remove any old session for the same user/sessionId\n    const existingIndex = tempConversations.findIndex((session)=>session.userId === userId && session.sessionId === sessionId);\n    if (existingIndex !== -1) {\n        tempConversations.splice(existingIndex, 1);\n    }\n    const newSession = {\n        userId,\n        sessionId,\n        turns: [],\n        currentTopic: undefined,\n        currentSubject: undefined,\n        pendingTasks: [],\n        lastUpdate: new Date()\n    };\n    tempConversations.push(newSession);\n    console.log(`💬 Created conversation session ${sessionId} for user ${userId}`);\n    return newSession;\n}\nfunction updateConversationSession(session) {\n    const index = tempConversations.findIndex((s)=>s.userId === session.userId && s.sessionId === session.sessionId);\n    if (index !== -1) {\n        tempConversations[index] = {\n            ...session,\n            lastUpdate: new Date()\n        };\n        console.log(`💬 Updated session ${session.sessionId} - ${session.turns.length} turns`);\n    } else {\n        tempConversations.push({\n            ...session,\n            lastUpdate: new Date()\n        });\n        console.log(`💬 Created new session ${session.sessionId} during update`);\n    }\n    return session;\n}\nfunction addConversationTurn(userId, sessionId, role, content, metadata = {}) {\n    let session = getConversationSession(userId, sessionId);\n    if (!session) {\n        session = createConversationSession(userId, sessionId);\n    }\n    const turn = {\n        id: `turn_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        timestamp: new Date(),\n        role,\n        content,\n        metadata\n    };\n    session.turns.push(turn);\n    // Keep only last 20 turns per session\n    if (session.turns.length > 20) {\n        session.turns = session.turns.slice(-20);\n    }\n    return updateConversationSession(session);\n}\nfunction addPendingTask(userId, sessionId, type, description, data) {\n    let session = getConversationSession(userId, sessionId);\n    if (!session) {\n        session = createConversationSession(userId, sessionId);\n    }\n    const task = {\n        id: `task_${Date.now()}`,\n        type,\n        description,\n        data,\n        completed: false,\n        createdAt: new Date()\n    };\n    session.pendingTasks.push(task);\n    console.log(`📋 Added pending task: ${description}`);\n    updateConversationSession(session);\n}\nfunction markTaskCompleted(userId, sessionId, taskId, result) {\n    const session = getConversationSession(userId, sessionId);\n    if (!session) return false;\n    const task = session.pendingTasks.find((t)=>t.id === taskId);\n    if (!task) return false;\n    task.completed = true;\n    if (result) {\n        task.data.result = result;\n    }\n    console.log(`✅ Completed task: ${task.description}`);\n    updateConversationSession(session);\n    return true;\n}\nfunction getPendingTasks(userId, sessionId) {\n    const session = getConversationSession(userId, sessionId);\n    if (!session) return [];\n    return session.pendingTasks.filter((task)=>!task.completed);\n}\nfunction getConversationHistory(userId, sessionId, limit = 10) {\n    const session = getConversationSession(userId, sessionId);\n    if (!session) return [];\n    return session.turns.slice(-limit);\n}\nfunction getUserActiveSessions(userId) {\n    const oneHourAgo = new Date(Date.now() - 60 * 60 * 1000);\n    return tempConversations.filter((session)=>session.userId === userId && session.lastUpdate > oneHourAgo);\n}\nfunction cleanupOldConversations() {\n    const sixHoursAgo = new Date(Date.now() - 6 * 60 * 60 * 1000);\n    const before = tempConversations.length;\n    // Remove conversations older than 6 hours\n    for(let i = tempConversations.length - 1; i >= 0; i--){\n        if (tempConversations[i].lastUpdate < sixHoursAgo) {\n            tempConversations.splice(i, 1);\n        }\n    }\n    const after = tempConversations.length;\n    if (before !== after) {\n        console.log(`🧹 Cleaned up ${before - after} old conversation sessions`);\n    }\n}\n// Initialize default users automatically\n\nfunction initDefaultUsers() {\n    // Check if demo users already exist to avoid duplicates\n    const studentExists = findUserByEmail(\"estudiante@demo.com\");\n    const instructorExists = findUserByEmail(\"instructor@demo.com\");\n    if (!studentExists || !instructorExists) {\n        console.log(\"🔧 Inicializando usuarios por defecto...\");\n        try {\n            const hashedPassword = bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hashSync(\"Estudiante123!!!\", 12);\n            // Only add student if doesn't exist\n            if (!studentExists) {\n                addUser({\n                    id: \"demo-student-fixed\",\n                    name: \"Estudiante Demo\",\n                    email: \"estudiante@demo.com\",\n                    password: hashedPassword,\n                    role: \"STUDENT\",\n                    studentId: \"EST-2025-001\",\n                    status: \"ACTIVE\",\n                    enrollmentYear: 2025,\n                    academicYear: \"2025-2026\",\n                    program: \"Ingeniería en Sistemas\",\n                    phoneNumber: \"+1234567890\",\n                    dateOfBirth: new Date(\"2000-01-01\"),\n                    address: \"Demo Address 123\",\n                    emergencyContact: {\n                        name: \"Contacto Demo\",\n                        phone: \"+0987654321\",\n                        relationship: \"Padre\"\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date()\n                });\n                console.log(\"✅ Usuario estudiante demo creado\");\n            }\n            // Only add instructor if doesn't exist\n            if (!instructorExists) {\n                addUser({\n                    id: \"demo-instructor-fixed\",\n                    name: \"Instructor Demo\",\n                    email: \"instructor@demo.com\",\n                    password: hashedPassword,\n                    role: \"INSTRUCTOR\",\n                    studentId: null,\n                    status: \"ACTIVE\",\n                    enrollmentYear: 2025,\n                    academicYear: \"2025-2026\",\n                    createdAt: new Date(),\n                    updatedAt: new Date()\n                });\n                console.log(\"✅ Usuario instructor demo creado\");\n            }\n            console.log(\"✅ Verificación de usuarios por defecto completada\");\n        } catch (error) {\n            console.error(\"❌ Error creando usuarios por defecto:\", error);\n        }\n    } else {\n        console.log(\"✅ Usuarios demo ya existen, no se reinicializan\");\n    }\n    // Always check and initialize sample reports\n    initSampleReports();\n}\nfunction initSampleReports() {\n    // Check if sample reports already exist for demo student\n    const existingSampleReports = tempWeeklyReports.filter((report)=>report.userId === \"demo-student-fixed\");\n    if (existingSampleReports.length === 0) {\n        console.log(\"📝 Inicializando reportes de muestra...\");\n        try {\n            // Get current week dates\n            const now = new Date();\n            const currentWeek = getCurrentWeekStart();\n            const currentWeekEnd = getCurrentWeekEnd();\n            // Previous week\n            const prevWeek = new Date(currentWeek);\n            prevWeek.setDate(prevWeek.getDate() - 7);\n            const prevWeekEnd = new Date(currentWeekEnd);\n            prevWeekEnd.setDate(prevWeekEnd.getDate() - 7);\n            // Sample report from previous week\n            addWeeklyReport({\n                id: \"sample-report-1\",\n                userId: \"demo-student-fixed\",\n                weekStart: prevWeek,\n                weekEnd: prevWeekEnd,\n                submittedAt: new Date(prevWeekEnd.getTime() - 24 * 60 * 60 * 1000),\n                responses: {\n                    temasYDominio: \"Esta semana trabajamos con JavaScript básico - Nivel 3: Domino funciones y arrays, y estoy aprendiendo objetos complejos.\",\n                    evidenciaAprendizaje: \"Completé un proyecto de To-Do List usando JavaScript vanilla. Implementé funciones para agregar, editar y eliminar tareas usando arrays y objetos.\",\n                    dificultadesEstrategias: \"Tuve dificultades con el manejo de eventos en JavaScript. Lo resolví practicando con ejemplos y consultando documentación de MDN.\",\n                    conexionesAplicacion: \"Los conceptos de eventos se conectan con la interactividad en aplicaciones web. Puedo aplicarlo para crear interfaces más dinámicas.\",\n                    comentariosAdicionales: \"Me siento más confiado con JavaScript. Quiero seguir practicando con proyectos más complejos.\"\n                }\n            });\n            // Two weeks ago report  \n            const twoWeeksAgo = new Date(currentWeek);\n            twoWeeksAgo.setDate(twoWeeksAgo.getDate() - 14);\n            const twoWeeksAgoEnd = new Date(currentWeekEnd);\n            twoWeeksAgoEnd.setDate(twoWeeksAgoEnd.getDate() - 14);\n            addWeeklyReport({\n                id: \"sample-report-2\",\n                userId: \"demo-student-fixed\",\n                weekStart: twoWeeksAgo,\n                weekEnd: twoWeeksAgoEnd,\n                submittedAt: new Date(twoWeeksAgoEnd.getTime() - 12 * 60 * 60 * 1000),\n                responses: {\n                    temasYDominio: \"Esta semana estudiamos CSS Grid y Flexbox - Nivel 2: Entiendo los conceptos básicos pero aún tengo dudas con layouts complejos.\",\n                    evidenciaAprendizaje: \"Recreé el layout de una página web usando CSS Grid. Logré hacer una estructura responsive con header, sidebar y main content.\",\n                    dificultadesEstrategias: \"Me confundí con las propiedades grid-template-areas. Resolví el problema dibujando el layout en papel primero.\",\n                    conexionesAplicacion: \"CSS Grid es perfecto para crear layouts de páginas web modernas. Lo usaré en mi proyecto final de página portfolio.\",\n                    comentariosAdicionales: \"CSS es más divertido de lo que pensaba. Me gusta ver los resultados visuales inmediatos.\"\n                }\n            });\n            console.log(\"✅ Reportes de muestra creados exitosamente\");\n        } catch (error) {\n            console.error(\"❌ Error creando reportes de muestra:\", error);\n        }\n    } else {\n        console.log(\"✅ Reportes de muestra ya existen, no se reinicializan\");\n    }\n}\n// Initialize on module load\ninitDefaultUsers();\n// Start conversation cleanup interval\nsetInterval(cleanupOldConversations, 30 * 60 * 1000) // Every 30 minutes\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixNQUFNQyxjQUFjLElBQUk3SixLQUFLa0o7WUFDN0JXLFlBQVlySCxPQUFPLENBQUNxSCxZQUFZdEgsT0FBTyxLQUFLO1lBQzVDLE1BQU11SCxpQkFBaUIsSUFBSTlKLEtBQUttSjtZQUNoQ1csZUFBZXRILE9BQU8sQ0FBQ3NILGVBQWV2SCxPQUFPLEtBQUs7WUFFbERsQixnQkFBZ0I7Z0JBQ2RuQyxJQUFJO2dCQUNKc0MsUUFBUTtnQkFDUkUsV0FBV21JO2dCQUNYN0gsU0FBUzhIO2dCQUNUUixhQUFhLElBQUl0SixLQUFLOEosZUFBZW5JLE9BQU8sS0FBSyxLQUFLLEtBQUssS0FBSztnQkFDaEU0SCxXQUFXO29CQUNUQyxlQUFlO29CQUNmQyxzQkFBc0I7b0JBQ3RCQyx5QkFBeUI7b0JBQ3pCQyxzQkFBc0I7b0JBQ3RCQyx3QkFBd0I7Z0JBQzFCO1lBQ0Y7WUFFQTdHLFFBQVFDLEdBQUcsQ0FBQztRQUNkLEVBQUUsT0FBT29CLE9BQU87WUFDZHJCLFFBQVFxQixLQUFLLENBQUMsd0NBQXdDQTtRQUN4RDtJQUNGLE9BQU87UUFDTHJCLFFBQVFDLEdBQUcsQ0FBQztJQUNkO0FBQ0Y7QUFFQSw0QkFBNEI7QUFDNUJpRjtBQUVBLHNDQUFzQztBQUN0QzhCLFlBQVlwQyx5QkFBeUIsS0FBSyxLQUFLLE1BQU0sbUJBQW1CIiwic291cmNlcyI6WyIvVXNlcnMvcm9kcmlnb2RpYmVybmFyZG8zM2dtYWlsLmNvbS9Eb2N1bWVudHMvQXBwIERldmVsb3BtZW50IFByb3llY3RzL0ludGVsbGVnbyBQbGF0Zm9ybS9zcmMvbGliL3RlbXAtc3RvcmFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUZW1wb3JhcnkgdXNlciBzdG9yYWdlIC0gcmVwbGFjZSB3aXRoIGRhdGFiYXNlIGxhdGVyXG5pbnRlcmZhY2UgVGVtcFVzZXIge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIHBhc3N3b3JkOiBzdHJpbmdcbiAgc3R1ZGVudElkPzogc3RyaW5nIHwgbnVsbFxuICByb2xlOiBzdHJpbmdcbiAgY3JlYXRlZEF0OiBEYXRlXG4gIHVwZGF0ZWRBdDogRGF0ZVxuICBpbWFnZT86IHN0cmluZ1xuICAvLyBBY2FkZW1pYyBmaWVsZHNcbiAgcHJvZ3JhbT86IHN0cmluZyAvLyBDYXJyZXJhL3Byb2dyYW1hIGRlIGVzdHVkaW9zXG4gIGFjYWRlbWljWWVhcj86IHN0cmluZyAvLyBBw7FvIGFjYWTDqW1pY28gKGVqOiBcIjIwMjQtMjAyNVwiKVxuICBlbnJvbGxtZW50WWVhcj86IG51bWJlciAvLyBBw7FvIGRlIGluZ3Jlc29cbiAgc3RhdHVzPzogXCJBQ1RJVkVcIiB8IFwiSU5BQ1RJVkVcIiB8IFwiU1VTUEVOREVEXCIgLy8gRXN0YWRvIGRlbCBlc3R1ZGlhbnRlXG4gIHBob25lTnVtYmVyPzogc3RyaW5nXG4gIGRhdGVPZkJpcnRoPzogRGF0ZVxuICBhZGRyZXNzPzogc3RyaW5nXG4gIGVtZXJnZW5jeUNvbnRhY3Q/OiB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgcGhvbmU6IHN0cmluZ1xuICAgIHJlbGF0aW9uc2hpcDogc3RyaW5nXG4gIH1cbiAgcHJlZmVyZW5jZXM/OiB7XG4gICAgZW1haWxOb3RpZmljYXRpb25zOiBib29sZWFuXG4gICAgcHVzaE5vdGlmaWNhdGlvbnM6IGJvb2xlYW5cbiAgICB3ZWVrbHlSZW1pbmRlcnM6IGJvb2xlYW5cbiAgICBwcm9ncmVzc1JlcG9ydHM6IGJvb2xlYW5cbiAgfVxufVxuXG5pbnRlcmZhY2UgQXR0YWNoZWRGaWxlIHtcbiAgZmlsZW5hbWU6IHN0cmluZ1xuICBvcmlnaW5hbE5hbWU6IHN0cmluZ1xuICBzaXplOiBudW1iZXJcbiAgdHlwZTogc3RyaW5nXG4gIHVybDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBXZWVrbHlSZXBvcnQge1xuICBpZDogc3RyaW5nXG4gIHVzZXJJZDogc3RyaW5nXG4gIHdlZWtTdGFydDogRGF0ZVxuICB3ZWVrRW5kOiBEYXRlXG4gIHN1Ym1pdHRlZEF0OiBEYXRlXG4gIHJlc3BvbnNlczoge1xuICAgIHRlbWFzWURvbWluaW86IHN0cmluZyAvLyBQcmVndW50YSAxXG4gICAgZXZpZGVuY2lhQXByZW5kaXphamU6IHN0cmluZyAvLyBQcmVndW50YSAyXG4gICAgZGlmaWN1bHRhZGVzRXN0cmF0ZWdpYXM6IHN0cmluZyAvLyBQcmVndW50YSAzXG4gICAgY29uZXhpb25lc0FwbGljYWNpb246IHN0cmluZyAvLyBQcmVndW50YSA0XG4gICAgY29tZW50YXJpb3NBZGljaW9uYWxlcz86IHN0cmluZyAvLyBQcmVndW50YSA1IChvcGNpb25hbClcbiAgfVxuICBhdHRhY2htZW50cz86IEF0dGFjaGVkRmlsZVtdIC8vIEFyY2hpdm9zIGFkanVudG9zXG59XG5cbi8vIFNpbmdsZXRvbiBwYXR0ZXJuIHRvIHBlcnNpc3QgZGF0YSBhY3Jvc3MgcmVxdWVzdHNcbmNvbnN0IGdsb2JhbEZvclN0b3JhZ2UgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICB0ZW1wVXNlcnM6IFRlbXBVc2VyW10gfCB1bmRlZmluZWRcbiAgdGVtcFdlZWtseVJlcG9ydHM6IFdlZWtseVJlcG9ydFtdIHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCB0ZW1wVXNlcnM6IFRlbXBVc2VyW10gPSBnbG9iYWxGb3JTdG9yYWdlLnRlbXBVc2VycyA/PyBbXVxuZXhwb3J0IGNvbnN0IHRlbXBXZWVrbHlSZXBvcnRzOiBXZWVrbHlSZXBvcnRbXSA9IGdsb2JhbEZvclN0b3JhZ2UudGVtcFdlZWtseVJlcG9ydHMgPz8gW11cblxuLy8gQXNzaWduIHRvIGdsb2JhbFRoaXMgdG8gcGVyc2lzdCBhY3Jvc3MgcmVxdWVzdHNcbmdsb2JhbEZvclN0b3JhZ2UudGVtcFVzZXJzID0gdGVtcFVzZXJzXG5nbG9iYWxGb3JTdG9yYWdlLnRlbXBXZWVrbHlSZXBvcnRzID0gdGVtcFdlZWtseVJlcG9ydHNcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFVzZXIodXNlcjogVGVtcFVzZXIpIHtcbiAgdGVtcFVzZXJzLnB1c2godXNlcilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKSB7XG4gIHJldHVybiB0ZW1wVXNlcnMuZmluZCh1c2VyID0+IHVzZXIuZW1haWwgPT09IGVtYWlsKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFVzZXJCeVN0dWRlbnRJZChzdHVkZW50SWQ6IHN0cmluZykge1xuICByZXR1cm4gdGVtcFVzZXJzLmZpbmQodXNlciA9PiB1c2VyLnN0dWRlbnRJZCA9PT0gc3R1ZGVudElkKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFVzZXJCeUlkKGlkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHRlbXBVc2Vycy5maW5kKHVzZXIgPT4gdXNlci5pZCA9PT0gaWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHtcbiAgcmV0dXJuIHRlbXBVc2Vyc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFVzZXJzQnlSb2xlKHJvbGU6IHN0cmluZykge1xuICByZXR1cm4gdGVtcFVzZXJzLmZpbHRlcih1c2VyID0+IHVzZXIucm9sZSA9PT0gcm9sZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRVc2Vyc0J5UHJvZ3JhbShwcm9ncmFtOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHRlbXBVc2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLnByb2dyYW0gPT09IHByb2dyYW0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kVXNlcnNCeVN0YXR1cyhzdGF0dXM6IFwiQUNUSVZFXCIgfCBcIklOQUNUSVZFXCIgfCBcIlNVU1BFTkRFRFwiKSB7XG4gIHJldHVybiB0ZW1wVXNlcnMuZmlsdGVyKHVzZXIgPT4gdXNlci5zdGF0dXMgPT09IHN0YXR1cylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVVzZXIoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxUZW1wVXNlcj4pIHtcbiAgY29uc3QgdXNlckluZGV4ID0gdGVtcFVzZXJzLmZpbmRJbmRleCh1c2VyID0+IHVzZXIuaWQgPT09IGlkKVxuICBpZiAodXNlckluZGV4ICE9PSAtMSkge1xuICAgIHRlbXBVc2Vyc1t1c2VySW5kZXhdID0ge1xuICAgICAgLi4udGVtcFVzZXJzW3VzZXJJbmRleF0sXG4gICAgICAuLi51cGRhdGVzLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfVxuICAgIHJldHVybiB0ZW1wVXNlcnNbdXNlckluZGV4XVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVVc2VyKGlkOiBzdHJpbmcpIHtcbiAgY29uc3QgdXNlckluZGV4ID0gdGVtcFVzZXJzLmZpbmRJbmRleCh1c2VyID0+IHVzZXIuaWQgPT09IGlkKVxuICBpZiAodXNlckluZGV4ICE9PSAtMSkge1xuICAgIHJldHVybiB0ZW1wVXNlcnMuc3BsaWNlKHVzZXJJbmRleCwgMSlbMF1cbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTdHVkZW50SWQoc3R1ZGVudElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gRm9ybWF0byBzdWdlcmlkbzogRVNULVlZWVktWFhYIChlajogRVNULTIwMjQtMDAxKVxuICBjb25zdCBzdHVkZW50SWRSZWdleCA9IC9eRVNULVxcZHs0fS1cXGR7M30kL1xuICByZXR1cm4gc3R1ZGVudElkUmVnZXgudGVzdChzdHVkZW50SWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVN0dWRlbnRJZCgpOiBzdHJpbmcge1xuICBjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKVxuICBjb25zdCBleGlzdGluZ0lkcyA9IHRlbXBVc2Vyc1xuICAgIC5maWx0ZXIodXNlciA9PiB1c2VyLnN0dWRlbnRJZCAmJiB1c2VyLnN0dWRlbnRJZC5zdGFydHNXaXRoKGBFU1QtJHtjdXJyZW50WWVhcn1gKSlcbiAgICAubWFwKHVzZXIgPT4gdXNlci5zdHVkZW50SWQhKVxuICAgIC5zb3J0KClcblxuICBsZXQgbmV4dE51bWJlciA9IDFcbiAgaWYgKGV4aXN0aW5nSWRzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBsYXN0SWQgPSBleGlzdGluZ0lkc1tleGlzdGluZ0lkcy5sZW5ndGggLSAxXVxuICAgIGNvbnN0IGxhc3ROdW1iZXIgPSBwYXJzZUludChsYXN0SWQuc3BsaXQoJy0nKVsyXSlcbiAgICBuZXh0TnVtYmVyID0gbGFzdE51bWJlciArIDFcbiAgfVxuXG4gIHJldHVybiBgRVNULSR7Y3VycmVudFllYXJ9LSR7bmV4dE51bWJlci50b1N0cmluZygpLnBhZFN0YXJ0KDMsICcwJyl9YFxufVxuXG4vLyBXZWVrbHkgUmVwb3J0cyBGdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBhZGRXZWVrbHlSZXBvcnQocmVwb3J0OiBXZWVrbHlSZXBvcnQpIHtcbiAgdGVtcFdlZWtseVJlcG9ydHMucHVzaChyZXBvcnQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kV2Vla2x5UmVwb3J0c0J5VXNlcih1c2VySWQ6IHN0cmluZyk6IFdlZWtseVJlcG9ydFtdIHtcbiAgcmV0dXJuIHRlbXBXZWVrbHlSZXBvcnRzLmZpbHRlcihyZXBvcnQgPT4gcmVwb3J0LnVzZXJJZCA9PT0gdXNlcklkKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFdlZWtseVJlcG9ydEJ5VXNlckFuZFdlZWsodXNlcklkOiBzdHJpbmcsIHdlZWtTdGFydDogRGF0ZSk6IFdlZWtseVJlcG9ydCB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiB0ZW1wV2Vla2x5UmVwb3J0cy5maW5kKHJlcG9ydCA9PiBcbiAgICByZXBvcnQudXNlcklkID09PSB1c2VySWQgJiYgXG4gICAgcmVwb3J0LndlZWtTdGFydC5nZXRUaW1lKCkgPT09IHdlZWtTdGFydC5nZXRUaW1lKClcbiAgKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsV2Vla2x5UmVwb3J0cygpOiBXZWVrbHlSZXBvcnRbXSB7XG4gIHJldHVybiB0ZW1wV2Vla2x5UmVwb3J0c1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2Vla2x5UmVwb3J0c0J5RGF0ZVJhbmdlKHN0YXJ0RGF0ZTogRGF0ZSwgZW5kRGF0ZTogRGF0ZSk6IFdlZWtseVJlcG9ydFtdIHtcbiAgcmV0dXJuIHRlbXBXZWVrbHlSZXBvcnRzLmZpbHRlcihyZXBvcnQgPT4gXG4gICAgcmVwb3J0LndlZWtTdGFydCA+PSBzdGFydERhdGUgJiYgcmVwb3J0LndlZWtFbmQgPD0gZW5kRGF0ZVxuICApXG59XG5cbi8vIERhdGUgdXRpbGl0eSBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50V2Vla1N0YXJ0KCk6IERhdGUge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gIGNvbnN0IG1vbmRheSA9IG5ldyBEYXRlKG5vdylcbiAgY29uc3QgZGF5ID0gbm93LmdldERheSgpXG4gIGNvbnN0IGRpZmYgPSBub3cuZ2V0RGF0ZSgpIC0gZGF5ICsgKGRheSA9PT0gMCA/IC02IDogMSkgLy8gQWRqdXN0IGZvciBTdW5kYXlcbiAgbW9uZGF5LnNldERhdGUoZGlmZilcbiAgbW9uZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gIHJldHVybiBtb25kYXlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRXZWVrRW5kKCk6IERhdGUge1xuICBjb25zdCB3ZWVrU3RhcnQgPSBnZXRDdXJyZW50V2Vla1N0YXJ0KClcbiAgY29uc3Qgd2Vla0VuZCA9IG5ldyBEYXRlKHdlZWtTdGFydClcbiAgd2Vla0VuZC5zZXREYXRlKHdlZWtTdGFydC5nZXREYXRlKCkgKyA2KVxuICB3ZWVrRW5kLnNldEhvdXJzKDIzLCA1OSwgNTksIDk5OSlcbiAgcmV0dXJuIHdlZWtFbmRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhblN1Ym1pdFRoaXNXZWVrKHVzZXJJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHdlZWtTdGFydCA9IGdldEN1cnJlbnRXZWVrU3RhcnQoKVxuICBjb25zdCB3ZWVrRW5kID0gZ2V0Q3VycmVudFdlZWtFbmQoKVxuICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKClcbiAgY29uc3QgZXhpc3RpbmdSZXBvcnQgPSBmaW5kV2Vla2x5UmVwb3J0QnlVc2VyQW5kV2Vlayh1c2VySWQsIHdlZWtTdGFydClcbiAgXG4gIC8vIENhbiBzdWJtaXQgaWY6XG4gIC8vIDEuIFdlIGFyZSBjdXJyZW50bHkgaW4gdGhpcyB3ZWVrIChjdXJyZW50RGF0ZSBpcyBiZXR3ZWVuIHdlZWtTdGFydCBhbmQgd2Vla0VuZClcbiAgLy8gMi4gTm8gcmVwb3J0IGV4aXN0cyBmb3IgdGhpcyB3ZWVrXG4gIGNvbnN0IGlzQ3VycmVudFdlZWsgPSBjdXJyZW50RGF0ZSA+PSB3ZWVrU3RhcnQgJiYgY3VycmVudERhdGUgPD0gd2Vla0VuZFxuICBcbiAgY29uc29sZS5sb2coYPCflI0gRGVidWcgY2FuU3VibWl0VGhpc1dlZWsgZm9yIHVzZXIgJHt1c2VySWR9OmApXG4gIGNvbnNvbGUubG9nKGAgIEN1cnJlbnQgZGF0ZTogJHtjdXJyZW50RGF0ZS50b0lTT1N0cmluZygpfWApXG4gIGNvbnNvbGUubG9nKGAgIFdlZWsgc3RhcnQ6ICR7d2Vla1N0YXJ0LnRvSVNPU3RyaW5nKCl9YClcbiAgY29uc29sZS5sb2coYCAgV2VlayBlbmQ6ICR7d2Vla0VuZC50b0lTT1N0cmluZygpfWApXG4gIGNvbnNvbGUubG9nKGAgIElzIGN1cnJlbnQgd2VlazogJHtpc0N1cnJlbnRXZWVrfWApXG4gIGNvbnNvbGUubG9nKGAgIEV4aXN0aW5nIHJlcG9ydDogJHtleGlzdGluZ1JlcG9ydCA/ICdZRVMnIDogJ05PJ31gKVxuICBjb25zb2xlLmxvZyhgICBDYW4gc3VibWl0OiAke2lzQ3VycmVudFdlZWsgJiYgIWV4aXN0aW5nUmVwb3J0fWApXG4gIFxuICByZXR1cm4gaXNDdXJyZW50V2VlayAmJiAhZXhpc3RpbmdSZXBvcnRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWtEYXRlcyhkYXRlOiBEYXRlKTogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH0ge1xuICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKGRhdGUpXG4gIGNvbnN0IGRheSA9IHN0YXJ0LmdldERheSgpXG4gIGNvbnN0IGRpZmYgPSBzdGFydC5nZXREYXRlKCkgLSBkYXkgKyAoZGF5ID09PSAwID8gLTYgOiAxKVxuICBzdGFydC5zZXREYXRlKGRpZmYpXG4gIHN0YXJ0LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gIFxuICBjb25zdCBlbmQgPSBuZXcgRGF0ZShzdGFydClcbiAgZW5kLnNldERhdGUoc3RhcnQuZ2V0RGF0ZSgpICsgNilcbiAgZW5kLnNldEhvdXJzKDIzLCA1OSwgNTksIDk5OSlcbiAgXG4gIHJldHVybiB7IHN0YXJ0LCBlbmQgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9udGhXZWVrcyh5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIpOiBBcnJheTx7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfT4ge1xuICBjb25zdCB3ZWVrcyA9IFtdXG4gIGNvbnN0IGZpcnN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpXG4gIGNvbnN0IGxhc3REYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIDApXG4gIFxuICBsZXQgY3VycmVudCA9IG5ldyBEYXRlKGZpcnN0RGF5KVxuICBcbiAgLy8gQWRqdXN0IHRvIHN0YXJ0IGZyb20gTW9uZGF5IG9mIGZpcnN0IHdlZWtcbiAgY29uc3QgZGF5T2ZXZWVrID0gY3VycmVudC5nZXREYXkoKVxuICBjb25zdCBkYXlzVG9TdWJ0cmFjdCA9IGRheU9mV2VlayA9PT0gMCA/IDYgOiBkYXlPZldlZWsgLSAxXG4gIGN1cnJlbnQuc2V0RGF0ZShjdXJyZW50LmdldERhdGUoKSAtIGRheXNUb1N1YnRyYWN0KVxuICBcbiAgd2hpbGUgKGN1cnJlbnQgPD0gbGFzdERheSkge1xuICAgIGNvbnN0IHdlZWtTdGFydCA9IG5ldyBEYXRlKGN1cnJlbnQpXG4gICAgY29uc3Qgd2Vla0VuZCA9IG5ldyBEYXRlKGN1cnJlbnQpXG4gICAgd2Vla0VuZC5zZXREYXRlKHdlZWtTdGFydC5nZXREYXRlKCkgKyA2KVxuICAgIFxuICAgIHdlZWtzLnB1c2goeyBzdGFydDogd2Vla1N0YXJ0LCBlbmQ6IHdlZWtFbmQgfSlcbiAgICBjdXJyZW50LnNldERhdGUoY3VycmVudC5nZXREYXRlKCkgKyA3KVxuICB9XG4gIFxuICByZXR1cm4gd2Vla3Ncbn1cblxuLy8gPT09PT0gQ0FMRU5EQVIgRlVOQ1RJT05TID09PT09XG4vLyBUaGVzZSBmdW5jdGlvbnMgaW50ZWdyYXRlIHdpdGggdGhlIGNhbGVuZGFyIHN5c3RlbSBmb3IgU2FyYSBBSVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnRzKHVzZXJJZDogc3RyaW5nKTogYW55W10ge1xuICAvLyBJbXBvcnQgY2FsZW5kYXIgZGF0YSBmdW5jdGlvbnNcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGdldFVzZXJDYWxlbmRhckRhdGEgfSA9IHJlcXVpcmUoJy4vY2FsZW5kYXItZGF0YScpXG4gICAgY29uc3QgdXNlckRhdGEgPSBnZXRVc2VyQ2FsZW5kYXJEYXRhKHVzZXJJZClcbiAgICByZXR1cm4gdXNlckRhdGE/LmV2ZW50cyB8fCBbXVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgY2FsZW5kYXIgZXZlbnRzOicsIGVycm9yKVxuICAgIHJldHVybiBbXVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxDYWxlbmRhckV2ZW50cyh1c2VySWQ6IHN0cmluZyk6IGFueVtdIHtcbiAgLy8gQWxpYXMgZm9yIGdldEV2ZW50cyBmb3IgY29tcGF0aWJpbGl0eVxuICByZXR1cm4gZ2V0RXZlbnRzKHVzZXJJZClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVwY29taW5nRXZlbnRzKHVzZXJJZDogc3RyaW5nLCBkYXlzOiBudW1iZXIgPSAzMCk6IGFueVtdIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhbGxFdmVudHMgPSBnZXRFdmVudHModXNlcklkKVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICBjb25zdCBmdXR1cmVEYXRlID0gbmV3IERhdGUoKVxuICAgIGZ1dHVyZURhdGUuc2V0RGF0ZShmdXR1cmVEYXRlLmdldERhdGUoKSArIGRheXMpXG4gICAgXG4gICAgcmV0dXJuIGFsbEV2ZW50cy5maWx0ZXIoZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZXZlbnREYXRlID0gbmV3IERhdGUoZXZlbnQuZGF0ZSlcbiAgICAgIHJldHVybiBldmVudERhdGUgPj0gbm93ICYmIGV2ZW50RGF0ZSA8PSBmdXR1cmVEYXRlXG4gICAgfSkuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYS5kYXRlKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShiLmRhdGUpLmdldFRpbWUoKSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVwY29taW5nIGV2ZW50czonLCBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnRzRm9yRGF0ZVJhbmdlKHVzZXJJZDogc3RyaW5nLCBzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpOiBhbnlbXSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYWxsRXZlbnRzID0gZ2V0RXZlbnRzKHVzZXJJZClcbiAgICByZXR1cm4gYWxsRXZlbnRzLmZpbHRlcihldmVudCA9PiB7XG4gICAgICBjb25zdCBldmVudERhdGUgPSBuZXcgRGF0ZShldmVudC5kYXRlKVxuICAgICAgcmV0dXJuIGV2ZW50RGF0ZSA+PSBzdGFydERhdGUgJiYgZXZlbnREYXRlIDw9IGVuZERhdGVcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgZXZlbnRzIGZvciBkYXRlIHJhbmdlOicsIGVycm9yKVxuICAgIHJldHVybiBbXVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kRXZlbnRCeUlkKHVzZXJJZDogc3RyaW5nLCBldmVudElkOiBzdHJpbmcpOiBhbnkgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhbGxFdmVudHMgPSBnZXRFdmVudHModXNlcklkKVxuICAgIHJldHVybiBhbGxFdmVudHMuZmluZChldmVudCA9PiBldmVudC5pZCA9PT0gZXZlbnRJZCkgfHwgbnVsbFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgZXZlbnQgYnkgSUQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vLyA9PT09PSBDT05WRVJTQVRJT04gTUVNT1JZIEZVTkNUSU9OUyA9PT09PVxuLy8gUGVyc2lzdGVudCBjb252ZXJzYXRpb24gc3RvcmFnZSBmb3IgU2FyYSBBSVxuXG5pbnRlcmZhY2UgQ29udmVyc2F0aW9uVHVybiB7XG4gIGlkOiBzdHJpbmdcbiAgdGltZXN0YW1wOiBEYXRlXG4gIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnXG4gIGNvbnRlbnQ6IHN0cmluZ1xuICBtZXRhZGF0YToge1xuICAgIHN1YmplY3Q/OiBzdHJpbmdcbiAgICB0b3BpYz86IHN0cmluZ1xuICAgIGludGVudGlvbj86IHN0cmluZ1xuICAgIHRhc2tDb21wbGV0ZWQ/OiBib29sZWFuXG4gICAgZXZlbnRDcmVhdGVkPzogYm9vbGVhblxuICB9XG59XG5cbmludGVyZmFjZSBDb252ZXJzYXRpb25TZXNzaW9uIHtcbiAgdXNlcklkOiBzdHJpbmdcbiAgc2Vzc2lvbklkOiBzdHJpbmdcbiAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXVxuICBjdXJyZW50VG9waWM/OiBzdHJpbmdcbiAgY3VycmVudFN1YmplY3Q/OiBzdHJpbmdcbiAgcGVuZGluZ1Rhc2tzOiBBcnJheTx7XG4gICAgaWQ6IHN0cmluZ1xuICAgIHR5cGU6ICdjYWxlbmRhcl9ldmVudCcgfCAnYWNhZGVtaWNfc2VhcmNoJyB8ICdyZW1pbmRlcidcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gICAgZGF0YTogYW55XG4gICAgY29tcGxldGVkOiBib29sZWFuXG4gICAgY3JlYXRlZEF0OiBEYXRlXG4gIH0+XG4gIGxhc3RVcGRhdGU6IERhdGVcbn1cblxuLy8gR2xvYmFsIHN0b3JhZ2UgZm9yIGNvbnZlcnNhdGlvbnNcbmNvbnN0IGdsb2JhbEZvckNvbnZlcnNhdGlvbnMgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICB0ZW1wQ29udmVyc2F0aW9uczogQ29udmVyc2F0aW9uU2Vzc2lvbltdIHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCB0ZW1wQ29udmVyc2F0aW9uczogQ29udmVyc2F0aW9uU2Vzc2lvbltdID0gZ2xvYmFsRm9yQ29udmVyc2F0aW9ucy50ZW1wQ29udmVyc2F0aW9ucyA/PyBbXVxuZ2xvYmFsRm9yQ29udmVyc2F0aW9ucy50ZW1wQ29udmVyc2F0aW9ucyA9IHRlbXBDb252ZXJzYXRpb25zXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb25TZXNzaW9uKHVzZXJJZDogc3RyaW5nLCBzZXNzaW9uSWQ6IHN0cmluZyk6IENvbnZlcnNhdGlvblNlc3Npb24gfCBudWxsIHtcbiAgcmV0dXJuIHRlbXBDb252ZXJzYXRpb25zLmZpbmQoc2Vzc2lvbiA9PiBcbiAgICBzZXNzaW9uLnVzZXJJZCA9PT0gdXNlcklkICYmIHNlc3Npb24uc2Vzc2lvbklkID09PSBzZXNzaW9uSWRcbiAgKSB8fCBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb252ZXJzYXRpb25TZXNzaW9uKHVzZXJJZDogc3RyaW5nLCBzZXNzaW9uSWQ6IHN0cmluZyk6IENvbnZlcnNhdGlvblNlc3Npb24ge1xuICAvLyBGaXJzdCByZW1vdmUgYW55IG9sZCBzZXNzaW9uIGZvciB0aGUgc2FtZSB1c2VyL3Nlc3Npb25JZFxuICBjb25zdCBleGlzdGluZ0luZGV4ID0gdGVtcENvbnZlcnNhdGlvbnMuZmluZEluZGV4KHNlc3Npb24gPT4gXG4gICAgc2Vzc2lvbi51c2VySWQgPT09IHVzZXJJZCAmJiBzZXNzaW9uLnNlc3Npb25JZCA9PT0gc2Vzc2lvbklkXG4gIClcbiAgaWYgKGV4aXN0aW5nSW5kZXggIT09IC0xKSB7XG4gICAgdGVtcENvbnZlcnNhdGlvbnMuc3BsaWNlKGV4aXN0aW5nSW5kZXgsIDEpXG4gIH1cblxuICBjb25zdCBuZXdTZXNzaW9uOiBDb252ZXJzYXRpb25TZXNzaW9uID0ge1xuICAgIHVzZXJJZCxcbiAgICBzZXNzaW9uSWQsXG4gICAgdHVybnM6IFtdLFxuICAgIGN1cnJlbnRUb3BpYzogdW5kZWZpbmVkLFxuICAgIGN1cnJlbnRTdWJqZWN0OiB1bmRlZmluZWQsXG4gICAgcGVuZGluZ1Rhc2tzOiBbXSxcbiAgICBsYXN0VXBkYXRlOiBuZXcgRGF0ZSgpXG4gIH1cbiAgXG4gIHRlbXBDb252ZXJzYXRpb25zLnB1c2gobmV3U2Vzc2lvbilcbiAgY29uc29sZS5sb2coYPCfkqwgQ3JlYXRlZCBjb252ZXJzYXRpb24gc2Vzc2lvbiAke3Nlc3Npb25JZH0gZm9yIHVzZXIgJHt1c2VySWR9YClcbiAgcmV0dXJuIG5ld1Nlc3Npb25cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNvbnZlcnNhdGlvblNlc3Npb24oc2Vzc2lvbjogQ29udmVyc2F0aW9uU2Vzc2lvbik6IENvbnZlcnNhdGlvblNlc3Npb24ge1xuICBjb25zdCBpbmRleCA9IHRlbXBDb252ZXJzYXRpb25zLmZpbmRJbmRleChzID0+IFxuICAgIHMudXNlcklkID09PSBzZXNzaW9uLnVzZXJJZCAmJiBzLnNlc3Npb25JZCA9PT0gc2Vzc2lvbi5zZXNzaW9uSWRcbiAgKVxuICBcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIHRlbXBDb252ZXJzYXRpb25zW2luZGV4XSA9IHsgLi4uc2Vzc2lvbiwgbGFzdFVwZGF0ZTogbmV3IERhdGUoKSB9XG4gICAgY29uc29sZS5sb2coYPCfkqwgVXBkYXRlZCBzZXNzaW9uICR7c2Vzc2lvbi5zZXNzaW9uSWR9IC0gJHtzZXNzaW9uLnR1cm5zLmxlbmd0aH0gdHVybnNgKVxuICB9IGVsc2Uge1xuICAgIHRlbXBDb252ZXJzYXRpb25zLnB1c2goeyAuLi5zZXNzaW9uLCBsYXN0VXBkYXRlOiBuZXcgRGF0ZSgpIH0pXG4gICAgY29uc29sZS5sb2coYPCfkqwgQ3JlYXRlZCBuZXcgc2Vzc2lvbiAke3Nlc3Npb24uc2Vzc2lvbklkfSBkdXJpbmcgdXBkYXRlYClcbiAgfVxuICBcbiAgcmV0dXJuIHNlc3Npb25cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbnZlcnNhdGlvblR1cm4oXG4gIHVzZXJJZDogc3RyaW5nLCBcbiAgc2Vzc2lvbklkOiBzdHJpbmcsIFxuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JywgXG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgbWV0YWRhdGE6IENvbnZlcnNhdGlvblR1cm5bJ21ldGFkYXRhJ10gPSB7fVxuKTogQ29udmVyc2F0aW9uU2Vzc2lvbiB7XG4gIGxldCBzZXNzaW9uID0gZ2V0Q29udmVyc2F0aW9uU2Vzc2lvbih1c2VySWQsIHNlc3Npb25JZClcbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgc2Vzc2lvbiA9IGNyZWF0ZUNvbnZlcnNhdGlvblNlc3Npb24odXNlcklkLCBzZXNzaW9uSWQpXG4gIH1cbiAgXG4gIGNvbnN0IHR1cm46IENvbnZlcnNhdGlvblR1cm4gPSB7XG4gICAgaWQ6IGB0dXJuXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgcm9sZSxcbiAgICBjb250ZW50LFxuICAgIG1ldGFkYXRhXG4gIH1cbiAgXG4gIHNlc3Npb24udHVybnMucHVzaCh0dXJuKVxuICBcbiAgLy8gS2VlcCBvbmx5IGxhc3QgMjAgdHVybnMgcGVyIHNlc3Npb25cbiAgaWYgKHNlc3Npb24udHVybnMubGVuZ3RoID4gMjApIHtcbiAgICBzZXNzaW9uLnR1cm5zID0gc2Vzc2lvbi50dXJucy5zbGljZSgtMjApXG4gIH1cbiAgXG4gIHJldHVybiB1cGRhdGVDb252ZXJzYXRpb25TZXNzaW9uKHNlc3Npb24pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRQZW5kaW5nVGFzayhcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHNlc3Npb25JZDogc3RyaW5nLFxuICB0eXBlOiAnY2FsZW5kYXJfZXZlbnQnIHwgJ2FjYWRlbWljX3NlYXJjaCcgfCAncmVtaW5kZXInLFxuICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICBkYXRhOiBhbnlcbik6IHZvaWQge1xuICBsZXQgc2Vzc2lvbiA9IGdldENvbnZlcnNhdGlvblNlc3Npb24odXNlcklkLCBzZXNzaW9uSWQpXG4gIGlmICghc2Vzc2lvbikge1xuICAgIHNlc3Npb24gPSBjcmVhdGVDb252ZXJzYXRpb25TZXNzaW9uKHVzZXJJZCwgc2Vzc2lvbklkKVxuICB9XG4gIFxuICBjb25zdCB0YXNrID0ge1xuICAgIGlkOiBgdGFza18ke0RhdGUubm93KCl9YCxcbiAgICB0eXBlLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGRhdGEsXG4gICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKClcbiAgfVxuICBcbiAgc2Vzc2lvbi5wZW5kaW5nVGFza3MucHVzaCh0YXNrKVxuICBjb25zb2xlLmxvZyhg8J+TiyBBZGRlZCBwZW5kaW5nIHRhc2s6ICR7ZGVzY3JpcHRpb259YClcbiAgXG4gIHVwZGF0ZUNvbnZlcnNhdGlvblNlc3Npb24oc2Vzc2lvbilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcmtUYXNrQ29tcGxldGVkKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gIHRhc2tJZDogc3RyaW5nLFxuICByZXN1bHQ/OiBhbnlcbik6IGJvb2xlYW4ge1xuICBjb25zdCBzZXNzaW9uID0gZ2V0Q29udmVyc2F0aW9uU2Vzc2lvbih1c2VySWQsIHNlc3Npb25JZClcbiAgaWYgKCFzZXNzaW9uKSByZXR1cm4gZmFsc2VcbiAgXG4gIGNvbnN0IHRhc2sgPSBzZXNzaW9uLnBlbmRpbmdUYXNrcy5maW5kKHQgPT4gdC5pZCA9PT0gdGFza0lkKVxuICBpZiAoIXRhc2spIHJldHVybiBmYWxzZVxuICBcbiAgdGFzay5jb21wbGV0ZWQgPSB0cnVlXG4gIGlmIChyZXN1bHQpIHtcbiAgICB0YXNrLmRhdGEucmVzdWx0ID0gcmVzdWx0XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKGDinIUgQ29tcGxldGVkIHRhc2s6ICR7dGFzay5kZXNjcmlwdGlvbn1gKVxuICB1cGRhdGVDb252ZXJzYXRpb25TZXNzaW9uKHNlc3Npb24pXG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQZW5kaW5nVGFza3ModXNlcklkOiBzdHJpbmcsIHNlc3Npb25JZDogc3RyaW5nKTogQXJyYXk8e1xuICBpZDogc3RyaW5nXG4gIHR5cGU6ICdjYWxlbmRhcl9ldmVudCcgfCAnYWNhZGVtaWNfc2VhcmNoJyB8ICdyZW1pbmRlcidcbiAgZGVzY3JpcHRpb246IHN0cmluZ1xuICBkYXRhOiBhbnlcbiAgY29tcGxldGVkOiBib29sZWFuXG4gIGNyZWF0ZWRBdDogRGF0ZVxufT4ge1xuICBjb25zdCBzZXNzaW9uID0gZ2V0Q29udmVyc2F0aW9uU2Vzc2lvbih1c2VySWQsIHNlc3Npb25JZClcbiAgaWYgKCFzZXNzaW9uKSByZXR1cm4gW11cbiAgXG4gIHJldHVybiBzZXNzaW9uLnBlbmRpbmdUYXNrcy5maWx0ZXIodGFzayA9PiAhdGFzay5jb21wbGV0ZWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb25IaXN0b3J5KHVzZXJJZDogc3RyaW5nLCBzZXNzaW9uSWQ6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDEwKTogQ29udmVyc2F0aW9uVHVybltdIHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGdldENvbnZlcnNhdGlvblNlc3Npb24odXNlcklkLCBzZXNzaW9uSWQpXG4gIGlmICghc2Vzc2lvbikgcmV0dXJuIFtdXG4gIFxuICByZXR1cm4gc2Vzc2lvbi50dXJucy5zbGljZSgtbGltaXQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyQWN0aXZlU2Vzc2lvbnModXNlcklkOiBzdHJpbmcpOiBDb252ZXJzYXRpb25TZXNzaW9uW10ge1xuICBjb25zdCBvbmVIb3VyQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtICg2MCAqIDYwICogMTAwMCkpXG4gIHJldHVybiB0ZW1wQ29udmVyc2F0aW9ucy5maWx0ZXIoc2Vzc2lvbiA9PiBcbiAgICBzZXNzaW9uLnVzZXJJZCA9PT0gdXNlcklkICYmIHNlc3Npb24ubGFzdFVwZGF0ZSA+IG9uZUhvdXJBZ29cbiAgKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW51cE9sZENvbnZlcnNhdGlvbnMoKTogdm9pZCB7XG4gIGNvbnN0IHNpeEhvdXJzQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtICg2ICogNjAgKiA2MCAqIDEwMDApKVxuICBjb25zdCBiZWZvcmUgPSB0ZW1wQ29udmVyc2F0aW9ucy5sZW5ndGhcbiAgXG4gIC8vIFJlbW92ZSBjb252ZXJzYXRpb25zIG9sZGVyIHRoYW4gNiBob3Vyc1xuICBmb3IgKGxldCBpID0gdGVtcENvbnZlcnNhdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAodGVtcENvbnZlcnNhdGlvbnNbaV0ubGFzdFVwZGF0ZSA8IHNpeEhvdXJzQWdvKSB7XG4gICAgICB0ZW1wQ29udmVyc2F0aW9ucy5zcGxpY2UoaSwgMSlcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IGFmdGVyID0gdGVtcENvbnZlcnNhdGlvbnMubGVuZ3RoXG4gIGlmIChiZWZvcmUgIT09IGFmdGVyKSB7XG4gICAgY29uc29sZS5sb2coYPCfp7kgQ2xlYW5lZCB1cCAke2JlZm9yZSAtIGFmdGVyfSBvbGQgY29udmVyc2F0aW9uIHNlc3Npb25zYClcbiAgfVxufVxuXG4vLyBJbml0aWFsaXplIGRlZmF1bHQgdXNlcnMgYXV0b21hdGljYWxseVxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuXG5mdW5jdGlvbiBpbml0RGVmYXVsdFVzZXJzKCkge1xuICAvLyBDaGVjayBpZiBkZW1vIHVzZXJzIGFscmVhZHkgZXhpc3QgdG8gYXZvaWQgZHVwbGljYXRlc1xuICBjb25zdCBzdHVkZW50RXhpc3RzID0gZmluZFVzZXJCeUVtYWlsKFwiZXN0dWRpYW50ZUBkZW1vLmNvbVwiKVxuICBjb25zdCBpbnN0cnVjdG9yRXhpc3RzID0gZmluZFVzZXJCeUVtYWlsKFwiaW5zdHJ1Y3RvckBkZW1vLmNvbVwiKVxuICBcbiAgaWYgKCFzdHVkZW50RXhpc3RzIHx8ICFpbnN0cnVjdG9yRXhpc3RzKSB7XG4gICAgY29uc29sZS5sb2coXCLwn5SnIEluaWNpYWxpemFuZG8gdXN1YXJpb3MgcG9yIGRlZmVjdG8uLi5cIilcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBiY3J5cHQuaGFzaFN5bmMoXCJFc3R1ZGlhbnRlMTIzISEhXCIsIDEyKVxuICAgICAgXG4gICAgICAvLyBPbmx5IGFkZCBzdHVkZW50IGlmIGRvZXNuJ3QgZXhpc3RcbiAgICAgIGlmICghc3R1ZGVudEV4aXN0cykge1xuICAgICAgICBhZGRVc2VyKHtcbiAgICAgICAgICBpZDogXCJkZW1vLXN0dWRlbnQtZml4ZWRcIixcbiAgICAgICAgICBuYW1lOiBcIkVzdHVkaWFudGUgRGVtb1wiLFxuICAgICAgICAgIGVtYWlsOiBcImVzdHVkaWFudGVAZGVtby5jb21cIixcbiAgICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgICAgcm9sZTogXCJTVFVERU5UXCIsXG4gICAgICAgICAgc3R1ZGVudElkOiBcIkVTVC0yMDI1LTAwMVwiLFxuICAgICAgICAgIHN0YXR1czogXCJBQ1RJVkVcIixcbiAgICAgICAgICBlbnJvbGxtZW50WWVhcjogMjAyNSxcbiAgICAgICAgICBhY2FkZW1pY1llYXI6IFwiMjAyNS0yMDI2XCIsXG4gICAgICAgICAgcHJvZ3JhbTogXCJJbmdlbmllcsOtYSBlbiBTaXN0ZW1hc1wiLFxuICAgICAgICAgIHBob25lTnVtYmVyOiBcIisxMjM0NTY3ODkwXCIsXG4gICAgICAgICAgZGF0ZU9mQmlydGg6IG5ldyBEYXRlKFwiMjAwMC0wMS0wMVwiKSxcbiAgICAgICAgICBhZGRyZXNzOiBcIkRlbW8gQWRkcmVzcyAxMjNcIixcbiAgICAgICAgICBlbWVyZ2VuY3lDb250YWN0OiB7XG4gICAgICAgICAgICBuYW1lOiBcIkNvbnRhY3RvIERlbW9cIixcbiAgICAgICAgICAgIHBob25lOiBcIiswOTg3NjU0MzIxXCIsXG4gICAgICAgICAgICByZWxhdGlvbnNoaXA6IFwiUGFkcmVcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSlcbiAgICAgICAgY29uc29sZS5sb2coXCLinIUgVXN1YXJpbyBlc3R1ZGlhbnRlIGRlbW8gY3JlYWRvXCIpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE9ubHkgYWRkIGluc3RydWN0b3IgaWYgZG9lc24ndCBleGlzdFxuICAgICAgaWYgKCFpbnN0cnVjdG9yRXhpc3RzKSB7XG4gICAgICAgIGFkZFVzZXIoe1xuICAgICAgICAgIGlkOiBcImRlbW8taW5zdHJ1Y3Rvci1maXhlZFwiLFxuICAgICAgICAgIG5hbWU6IFwiSW5zdHJ1Y3RvciBEZW1vXCIsXG4gICAgICAgICAgZW1haWw6IFwiaW5zdHJ1Y3RvckBkZW1vLmNvbVwiLFxuICAgICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgICByb2xlOiBcIklOU1RSVUNUT1JcIixcbiAgICAgICAgICBzdHVkZW50SWQ6IG51bGwsXG4gICAgICAgICAgc3RhdHVzOiBcIkFDVElWRVwiLFxuICAgICAgICAgIGVucm9sbG1lbnRZZWFyOiAyMDI1LFxuICAgICAgICAgIGFjYWRlbWljWWVhcjogXCIyMDI1LTIwMjZcIixcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KVxuICAgICAgICBjb25zb2xlLmxvZyhcIuKchSBVc3VhcmlvIGluc3RydWN0b3IgZGVtbyBjcmVhZG9cIilcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coXCLinIUgVmVyaWZpY2FjacOzbiBkZSB1c3VhcmlvcyBwb3IgZGVmZWN0byBjb21wbGV0YWRhXCIpXG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBjcmVhbmRvIHVzdWFyaW9zIHBvciBkZWZlY3RvOlwiLCBlcnJvcilcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coXCLinIUgVXN1YXJpb3MgZGVtbyB5YSBleGlzdGVuLCBubyBzZSByZWluaWNpYWxpemFuXCIpXG4gIH1cbiAgXG4gIC8vIEFsd2F5cyBjaGVjayBhbmQgaW5pdGlhbGl6ZSBzYW1wbGUgcmVwb3J0c1xuICBpbml0U2FtcGxlUmVwb3J0cygpXG59XG5cbmZ1bmN0aW9uIGluaXRTYW1wbGVSZXBvcnRzKCkge1xuICAvLyBDaGVjayBpZiBzYW1wbGUgcmVwb3J0cyBhbHJlYWR5IGV4aXN0IGZvciBkZW1vIHN0dWRlbnRcbiAgY29uc3QgZXhpc3RpbmdTYW1wbGVSZXBvcnRzID0gdGVtcFdlZWtseVJlcG9ydHMuZmlsdGVyKHJlcG9ydCA9PiByZXBvcnQudXNlcklkID09PSBcImRlbW8tc3R1ZGVudC1maXhlZFwiKVxuICBcbiAgaWYgKGV4aXN0aW5nU2FtcGxlUmVwb3J0cy5sZW5ndGggPT09IDApIHtcbiAgICBjb25zb2xlLmxvZyhcIvCfk50gSW5pY2lhbGl6YW5kbyByZXBvcnRlcyBkZSBtdWVzdHJhLi4uXCIpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBjdXJyZW50IHdlZWsgZGF0ZXNcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICAgIGNvbnN0IGN1cnJlbnRXZWVrID0gZ2V0Q3VycmVudFdlZWtTdGFydCgpXG4gICAgICBjb25zdCBjdXJyZW50V2Vla0VuZCA9IGdldEN1cnJlbnRXZWVrRW5kKClcbiAgICAgIFxuICAgICAgLy8gUHJldmlvdXMgd2Vla1xuICAgICAgY29uc3QgcHJldldlZWsgPSBuZXcgRGF0ZShjdXJyZW50V2VlaylcbiAgICAgIHByZXZXZWVrLnNldERhdGUocHJldldlZWsuZ2V0RGF0ZSgpIC0gNylcbiAgICAgIGNvbnN0IHByZXZXZWVrRW5kID0gbmV3IERhdGUoY3VycmVudFdlZWtFbmQpXG4gICAgICBwcmV2V2Vla0VuZC5zZXREYXRlKHByZXZXZWVrRW5kLmdldERhdGUoKSAtIDcpXG4gICAgICBcbiAgICAgIC8vIFNhbXBsZSByZXBvcnQgZnJvbSBwcmV2aW91cyB3ZWVrXG4gICAgICBhZGRXZWVrbHlSZXBvcnQoe1xuICAgICAgICBpZDogXCJzYW1wbGUtcmVwb3J0LTFcIixcbiAgICAgICAgdXNlcklkOiBcImRlbW8tc3R1ZGVudC1maXhlZFwiLFxuICAgICAgICB3ZWVrU3RhcnQ6IHByZXZXZWVrLFxuICAgICAgICB3ZWVrRW5kOiBwcmV2V2Vla0VuZCxcbiAgICAgICAgc3VibWl0dGVkQXQ6IG5ldyBEYXRlKHByZXZXZWVrRW5kLmdldFRpbWUoKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApLCAvLyAxIGRheSBiZWZvcmUgd2VlayBlbmRcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgdGVtYXNZRG9taW5pbzogXCJFc3RhIHNlbWFuYSB0cmFiYWphbW9zIGNvbiBKYXZhU2NyaXB0IGLDoXNpY28gLSBOaXZlbCAzOiBEb21pbm8gZnVuY2lvbmVzIHkgYXJyYXlzLCB5IGVzdG95IGFwcmVuZGllbmRvIG9iamV0b3MgY29tcGxlam9zLlwiLFxuICAgICAgICAgIGV2aWRlbmNpYUFwcmVuZGl6YWplOiBcIkNvbXBsZXTDqSB1biBwcm95ZWN0byBkZSBUby1EbyBMaXN0IHVzYW5kbyBKYXZhU2NyaXB0IHZhbmlsbGEuIEltcGxlbWVudMOpIGZ1bmNpb25lcyBwYXJhIGFncmVnYXIsIGVkaXRhciB5IGVsaW1pbmFyIHRhcmVhcyB1c2FuZG8gYXJyYXlzIHkgb2JqZXRvcy5cIixcbiAgICAgICAgICBkaWZpY3VsdGFkZXNFc3RyYXRlZ2lhczogXCJUdXZlIGRpZmljdWx0YWRlcyBjb24gZWwgbWFuZWpvIGRlIGV2ZW50b3MgZW4gSmF2YVNjcmlwdC4gTG8gcmVzb2x2w60gcHJhY3RpY2FuZG8gY29uIGVqZW1wbG9zIHkgY29uc3VsdGFuZG8gZG9jdW1lbnRhY2nDs24gZGUgTUROLlwiLFxuICAgICAgICAgIGNvbmV4aW9uZXNBcGxpY2FjaW9uOiBcIkxvcyBjb25jZXB0b3MgZGUgZXZlbnRvcyBzZSBjb25lY3RhbiBjb24gbGEgaW50ZXJhY3RpdmlkYWQgZW4gYXBsaWNhY2lvbmVzIHdlYi4gUHVlZG8gYXBsaWNhcmxvIHBhcmEgY3JlYXIgaW50ZXJmYWNlcyBtw6FzIGRpbsOhbWljYXMuXCIsXG4gICAgICAgICAgY29tZW50YXJpb3NBZGljaW9uYWxlczogXCJNZSBzaWVudG8gbcOhcyBjb25maWFkbyBjb24gSmF2YVNjcmlwdC4gUXVpZXJvIHNlZ3VpciBwcmFjdGljYW5kbyBjb24gcHJveWVjdG9zIG3DoXMgY29tcGxlam9zLlwiXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFR3byB3ZWVrcyBhZ28gcmVwb3J0ICBcbiAgICAgIGNvbnN0IHR3b1dlZWtzQWdvID0gbmV3IERhdGUoY3VycmVudFdlZWspXG4gICAgICB0d29XZWVrc0Fnby5zZXREYXRlKHR3b1dlZWtzQWdvLmdldERhdGUoKSAtIDE0KVxuICAgICAgY29uc3QgdHdvV2Vla3NBZ29FbmQgPSBuZXcgRGF0ZShjdXJyZW50V2Vla0VuZClcbiAgICAgIHR3b1dlZWtzQWdvRW5kLnNldERhdGUodHdvV2Vla3NBZ29FbmQuZ2V0RGF0ZSgpIC0gMTQpXG4gICAgICBcbiAgICAgIGFkZFdlZWtseVJlcG9ydCh7XG4gICAgICAgIGlkOiBcInNhbXBsZS1yZXBvcnQtMlwiLFxuICAgICAgICB1c2VySWQ6IFwiZGVtby1zdHVkZW50LWZpeGVkXCIsIFxuICAgICAgICB3ZWVrU3RhcnQ6IHR3b1dlZWtzQWdvLFxuICAgICAgICB3ZWVrRW5kOiB0d29XZWVrc0Fnb0VuZCxcbiAgICAgICAgc3VibWl0dGVkQXQ6IG5ldyBEYXRlKHR3b1dlZWtzQWdvRW5kLmdldFRpbWUoKSAtIDEyICogNjAgKiA2MCAqIDEwMDApLCAvLyAxMiBob3VycyBiZWZvcmUgd2VlayBlbmRcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgdGVtYXNZRG9taW5pbzogXCJFc3RhIHNlbWFuYSBlc3R1ZGlhbW9zIENTUyBHcmlkIHkgRmxleGJveCAtIE5pdmVsIDI6IEVudGllbmRvIGxvcyBjb25jZXB0b3MgYsOhc2ljb3MgcGVybyBhw7puIHRlbmdvIGR1ZGFzIGNvbiBsYXlvdXRzIGNvbXBsZWpvcy5cIixcbiAgICAgICAgICBldmlkZW5jaWFBcHJlbmRpemFqZTogXCJSZWNyZcOpIGVsIGxheW91dCBkZSB1bmEgcMOhZ2luYSB3ZWIgdXNhbmRvIENTUyBHcmlkLiBMb2dyw6kgaGFjZXIgdW5hIGVzdHJ1Y3R1cmEgcmVzcG9uc2l2ZSBjb24gaGVhZGVyLCBzaWRlYmFyIHkgbWFpbiBjb250ZW50LlwiLFxuICAgICAgICAgIGRpZmljdWx0YWRlc0VzdHJhdGVnaWFzOiBcIk1lIGNvbmZ1bmTDrSBjb24gbGFzIHByb3BpZWRhZGVzIGdyaWQtdGVtcGxhdGUtYXJlYXMuIFJlc29sdsOtIGVsIHByb2JsZW1hIGRpYnVqYW5kbyBlbCBsYXlvdXQgZW4gcGFwZWwgcHJpbWVyby5cIixcbiAgICAgICAgICBjb25leGlvbmVzQXBsaWNhY2lvbjogXCJDU1MgR3JpZCBlcyBwZXJmZWN0byBwYXJhIGNyZWFyIGxheW91dHMgZGUgcMOhZ2luYXMgd2ViIG1vZGVybmFzLiBMbyB1c2Fyw6kgZW4gbWkgcHJveWVjdG8gZmluYWwgZGUgcMOhZ2luYSBwb3J0Zm9saW8uXCIsXG4gICAgICAgICAgY29tZW50YXJpb3NBZGljaW9uYWxlczogXCJDU1MgZXMgbcOhcyBkaXZlcnRpZG8gZGUgbG8gcXVlIHBlbnNhYmEuIE1lIGd1c3RhIHZlciBsb3MgcmVzdWx0YWRvcyB2aXN1YWxlcyBpbm1lZGlhdG9zLlwiXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFJlcG9ydGVzIGRlIG11ZXN0cmEgY3JlYWRvcyBleGl0b3NhbWVudGVcIilcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBjcmVhbmRvIHJlcG9ydGVzIGRlIG11ZXN0cmE6XCIsIGVycm9yKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhcIuKchSBSZXBvcnRlcyBkZSBtdWVzdHJhIHlhIGV4aXN0ZW4sIG5vIHNlIHJlaW5pY2lhbGl6YW5cIilcbiAgfVxufVxuXG4vLyBJbml0aWFsaXplIG9uIG1vZHVsZSBsb2FkXG5pbml0RGVmYXVsdFVzZXJzKClcblxuLy8gU3RhcnQgY29udmVyc2F0aW9uIGNsZWFudXAgaW50ZXJ2YWxcbnNldEludGVydmFsKGNsZWFudXBPbGRDb252ZXJzYXRpb25zLCAzMCAqIDYwICogMTAwMCkgLy8gRXZlcnkgMzAgbWludXRlcyJdLCJuYW1lcyI6WyJnbG9iYWxGb3JTdG9yYWdlIiwiZ2xvYmFsVGhpcyIsInRlbXBVc2VycyIsInRlbXBXZWVrbHlSZXBvcnRzIiwiYWRkVXNlciIsInVzZXIiLCJwdXNoIiwiZmluZFVzZXJCeUVtYWlsIiwiZW1haWwiLCJmaW5kIiwiZmluZFVzZXJCeVN0dWRlbnRJZCIsInN0dWRlbnRJZCIsImZpbmRVc2VyQnlJZCIsImlkIiwiZ2V0QWxsVXNlcnMiLCJmaW5kVXNlcnNCeVJvbGUiLCJyb2xlIiwiZmlsdGVyIiwiZmluZFVzZXJzQnlQcm9ncmFtIiwicHJvZ3JhbSIsImZpbmRVc2Vyc0J5U3RhdHVzIiwic3RhdHVzIiwidXBkYXRlVXNlciIsInVwZGF0ZXMiLCJ1c2VySW5kZXgiLCJmaW5kSW5kZXgiLCJ1cGRhdGVkQXQiLCJEYXRlIiwiZGVsZXRlVXNlciIsInNwbGljZSIsInZhbGlkYXRlU3R1ZGVudElkIiwic3R1ZGVudElkUmVnZXgiLCJ0ZXN0IiwiZ2VuZXJhdGVTdHVkZW50SWQiLCJjdXJyZW50WWVhciIsImdldEZ1bGxZZWFyIiwiZXhpc3RpbmdJZHMiLCJzdGFydHNXaXRoIiwibWFwIiwic29ydCIsIm5leHROdW1iZXIiLCJsZW5ndGgiLCJsYXN0SWQiLCJsYXN0TnVtYmVyIiwicGFyc2VJbnQiLCJzcGxpdCIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJhZGRXZWVrbHlSZXBvcnQiLCJyZXBvcnQiLCJmaW5kV2Vla2x5UmVwb3J0c0J5VXNlciIsInVzZXJJZCIsImZpbmRXZWVrbHlSZXBvcnRCeVVzZXJBbmRXZWVrIiwid2Vla1N0YXJ0IiwiZ2V0VGltZSIsImdldEFsbFdlZWtseVJlcG9ydHMiLCJnZXRXZWVrbHlSZXBvcnRzQnlEYXRlUmFuZ2UiLCJzdGFydERhdGUiLCJlbmREYXRlIiwid2Vla0VuZCIsImdldEN1cnJlbnRXZWVrU3RhcnQiLCJub3ciLCJtb25kYXkiLCJkYXkiLCJnZXREYXkiLCJkaWZmIiwiZ2V0RGF0ZSIsInNldERhdGUiLCJzZXRIb3VycyIsImdldEN1cnJlbnRXZWVrRW5kIiwiY2FuU3VibWl0VGhpc1dlZWsiLCJjdXJyZW50RGF0ZSIsImV4aXN0aW5nUmVwb3J0IiwiaXNDdXJyZW50V2VlayIsImNvbnNvbGUiLCJsb2ciLCJ0b0lTT1N0cmluZyIsImdldFdlZWtEYXRlcyIsImRhdGUiLCJzdGFydCIsImVuZCIsImdldE1vbnRoV2Vla3MiLCJ5ZWFyIiwibW9udGgiLCJ3ZWVrcyIsImZpcnN0RGF5IiwibGFzdERheSIsImN1cnJlbnQiLCJkYXlPZldlZWsiLCJkYXlzVG9TdWJ0cmFjdCIsImdldEV2ZW50cyIsImdldFVzZXJDYWxlbmRhckRhdGEiLCJyZXF1aXJlIiwidXNlckRhdGEiLCJldmVudHMiLCJlcnJvciIsImdldEFsbENhbGVuZGFyRXZlbnRzIiwiZ2V0VXBjb21pbmdFdmVudHMiLCJkYXlzIiwiYWxsRXZlbnRzIiwiZnV0dXJlRGF0ZSIsImV2ZW50IiwiZXZlbnREYXRlIiwiYSIsImIiLCJnZXRFdmVudHNGb3JEYXRlUmFuZ2UiLCJmaW5kRXZlbnRCeUlkIiwiZXZlbnRJZCIsImdsb2JhbEZvckNvbnZlcnNhdGlvbnMiLCJ0ZW1wQ29udmVyc2F0aW9ucyIsImdldENvbnZlcnNhdGlvblNlc3Npb24iLCJzZXNzaW9uSWQiLCJzZXNzaW9uIiwiY3JlYXRlQ29udmVyc2F0aW9uU2Vzc2lvbiIsImV4aXN0aW5nSW5kZXgiLCJuZXdTZXNzaW9uIiwidHVybnMiLCJjdXJyZW50VG9waWMiLCJ1bmRlZmluZWQiLCJjdXJyZW50U3ViamVjdCIsInBlbmRpbmdUYXNrcyIsImxhc3RVcGRhdGUiLCJ1cGRhdGVDb252ZXJzYXRpb25TZXNzaW9uIiwiaW5kZXgiLCJzIiwiYWRkQ29udmVyc2F0aW9uVHVybiIsImNvbnRlbnQiLCJtZXRhZGF0YSIsInR1cm4iLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyIiwidGltZXN0YW1wIiwic2xpY2UiLCJhZGRQZW5kaW5nVGFzayIsInR5cGUiLCJkZXNjcmlwdGlvbiIsImRhdGEiLCJ0YXNrIiwiY29tcGxldGVkIiwiY3JlYXRlZEF0IiwibWFya1Rhc2tDb21wbGV0ZWQiLCJ0YXNrSWQiLCJyZXN1bHQiLCJ0IiwiZ2V0UGVuZGluZ1Rhc2tzIiwiZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSIsImxpbWl0IiwiZ2V0VXNlckFjdGl2ZVNlc3Npb25zIiwib25lSG91ckFnbyIsImNsZWFudXBPbGRDb252ZXJzYXRpb25zIiwic2l4SG91cnNBZ28iLCJiZWZvcmUiLCJpIiwiYWZ0ZXIiLCJiY3J5cHQiLCJpbml0RGVmYXVsdFVzZXJzIiwic3R1ZGVudEV4aXN0cyIsImluc3RydWN0b3JFeGlzdHMiLCJoYXNoZWRQYXNzd29yZCIsImhhc2hTeW5jIiwibmFtZSIsInBhc3N3b3JkIiwiZW5yb2xsbWVudFllYXIiLCJhY2FkZW1pY1llYXIiLCJwaG9uZU51bWJlciIsImRhdGVPZkJpcnRoIiwiYWRkcmVzcyIsImVtZXJnZW5jeUNvbnRhY3QiLCJwaG9uZSIsInJlbGF0aW9uc2hpcCIsImluaXRTYW1wbGVSZXBvcnRzIiwiZXhpc3RpbmdTYW1wbGVSZXBvcnRzIiwiY3VycmVudFdlZWsiLCJjdXJyZW50V2Vla0VuZCIsInByZXZXZWVrIiwicHJldldlZWtFbmQiLCJzdWJtaXR0ZWRBdCIsInJlc3BvbnNlcyIsInRlbWFzWURvbWluaW8iLCJldmlkZW5jaWFBcHJlbmRpemFqZSIsImRpZmljdWx0YWRlc0VzdHJhdGVnaWFzIiwiY29uZXhpb25lc0FwbGljYWNpb24iLCJjb21lbnRhcmlvc0FkaWNpb25hbGVzIiwidHdvV2Vla3NBZ28iLCJ0d29XZWVrc0Fnb0VuZCIsInNldEludGVydmFsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/temp-storage.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jose","vendor-chunks/next-auth","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/@babel","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute&page=%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-calendar%2Fupcoming-events%2Froute.ts&appDir=%2FUsers%2Frodrigodibernardo33gmail.com%2FDocuments%2FApp%20Development%20Proyects%2FIntellego%20Platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frodrigodibernardo33gmail.com%2FDocuments%2FApp%20Development%20Proyects%2FIntellego%20Platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();