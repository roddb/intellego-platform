
> intellego-platform@1.0.0 dev
> next dev

   â–² Next.js 15.3.4
   - Local:        http://localhost:3000
   - Network:      http://192.168.0.96:3000
   - Environments: .env

 âœ“ Starting...
 âœ“ Ready in 1445ms
 âœ“ Compiled /middleware in 198ms (210 modules)
Middleware executing for: /
 â—‹ Compiling / ...
 âœ“ Compiled / in 1519ms (1056 modules)
ğŸ”§ Inicializando usuarios por defecto...
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
 GET / 200 in 2073ms
 âœ“ Compiled in 175ms (367 modules)
Middleware executing for: /
 GET / 200 in 61ms
 âœ“ Compiled /api/auth/[...nextauth] in 421ms (1049 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
ğŸ”§ Inicializando usuarios por defecto...
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
 GET /api/auth/session 200 in 1459ms
Middleware executing for: /auth/signin
 âœ“ Compiled /auth/signin in 415ms (1058 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /auth/signin 200 in 570ms
 GET /api/auth/providers 200 in 17ms
 GET /api/auth/csrf 200 in 4ms
 POST /api/auth/callback/credentials 200 in 354ms
 GET /api/auth/session 200 in 7ms
ğŸ”§ Inicializando usuarios por defecto...
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
 GET /api/auth/session 200 in 16ms
Middleware executing for: /dashboard/student
ğŸ”§ Inicializando usuarios por defecto...
 â—‹ Compiling /dashboard/student ...
 âœ“ Compiled /dashboard/student in 788ms (1270 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
 GET /dashboard/student 200 in 874ms
 âœ“ Compiled /api/weekly-reports in 378ms (1359 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:24:23.814Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 508ms
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:24:23.825Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 10ms
 âœ“ Compiled /api/ai-calendar/upcoming-events in 336ms (1361 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
ğŸ“… Inicializando datos de calendario demo...
âœ… Datos de calendario demo inicializados
 GET /api/ai-calendar/upcoming-events 200 in 413ms
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:24:24.233Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 405ms
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:24:24.242Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 5ms
 GET /api/ai-calendar/upcoming-events 200 in 9ms
 â—‹ Compiling /api/ai-chat/initialize ...
 âœ“ Compiled /api/ai-chat/initialize in 790ms (1700 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
âœ… Novu notification service initialized successfully
ğŸ“± Push notifications, email, and SMS are now available
 POST /api/ai-chat/initialize 200 in 975ms
 POST /api/ai-chat/initialize 200 in 980ms
 âœ“ Compiled /api/ai-chat/enhanced-message in 425ms (1624 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
 POST /api/ai-chat/enhanced-message 200 in 2128ms
 POST /api/ai-chat/enhanced-message 200 in 1488ms
 âœ“ Compiled in 584ms (1258 modules)
Middleware executing for: /dashboard/student
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /dashboard/student 200 in 118ms
 âœ“ Compiled in 150ms (1258 modules)
Middleware executing for: /dashboard/student
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /dashboard/student 200 in 65ms
 âœ“ Compiled /api/ai-chat/enhanced-message in 280ms (828 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
 POST /api/ai-chat/enhanced-message 401 in 394ms
Middleware executing for: /dashboard/student
 GET /dashboard/student 200 in 47ms
 âœ“ Compiled /api/auth/[...nextauth] in 331ms (802 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /api/auth/session 200 in 448ms
Middleware executing for: /dashboard/student
 GET /dashboard/student 200 in 48ms
 â—‹ Compiling /api/weekly-reports ...
ğŸ”§ Inicializando usuarios por defecto...
 âœ“ Compiled /api/weekly-reports in 626ms (1154 modules)
Middleware executing for: /dashboard/student
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
 âœ“ Compiled in 1ms (1230 modules)
 âœ“ Compiled in 1ms (1230 modules)
 âœ“ Compiled in 0ms (1230 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
âœ… Novu notification service initialized successfully
ğŸ“± Push notifications, email, and SMS are now available
 POST /api/ai-chat/initialize 200 in 1273ms
 âœ“ Compiled in 1ms (1230 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:38:41.769Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 1466ms
 GET /dashboard/student 200 in 822ms
Middleware executing for: /dashboard/student
 âœ“ Compiled in 1ms (1230 modules)
 âœ“ Compiled in 0ms (1230 modules)
 âœ“ Compiled in 0ms (1230 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /api/auth/session 200 in 748ms
 âœ“ Compiled in 0ms (1230 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /dashboard/student 200 in 546ms
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
âœ… Novu notification service initialized successfully
ğŸ“± Push notifications, email, and SMS are now available
ğŸ”§ Inicializando usuarios por defecto...
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:38:42.579Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 403ms
 POST /api/ai-chat/initialize 200 in 404ms
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
Middleware executing for: /dashboard/student
 âœ“ Compiled in 677ms (1902 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /dashboard/student 200 in 478ms
Middleware executing for: /dashboard/student
 GET /dashboard/student 200 in 12ms
 âœ“ Compiled /api/debug-sara-memory in 392ms (1694 modules)
ğŸ§ª Debug Sara Memory - Action: full_integration_test
ğŸ¯ Running full integration test...
ğŸ§  Testing persistent memory system...
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
âœ… Datos de calendario demo ya existen
ğŸ’¬ Created conversation session integration-session for user debug-test-student
ğŸ’¬ Processing message for session integration-session: "Hola Sara, explÃ­came quÃ© son las ecuaciones cuadrÃ¡..."
ğŸ“Š Session has 0 previous turns, 0 pending tasks
ğŸ’¬ Updated session integration-session - 1 turns
ğŸ“Š Learning profile updated for debug-test-student: Primary=multimodal, Secondary=none
ğŸ” Checking for calendar tasks in message: "Hola Sara, explÃ­came quÃ© son las ecuaciones cuadrÃ¡..."
ğŸ’¬ Updated session integration-session - 2 turns
ğŸ’¬ Processing message for session integration-session: "ContinÃºa explicando con ejemplos prÃ¡cticos..."
ğŸ“Š Session has 2 previous turns, 0 pending tasks
ğŸ’¬ Updated session integration-session - 3 turns
ğŸ” Checking for calendar tasks in message: "ContinÃºa explicando con ejemplos prÃ¡cticos..."
ğŸ’¬ Updated session integration-session - 4 turns
ğŸ“‹ Added pending task: Examen de matemÃ¡ticas para el viernes
ğŸ’¬ Updated session integration-session - 4 turns
ğŸ“… Testing calendar task execution...
Sending calendar test message: "Agrega una sesiÃ³n de estudio de matemÃ¡ticas para maÃ±ana a las 3 PM"
ğŸ’¬ Created conversation session calendar-test-session for user debug-test-student
ğŸ’¬ Processing message for session calendar-test-session: "Agrega una sesiÃ³n de estudio de matemÃ¡ticas para m..."
ğŸ“Š Session has 0 previous turns, 0 pending tasks
ğŸ’¬ Updated session calendar-test-session - 1 turns
ğŸ” Checking for calendar tasks in message: "Agrega una sesiÃ³n de estudio de matemÃ¡ticas para m..."
âŒ Error in AI event creation: TypeError: Failed to parse URL from /api/ai-calendar/create-event
    at createEventFromAI (src/lib/calendar-ai-integration.ts:454:27)
    at AICalendarIntegration.createPendingEvent (src/lib/calendar-ai-integration.ts:686:25)
    at AICalendarIntegration.processMessage (src/lib/calendar-ai-integration.ts:634:34)
    at ContextualConversationManager.handleCalendarTasks (src/lib/contextual-conversation-manager.ts:229:53)
    at ContextualConversationManager.generateContextualResponse (src/lib/contextual-conversation-manager.ts:521:38)
    at ContextualConversationManager.processContextualMessage (src/lib/contextual-conversation-manager.ts:127:32)
    at testCalendarExecution (src/app/api/debug-sara-memory/route.ts:147:55)
    at fullIntegrationTest (src/app/api/debug-sara-memory/route.ts:263:29)
    at async POST (src/app/api/debug-sara-memory/route.ts:32:26)
  452 |     }
  453 |
> 454 |     const response = await fetch('/api/ai-calendar/create-event', {
      |                           ^
  455 |       method: 'POST',
  456 |       headers: {
  457 |         'Content-Type': 'application/json', {
  [cause]: TypeError: Invalid URL
      at createEventFromAI (src/lib/calendar-ai-integration.ts:454:27)
      at AICalendarIntegration.createPendingEvent (src/lib/calendar-ai-integration.ts:686:25)
      at AICalendarIntegration.processMessage (src/lib/calendar-ai-integration.ts:634:34)
      at ContextualConversationManager.handleCalendarTasks (src/lib/contextual-conversation-manager.ts:229:53)
      at ContextualConversationManager.generateContextualResponse (src/lib/contextual-conversation-manager.ts:521:38)
      at ContextualConversationManager.processContextualMessage (src/lib/contextual-conversation-manager.ts:127:32)
      at testCalendarExecution (src/app/api/debug-sara-memory/route.ts:147:55)
      at fullIntegrationTest (src/app/api/debug-sara-memory/route.ts:263:29)
      at async POST (src/app/api/debug-sara-memory/route.ts:32:26)
    452 |     }
    453 |
  > 454 |     const response = await fetch('/api/ai-calendar/create-event', {
        |                           ^
    455 |       method: 'POST',
    456 |       headers: {
    457 |         'Content-Type': 'application/json', {
    code: 'ERR_INVALID_URL',
    input: '/api/ai-calendar/create-event'
  }
}
ğŸ¯ Calendar task detected and executed!
ğŸ“… Calendar task executed: calendar_event_creation
ğŸ’¬ Updated session calendar-test-session - 2 turns
ğŸ’¬ Testing conversation coherence...
Sending message 1: "Sara, necesito ayuda con fÃ­sica, especÃ­ficamente con cinemÃ¡tica"
ğŸ’¬ Created conversation session coherence-session for user debug-test-student
ğŸ’¬ Processing message for session coherence-session: "Sara, necesito ayuda con fÃ­sica, especÃ­ficamente c..."
ğŸ“Š Session has 0 previous turns, 0 pending tasks
ğŸ’¬ Updated session coherence-session - 1 turns
ğŸ” Checking for calendar tasks in message: "Sara, necesito ayuda con fÃ­sica, especÃ­ficamente c..."
ğŸ’¬ Updated session coherence-session - 2 turns
Sending message 2: "ExplÃ­came quÃ© es el movimiento rectilÃ­neo uniforme"
ğŸ’¬ Processing message for session coherence-session: "ExplÃ­came quÃ© es el movimiento rectilÃ­neo uniforme..."
ğŸ“Š Session has 2 previous turns, 0 pending tasks
ğŸ’¬ Updated session coherence-session - 3 turns
ğŸ“Š Learning profile updated for debug-test-student: Primary=multimodal, Secondary=none
ğŸ” Checking for calendar tasks in message: "ExplÃ­came quÃ© es el movimiento rectilÃ­neo uniforme..."
ğŸ’¬ Updated session coherence-session - 4 turns
Sending message 3: "Â¿Puedes darme ejemplos de la vida real?"
ğŸ’¬ Processing message for session coherence-session: "Â¿Puedes darme ejemplos de la vida real?..."
ğŸ“Š Session has 4 previous turns, 0 pending tasks
ğŸ’¬ Updated session coherence-session - 5 turns
ğŸ” Checking for calendar tasks in message: "Â¿Puedes darme ejemplos de la vida real?..."
ğŸ’¬ Updated session coherence-session - 6 turns
 POST /api/debug-sara-memory 200 in 9744ms
 âœ“ Compiled in 241ms (821 modules)
ğŸ§ª Debug Sara Memory - Action: test_calendar_execution
ğŸ“… Testing calendar task execution...
âœ… Datos de calendario demo ya existen
Sending calendar test message: "Sara, agrega un examen de quÃ­mica para el viernes 25 de julio a las 9 AM en aula 104"
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ’¬ Created conversation session calendar-test-session for user debug-test-student-2
ğŸ’¬ Processing message for session calendar-test-session: "Sara, agrega un examen de quÃ­mica para el viernes ..."
ğŸ“Š Session has 0 previous turns, 0 pending tasks
ğŸ’¬ Updated session calendar-test-session - 1 turns
ğŸ” Checking for calendar tasks in message: "Sara, agrega un examen de quÃ­mica para el viernes ..."
ğŸ”„ Using temp-storage system for reliability
Direct API call failed, trying alternative approach: TypeError: createCalendarEvent is not a function
    at createEventFromAI (src/lib/calendar-ai-integration.ts:460:29)
    at AICalendarIntegration.createPendingEvent (src/lib/calendar-ai-integration.ts:722:25)
    at AICalendarIntegration.processMessage (src/lib/calendar-ai-integration.ts:670:34)
    at ContextualConversationManager.handleCalendarTasks (src/lib/contextual-conversation-manager.ts:229:53)
    at ContextualConversationManager.generateContextualResponse (src/lib/contextual-conversation-manager.ts:521:38)
    at ContextualConversationManager.processContextualMessage (src/lib/contextual-conversation-manager.ts:127:32)
    at testCalendarExecution (src/app/api/debug-sara-memory/route.ts:147:55)
    at POST (src/app/api/debug-sara-memory/route.ts:24:32)
  458 |         json: async () => eventData
  459 |       }
> 460 |       const response = await createCalendarEvent(mockRequest as any)
      |                             ^
  461 |       const result = await response.json()
  462 |       
  463 |       return {
ğŸ¯ Calendar task detected and executed!
ğŸ“… Calendar task executed: calendar_event_creation
ğŸ’¬ Updated session calendar-test-session - 2 turns
 POST /api/debug-sara-memory 200 in 143ms
 âœ“ Compiled in 128ms (821 modules)
ğŸ§ª Debug Sara Memory - Action: test_calendar_execution
ğŸ“… Testing calendar task execution...
âœ… Datos de calendario demo ya existen
Sending calendar test message: "Sara, agrega un examen de matemÃ¡ticas para el viernes a las 10 AM"
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ’¬ Created conversation session calendar-test-session for user debug-test-student-3
ğŸ’¬ Processing message for session calendar-test-session: "Sara, agrega un examen de matemÃ¡ticas para el vier..."
ğŸ“Š Session has 0 previous turns, 0 pending tasks
ğŸ’¬ Updated session calendar-test-session - 1 turns
ğŸ” Checking for calendar tasks in message: "Sara, agrega un examen de matemÃ¡ticas para el vier..."
ğŸ¯ Calendar task detected and executed!
ğŸ“… Calendar task executed: calendar_event_creation
ğŸ’¬ Updated session calendar-test-session - 2 turns
 POST /api/debug-sara-memory 200 in 73ms
ğŸ§ª Debug Sara Memory - Action: test_calendar_execution
ğŸ“… Testing calendar task execution...
Sending calendar test message: "Sara, agrega un examen de matemÃ¡ticas para el viernes a las 10 AM en aula 203"
ğŸ’¬ Created conversation session calendar-test-session for user debug-test-student-4
ğŸ’¬ Processing message for session calendar-test-session: "Sara, agrega un examen de matemÃ¡ticas para el vier..."
ğŸ“Š Session has 0 previous turns, 0 pending tasks
ğŸ’¬ Updated session calendar-test-session - 1 turns
ğŸ” Checking for calendar tasks in message: "Sara, agrega un examen de matemÃ¡ticas para el vier..."
ğŸ”„ Using temp-storage system for reliability
Direct API call failed, trying alternative approach: TypeError: createCalendarEvent is not a function
    at createEventFromAI (src/lib/calendar-ai-integration.ts:460:29)
    at AICalendarIntegration.createPendingEvent (src/lib/calendar-ai-integration.ts:730:25)
    at AICalendarIntegration.processMessage (src/lib/calendar-ai-integration.ts:678:34)
    at ContextualConversationManager.handleCalendarTasks (src/lib/contextual-conversation-manager.ts:229:53)
    at ContextualConversationManager.generateContextualResponse (src/lib/contextual-conversation-manager.ts:521:38)
    at ContextualConversationManager.processContextualMessage (src/lib/contextual-conversation-manager.ts:127:32)
    at testCalendarExecution (src/app/api/debug-sara-memory/route.ts:147:55)
    at POST (src/app/api/debug-sara-memory/route.ts:24:32)
  458 |         json: async () => eventData
  459 |       }
> 460 |       const response = await createCalendarEvent(mockRequest as any)
      |                             ^
  461 |       const result = await response.json()
  462 |       
  463 |       return {
ğŸ†• Creating calendar data for user debug-test-student-4
ğŸ“… Creating event: Examen de MatemÃ¡ticas for 2025-07-22T13:44:30.366Z at 10:00
ğŸ“… Evento agregado: Examen de MatemÃ¡ticas - Total eventos: 1
ğŸ¯ Calendar task detected and executed!
ğŸ“… Calendar task executed: calendar_event_creation
ğŸ’¬ Updated session calendar-test-session - 2 turns
 POST /api/debug-sara-memory 200 in 93ms
ğŸ§ª Debug Sara Memory - Action: full_integration_test
ğŸ¯ Running full integration test...
ğŸ§  Testing persistent memory system...
ğŸ’¬ Created conversation session integration-session for user final-test-student
ğŸ’¬ Processing message for session integration-session: "Hola Sara, explÃ­came quÃ© son las ecuaciones cuadrÃ¡..."
ğŸ“Š Session has 0 previous turns, 0 pending tasks
ğŸ’¬ Updated session integration-session - 1 turns
ğŸ“Š Learning profile updated for final-test-student: Primary=multimodal, Secondary=none
ğŸ” Checking for calendar tasks in message: "Hola Sara, explÃ­came quÃ© son las ecuaciones cuadrÃ¡..."
ğŸ’¬ Updated session integration-session - 2 turns
ğŸ’¬ Processing message for session integration-session: "ContinÃºa explicando con ejemplos prÃ¡cticos..."
ğŸ“Š Session has 2 previous turns, 0 pending tasks
ğŸ’¬ Updated session integration-session - 3 turns
ğŸ” Checking for calendar tasks in message: "ContinÃºa explicando con ejemplos prÃ¡cticos..."
ğŸ’¬ Updated session integration-session - 4 turns
ğŸ“‹ Added pending task: Examen de matemÃ¡ticas para el viernes
ğŸ’¬ Updated session integration-session - 4 turns
ğŸ“… Testing calendar task execution...
Sending calendar test message: "Agrega una sesiÃ³n de estudio de matemÃ¡ticas para maÃ±ana a las 3 PM"
ğŸ’¬ Created conversation session calendar-test-session for user final-test-student
ğŸ’¬ Processing message for session calendar-test-session: "Agrega una sesiÃ³n de estudio de matemÃ¡ticas para m..."
ğŸ“Š Session has 0 previous turns, 0 pending tasks
ğŸ’¬ Updated session calendar-test-session - 1 turns
ğŸ” Checking for calendar tasks in message: "Agrega una sesiÃ³n de estudio de matemÃ¡ticas para m..."
Direct API call failed, trying alternative approach: TypeError: createCalendarEvent is not a function
    at createEventFromAI (src/lib/calendar-ai-integration.ts:460:29)
    at AICalendarIntegration.createPendingEvent (src/lib/calendar-ai-integration.ts:730:25)
    at AICalendarIntegration.processMessage (src/lib/calendar-ai-integration.ts:678:34)
    at ContextualConversationManager.handleCalendarTasks (src/lib/contextual-conversation-manager.ts:229:53)
    at ContextualConversationManager.generateContextualResponse (src/lib/contextual-conversation-manager.ts:521:38)
    at ContextualConversationManager.processContextualMessage (src/lib/contextual-conversation-manager.ts:127:32)
    at testCalendarExecution (src/app/api/debug-sara-memory/route.ts:147:55)
    at fullIntegrationTest (src/app/api/debug-sara-memory/route.ts:263:29)
    at async POST (src/app/api/debug-sara-memory/route.ts:32:26)
  458 |         json: async () => eventData
  459 |       }
> 460 |       const response = await createCalendarEvent(mockRequest as any)
      |                             ^
  461 |       const result = await response.json()
  462 |       
  463 |       return {
ğŸ†• Creating calendar data for user final-test-student
ğŸ“… Creating event: SesiÃ³n de Estudio - Estudio for 2025-07-22T13:48:36.715Z at 15:00
ğŸ“… Evento agregado: SesiÃ³n de Estudio - Estudio - Total eventos: 1
ğŸ¯ Calendar task detected and executed!
ğŸ“… Calendar task executed: calendar_event_creation
ğŸ’¬ Updated session calendar-test-session - 2 turns
ğŸ’¬ Testing conversation coherence...
Sending message 1: "Sara, necesito ayuda con fÃ­sica, especÃ­ficamente con cinemÃ¡tica"
ğŸ’¬ Created conversation session coherence-session for user final-test-student
ğŸ’¬ Processing message for session coherence-session: "Sara, necesito ayuda con fÃ­sica, especÃ­ficamente c..."
ğŸ“Š Session has 0 previous turns, 0 pending tasks
ğŸ’¬ Updated session coherence-session - 1 turns
ğŸ” Checking for calendar tasks in message: "Sara, necesito ayuda con fÃ­sica, especÃ­ficamente c..."
ğŸ’¬ Updated session coherence-session - 2 turns
Sending message 2: "ExplÃ­came quÃ© es el movimiento rectilÃ­neo uniforme"
ğŸ’¬ Processing message for session coherence-session: "ExplÃ­came quÃ© es el movimiento rectilÃ­neo uniforme..."
ğŸ“Š Session has 2 previous turns, 0 pending tasks
ğŸ’¬ Updated session coherence-session - 3 turns
ğŸ“Š Learning profile updated for final-test-student: Primary=multimodal, Secondary=none
ğŸ” Checking for calendar tasks in message: "ExplÃ­came quÃ© es el movimiento rectilÃ­neo uniforme..."
ğŸ’¬ Updated session coherence-session - 4 turns
Sending message 3: "Â¿Puedes darme ejemplos de la vida real?"
ğŸ’¬ Processing message for session coherence-session: "Â¿Puedes darme ejemplos de la vida real?..."
ğŸ“Š Session has 4 previous turns, 0 pending tasks
ğŸ’¬ Updated session coherence-session - 5 turns
ğŸ” Checking for calendar tasks in message: "Â¿Puedes darme ejemplos de la vida real?..."
ğŸ’¬ Updated session coherence-session - 6 turns
 POST /api/debug-sara-memory 200 in 9960ms
Middleware executing for: /
 âœ“ Compiled / in 295ms (802 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET / 200 in 462ms
 âœ“ Compiled /api/auth/[...nextauth] in 212ms (808 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /api/auth/session 200 in 298ms
ğŸ”§ Inicializando usuarios por defecto...
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
Middleware executing for: /auth/signin
 GET /auth/signin 200 in 36ms
 GET /api/auth/providers 200 in 15ms
 GET /api/auth/csrf 200 in 5ms
 POST /api/auth/callback/credentials 200 in 321ms
ğŸ”§ Inicializando usuarios por defecto...
 GET /api/auth/session 200 in 10ms
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
 GET /api/auth/session 200 in 11ms
Middleware executing for: /dashboard/student
 GET /dashboard/student 200 in 34ms
ğŸ”§ Inicializando usuarios por defecto...
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
 âœ“ Compiled /api/weekly-reports in 380ms (897 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:53:17.990Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 497ms
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:53:18.005Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 11ms
 âœ“ Compiled /api/ai-calendar/upcoming-events in 161ms (899 modules)
Middleware executing for: /dashboard/student
 âœ“ Compiled in 1ms (899 modules)
 âœ“ Compiled in 0ms (899 modules)
 âœ“ Compiled in 1ms (899 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
 GET /api/ai-calendar/upcoming-events 200 in 495ms
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:53:18.492Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 486ms
 âœ“ Compiled in 1ms (899 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /dashboard/student 200 in 467ms
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
 GET /api/ai-calendar/upcoming-events 200 in 282ms
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-21T13:53:18.778Z
  Week start: 2025-07-21T03:00:00.000Z
  Week end: 2025-07-28T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 285ms
 âœ“ Compiled /api/ai-chat/initialize in 428ms (1239 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
âœ… Novu notification service initialized successfully
ğŸ“± Push notifications, email, and SMS are now available
 POST /api/ai-chat/initialize 200 in 561ms
 POST /api/ai-chat/initialize 200 in 566ms
Middleware executing for: /dashboard/student
 GET /dashboard/student 200 in 44ms
 âœ“ Compiled /api/ai-chat/enhanced-message in 385ms (1249 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
Middleware executing for: /dashboard/student
 GET /dashboard/student 200 in 38ms
 POST /api/ai-chat/enhanced-message 200 in 1933ms
âœ… Novu notification service initialized successfully
ğŸ“± Push notifications, email, and SMS are now available
 POST /api/ai-chat/initialize 200 in 95ms
 POST /api/ai-chat/initialize 200 in 96ms
 POST /api/ai-chat/enhanced-message 200 in 1400ms
 POST /api/ai-chat/enhanced-message 200 in 1255ms
 âœ“ Compiled in 1204ms (1278 modules)
 âœ“ Compiled in 286ms (1278 modules)
 âœ“ Compiled in 340ms (1278 modules)
 âœ“ Compiled in 271ms (1278 modules)
 âœ“ Compiled in 173ms (476 modules)
 âœ“ Compiled in 165ms (476 modules)
 âœ“ Compiled in 130ms (476 modules)
Middleware executing for: /
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET / 200 in 239ms
 âœ“ Compiled in 431ms (476 modules)
Middleware executing for: /
 GET / 200 in 47ms
 â—‹ Compiling /api/ai-chat/initialize ...
 âœ“ Compiled /api/ai-chat/initialize in 664ms (1159 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
âœ… Novu notification service initialized successfully
ğŸ“± Push notifications, email, and SMS are now available
 POST /api/ai-chat/initialize 401 in 916ms
 âœ“ Compiled /api/ai-chat/enhanced-message in 252ms (1169 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
âœ… Datos de calendario demo ya existen
 POST /api/ai-chat/enhanced-message 401 in 323ms
 POST /api/ai-chat/enhanced-message 401 in 4ms
 POST /api/ai-chat/enhanced-message 401 in 3ms
 âœ“ Compiled in 202ms (802 modules)
 âœ“ Compiled in 284ms (476 modules)
ğŸ§¹ Cleaned up 9 old conversation sessions
Middleware executing for: /
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET / 200 in 568ms
Middleware executing for: /auth/signin
 GET /auth/signin 200 in 54ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 939ms (808 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
 GET /api/auth/providers 200 in 1183ms
 GET /api/auth/csrf 200 in 7ms
 POST /api/auth/callback/credentials 200 in 436ms
 GET /api/auth/session 200 in 22ms
ğŸ”§ Inicializando usuarios por defecto...
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
 GET /api/auth/session 200 in 12ms
Middleware executing for: /dashboard/student
 GET /dashboard/student 200 in 175ms
ğŸ”§ Inicializando usuarios por defecto...
âœ… Usuario estudiante demo creado
âœ… Usuario instructor demo creado
âœ… VerificaciÃ³n de usuarios por defecto completada
ğŸ“ Inicializando reportes de muestra...
âœ… Reportes de muestra creados exitosamente
ğŸ”„ Using temp-storage system for reliability
 â—‹ Compiling /api/weekly-reports ...
 âœ“ Compiled /api/weekly-reports in 570ms (897 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-28T14:44:17.141Z
  Week start: 2025-07-28T03:00:00.000Z
  Week end: 2025-08-04T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 1052ms
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-28T14:44:17.161Z
  Week start: 2025-07-28T03:00:00.000Z
  Week end: 2025-08-04T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 18ms
 âœ“ Compiled /api/ai-calendar/upcoming-events in 170ms (899 modules)
âœ… Usuarios demo ya existen, no se reinicializan
âœ… Reportes de muestra ya existen, no se reinicializan
ğŸ”„ Using temp-storage system for reliability
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-28T14:44:17.525Z
  Week start: 2025-07-28T03:00:00.000Z
  Week end: 2025-08-04T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 360ms
âœ… Datos de calendario demo ya existen
 GET /api/ai-calendar/upcoming-events 200 in 379ms
ğŸ” Debug canSubmitThisWeek for user demo-student-fixed:
  Current date: 2025-07-28T14:44:17.542Z
  Week start: 2025-07-28T03:00:00.000Z
  Week end: 2025-08-04T02:59:59.999Z
  Is current week: true
  Existing report: NO
  Can submit: true
 GET /api/weekly-reports 200 in 13ms
 GET /api/ai-calendar/upcoming-events 200 in 14ms
